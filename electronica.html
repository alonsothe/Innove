<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Innove | Electronics Engineering Suite</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">

    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$']],
                processEscapes: true
            },
            options: { renderActions: { addMenu: [] } }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        /* =========================================
           1. DISEÃ‘O VISUAL & VARIABLES
           ========================================= */
        :root {
            --primary: #2563eb;       /* Royal Blue */
            --primary-glow: rgba(37, 99, 235, 0.3);
            --accent: #06b6d4;        /* Cyan */
            --bg-body: #f0f4f8;       /* Gris azulado muy claro */
            --bg-glass: rgba(255, 255, 255, 0.7);
            --bg-card: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --border: rgba(255, 255, 255, 0.6);
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);
            --radius: 20px;
        }

        /* MODO OSCURO (Activado con clase .dark) */
        body.dark {
            --bg-body: #0f172a;
            --bg-glass: rgba(30, 41, 59, 0.7);
            --bg-card: #1e293b;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --border: rgba(255, 255, 255, 0.05);
            --primary: #60a5fa;
            --primary-glow: rgba(96, 165, 250, 0.2);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            min-height: 100vh;
            background-image: 
                radial-gradient(at 0% 0%, rgba(37, 99, 235, 0.1) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(6, 182, 212, 0.1) 0px, transparent 50%);
            transition: background 0.3s ease;
            padding-bottom: 60px;
        }

        /* =========================================
           2. HEADER & NAVEGACIÃ“N
           ========================================= */
        .navbar {
            position: sticky; top: 20px; z-index: 100;
            width: 90%; max-width: 1200px; margin: 0 auto 40px auto;
            background: var(--bg-glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--border);
            border-radius: 100px;
            padding: 15px 30px;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: var(--shadow);
        }

        .logo {
            font-weight: 800; font-size: 1.5rem; letter-spacing: -1px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            display: flex; align-items: center; gap: 10px;
        }

        .nav-tabs {
            display: flex; gap: 5px; background: rgba(0,0,0,0.05);
            padding: 5px; border-radius: 50px;
        }

        .tab-btn {
            background: transparent; border: none; padding: 10px 20px;
            border-radius: 40px; font-weight: 600; color: var(--text-muted);
            cursor: pointer; transition: all 0.3s; font-size: 0.9rem;
        }

        .tab-btn.active {
            background: var(--bg-card); color: var(--primary);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .theme-toggle {
            background: var(--bg-card); border: 1px solid var(--border);
            width: 40px; height: 40px; border-radius: 50%;
            cursor: pointer; font-size: 1.2rem; display: grid; place-items: center;
            transition: transform 0.2s;
        }
        .theme-toggle:hover { transform: rotate(15deg); }

        /* =========================================
           3. GRID DE EJERCICIOS
           ========================================= */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        .section-title {
            margin-bottom: 30px; font-size: 2rem; font-weight: 800;
            text-align: center; letter-spacing: -0.03em;
        }

        .grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }

        .card {
            background: var(--bg-card);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            padding: 25px;
            position: relative; overflow: hidden;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 6px rgba(0,0,0,0.02);
            display: flex; flex-direction: column;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px -5px rgba(0,0,0,0.1);
            border-color: var(--primary);
        }

        .card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%;
            background: linear-gradient(to bottom, var(--primary), var(--accent));
            opacity: 0; transition: opacity 0.3s;
        }
        .card:hover::before { opacity: 1; }

        .card-header {
            display: flex; justify-content: space-between; align-items: flex-start;
            margin-bottom: 15px;
        }

        .badge {
            font-size: 0.7rem; font-weight: 800; text-transform: uppercase;
            padding: 6px 12px; border-radius: 8px; letter-spacing: 0.5px;
        }
        .bg-analog { background: rgba(37, 99, 235, 0.1); color: var(--primary); }
        .bg-digital { background: rgba(6, 182, 212, 0.1); color: var(--accent); }

        .problem-text {
            font-size: 1rem; line-height: 1.6; color: var(--text-main);
            margin-bottom: 20px; flex-grow: 1;
        }

        /* =========================================
           4. SOLUCIÃ“N DESPLEGABLE (PREMIUM)
           ========================================= */
        details { margin-top: auto; }
        
        summary {
            list-style: none; cursor: pointer;
            padding: 12px 0; font-weight: 600; font-size: 0.9rem;
            color: var(--text-muted); display: flex; align-items: center; gap: 8px;
            transition: color 0.2s;
        }
        
        summary:hover { color: var(--primary); }
        summary::before { content: "Add"; font-family: "Material Icons"; content: "+"; font-size: 1.2rem; }
        details[open] summary::before { content: "-"; }

        .solution-box {
            background: var(--bg-body); border-radius: 12px; padding: 20px;
            margin-top: 10px; border: 1px solid var(--border);
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .step {
            display: flex; gap: 15px; margin-bottom: 15px;
        }
        
        .step-num {
            width: 24px; height: 24px; border-radius: 50%;
            background: var(--primary); color: white;
            font-size: 0.75rem; font-weight: 700;
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0; margin-top: 2px;
        }

        .step-content { font-size: 0.9rem; line-height: 1.5; color: var(--text-main); }

        .final-res {
            margin-top: 15px; padding: 12px; text-align: center;
            background: linear-gradient(135deg, rgba(37,99,235,0.1), rgba(6,182,212,0.1));
            border-radius: 8px; border: 1px solid var(--primary-glow);
            color: var(--primary); font-family: 'JetBrains Mono', monospace; font-weight: 700;
        }

        /* MathJax Fix */
        mjx-container { font-size: 1.05em !important; }

    </style>
</head>

<body>

    <nav class="navbar">
        <div class="logo">
            <span>âš¡</span> Innove
        </div>
        <div class="nav-tabs">
            <button class="tab-btn active" onclick="filter('all')">Todo</button>
            <button class="tab-btn" onclick="filter('analog')">AnalÃ³gica</button>
            <button class="tab-btn" onclick="filter('digital')">Digital</button>
        </div>
        <button class="theme-toggle" onclick="document.body.classList.toggle('dark')">â—‘</button>
    </nav>

    <main class="container">
        <h1 class="section-title">Banco de Parciales UPC</h1>
        <div class="grid" id="exercise-grid">
            </div>
    </main>

    <script>
        // DATOS DE LOS EJERCICIOS (Basados en electronica.pdf y electronica2.pdf)
        const db = [
            // --- ANALÃ“GICA (PDF 2) ---
            {
                id: "ANA-01", type: "analog", title: "Filtro Anti-aliasing",
                text: "DiseÃ±a un filtro pasivo de primer orden con frecuencia de corte $f_c = 50Hz$. (i) Dibuja el esquema. (ii) Si $R=1k\\Omega$, halla $C$.",
                steps: [
                    "Esquema: Filtro paso bajo RC (R en serie, C a tierra).",
                    "FÃ³rmula: $f_c = \\frac{1}{2\\pi R C}$.",
                    "Despejar C: $C = \\frac{1}{2\\pi (50)(1000)}$.",
                    "CÃ¡lculo: $C = \\frac{1}{314159} \\approx 3.18 \\mu F$."
                ],
                res: "C = 3.18 Î¼F"
            },
            {
                id: "ANA-02", type: "analog", title: "Respuesta en Frecuencia",
                text: "Si aplicamos una seÃ±al de entrada de $20V$ de amplitud y sufre una atenuaciÃ³n de $-40dB$, calcula la amplitud de salida $A_o$.",
                steps: [
                    "Ganancia en dB: $G_{dB} = 20 \\log(A_o / A_i)$.",
                    "$-40 = 20 \\log(A_o / 20)$.",
                    "$-2 = \\log(A_o / 20) \\to 10^{-2} = A_o / 20$.",
                    "$A_o = 20 \\cdot 0.01 = 0.2V$."
                ],
                res: "Ao = 0.2 V"
            },
            {
                id: "ANA-03", type: "analog", title: "Acondicionamiento ADC",
                text: "Sensor de corriente: $10mV/A$, Rango 50A. ADC rango 0-5V. (i) Halla ganancia $K$. (ii) ResoluciÃ³n con 8 bits.",
                steps: [
                    "Salida mÃ¡x sensor: $50A \\cdot 0.01V/A = 0.5V$.",
                    "Ganancia necesaria: $K = 5V / 0.5V = 10$.",
                    "ResoluciÃ³n V: $5V / 2^8 = 5/256 = 19.5mV$.",
                    "ResoluciÃ³n I: $19.5mV / (10 \\cdot 10mV/A) = 0.195A$."
                ],
                res: "K=10, Res=195mA"
            },
            {
                id: "ANA-04", type: "analog", title: "OpAmp con Red",
                text: "En el circuito del examen (Problema 2), obtÃ©n la expresiÃ³n de $V_x$ en funciÃ³n de $V_{AC}$ si hay un divisor de tensiÃ³n con OpAmp seguidor.",
                steps: [
                    "El OpAmp estÃ¡ en configuraciÃ³n seguidor de tensiÃ³n (buffer) con realimentaciÃ³n unitaria.",
                    "La entrada no inversora tiene un divisor: $V^+ = V_{AC} \\frac{R_2}{R_1+R_2}$.",
                    "Como $R_1=10M$ y $R_2=77.5k$, la atenuaciÃ³n es fuerte.",
                    "$V_x = V^+ \\approx V_{AC} \\cdot 0.0077$."
                ],
                res: "Vx â‰ˆ 0.0077 Vac"
            },
            {
                id: "ANA-05", type: "analog", title: "Sumador Inversor",
                text: "Se requiere $V_{01} = V_x + V_y$. El circuito usa un sumador inversor con $R_{in}=10k$ y realimentaciÃ³n $R$. Halla $R$.",
                steps: [
                    "EcuaciÃ³n sumador inversor: $V_{out} = - (V_1 \\frac{R_f}{R_1} + V_2 \\frac{R_f}{R_2})$.",
                    "AquÃ­ hay una etapa inversora adicional para cambiar el signo.",
                    "Para suma unitaria: $R_f = R_1 = R_2$.",
                    "Dado que las entradas son 10k, $R$ debe ser 10k."
                ],
                res: "R = 10 kÎ©"
            },
            {
                id: "ANA-06", type: "analog", title: "Trigger Schmitt",
                text: "Calcula la histÃ©resis de un comparador alimentado a $\\pm 5.5V$ con $R_1=10k$ y $R_2=10k$.",
                steps: [
                    "Umbrales: $V_{th} = \\pm V_{sat} \\frac{R_1}{R_1+R_2}$.",
                    "$V_{th} = \\pm 5.5 \\frac{10}{20} = \\pm 2.75V$.",
                    "Ancho de histÃ©resis: $2.75 - (-2.75) = 5.5V$."
                ],
                res: "VH = 5.5 V"
            },
            {
                id: "ANA-07", type: "analog", title: "Fuente de TensiÃ³n",
                text: "Calcula $V_y$ en el circuito dado (Divisor con 8V y resistencias 54.9k y 24.9k con seguidor).",
                steps: [
                    "Divisor de tensiÃ³n: $V^+ = 8V \\cdot \\frac{24.9k}{54.9k + 24.9k}$.",
                    "Suma R: $79.8k$.",
                    "$V^+ = 8 \\cdot 0.312 = 2.496V$.",
                    "Seguidor: $V_y = 2.5V$."
                ],
                res: "Vy â‰ˆ 2.5 V"
            },

            // --- DIGITAL (PDF 1) ---
            {
                id: "DIG-01", type: "digital", title: "Decodificador 7-Seg",
                text: "Simplifica por Karnaugh la funciÃ³n para el segmento 'a' del dado electrÃ³nico. Entradas $A_2, A_1, A_0$.",
                steps: [
                    "Tabla de verdad segÃºn PDF: 'a' es 0 en (000, 010, 100) y 1 en (001, 011, 101).",
                    "Observamos: 'a' sigue a $A_0$.",
                    "Mapa K: Agrupamos los 1s donde $A_0$ es alto.",
                    "FunciÃ³n simplificada: $a = A_0$."
                ],
                res: "a = A0"
            },
            {
                id: "DIG-02", type: "digital", title: "Multiplexor 4x1",
                text: "Implementa la funciÃ³n $g$ usando un MUX 4x1. Selectores $S_1=A_1, S_0=A_0$.",
                steps: [
                    "Analizamos tabla para $g$ con entradas $A_2$ fija o variable.",
                    "Si $A_1 A_0 = 00$, $g=1$ (Steady/Up). Entrada $D_0=1$.",
                    "Si $A_1 A_0 = 01$, $g$ depende de $A_2$.",
                    "ConfiguraciÃ³n tÃ­pica MUX: Asignar valores fijos o variable $A_2$ a las entradas de datos."
                ],
                res: "D0=1, D1=A2..."
            },
            {
                id: "DIG-03", type: "digital", title: "LÃ³gica NAND",
                text: "Convierte $C = A_1 + \\overline{A_0}$ usando solo puertas NAND.",
                steps: [
                    "Doble negaciÃ³n: $\\overline{\\overline{A_1 + \\overline{A_0}}}$.",
                    "DeMorgan: $\\overline{ \\overline{A_1} \\cdot \\overline{\\overline{A_0}} }$.",
                    "Simplificando: $\\overline{ \\overline{A_1} \\cdot A_0 }$.",
                    "Esto es una NAND donde una entrada ($A_1$) estÃ¡ invertida."
                ],
                res: "NAND(NOT(A1), A0)"
            },
            {
                id: "DIG-04", type: "digital", title: "Contador MÃ³dulo 6",
                text: "DiseÃ±a el contador para el dado (secuencia 0 a 5). Â¿CuÃ¡ntos Flip-Flops T hacen falta?",
                steps: [
                    "Estados necesarios: 6 (0,1,2,3,4,5).",
                    "Bits necesarios: $2^n \\ge 6 \\to n=3$.",
                    "Necesitamos 3 Flip-Flops.",
                    "El reset debe activarse cuando la cuenta llegue a 6 (110 binario) para reiniciar a 0."
                ],
                res: "3 Flip-Flops"
            },
            {
                id: "DIG-05", type: "digital", title: "Display Joker",
                text: "En el estado 'Joker' ($A_2 A_1 A_0 = 101$), Â¿quÃ© segmentos se iluminan para mostrar una 'J'?",
                steps: [
                    "Para una 'J' en 7 segmentos se suelen encender: b, c, d, e.",
                    "SegÃºn tabla PDF: a=0, b=1, c=1, d=1, e=1, f=0, g=0.",
                    "Verificar lÃ³gica positiva o negativa del display."
                ],
                res: "b, c, d, e (ON)"
            },
            {
                id: "DIG-06", type: "digital", title: "Frecuencia FF T",
                text: "Si un Flip-Flop T tiene la entrada T=1 fija y un reloj de 1kHz, Â¿cuÃ¡l es la frecuencia de salida Q?",
                steps: [
                    "T=1 modo 'Toggle' (conmutaciÃ³n).",
                    "La salida cambia de estado en cada flanco de bajada.",
                    "Se necesita un ciclo completo de reloj para cambiar de 0 a 1, y otro para 1 a 0? No, cambia en cada flanco.",
                    "El periodo de salida es el doble del de entrada. Frecuencia mitad."
                ],
                res: "f = 500 Hz"
            },
            {
                id: "DIG-07", type: "digital", title: "Reset SÃ­ncrono",
                text: "Diferencia entre Reset SÃ­ncrono y AsÃ­ncrono en el diseÃ±o del contador del dado.",
                steps: [
                    "AsÃ­ncrono: El reset ocurre inmediatamente al activarse la seÃ±al (Clear).",
                    "SÃ­ncrono: El reset espera al siguiente flanco de reloj activo.",
                    "Para evitar 'glitches' (estados transitorios espurios como el 6 momentÃ¡neo), se prefiere diseÃ±o sÃ­ncrono."
                ],
                res: "SÃ­ncrono es mÃ¡s seguro"
            },
            {
                id: "DIG-08", type: "digital", title: "MÃ¡quina de Estados",
                text: "Dibuja el diagrama de estados para el dado. Transiciones por pulsador.",
                steps: [
                    "Estados: S0, S1, S2, S3, S4, S5.",
                    "TransiciÃ³n: Si Pulsador=1, S(i) -> S(i+1). Si Pulsador=0, S(i) -> S(i).",
                    "De S5 pasa a S0 si Pulsador=1.",
                    "Es una mÃ¡quina de Moore (salida depende solo del estado)."
                ],
                res: "Ciclo 0->1->2->3->4->5->0"
            }
        ];

        // RENDERIZADO
        const grid = document.getElementById('exercise-grid');

        function render(filterType) {
            grid.innerHTML = '';
            const filtered = filterType === 'all' ? db : db.filter(e => e.type === filterType);
            
            filtered.forEach(ex => {
                const badgeClass = ex.type === 'analog' ? 'bg-analog' : 'bg-digital';
                const badgeText = ex.type === 'analog' ? 'âš¡ AnalÃ³gica' : 'ðŸ§© Digital';
                
                const card = document.createElement('article');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-header">
                        <span class="badge ${badgeClass}">${badgeText}</span>
                        <span class="card-id">${ex.id}</span>
                    </div>
                    <h3 style="margin-bottom: 10px; font-size: 1.1rem;">${ex.title}</h3>
                    <div class="problem-text">${ex.text}</div>
                    <details>
                        <summary>Ver SoluciÃ³n Paso a Paso</summary>
                        <div class="solution-box">
                            ${ex.steps.map((step, i) => `
                                <div class="step">
                                    <div class="step-num">${i+1}</div>
                                    <div class="step-content">${step}</div>
                                </div>
                            `).join('')}
                            <div class="final-res">${ex.res}</div>
                        </div>
                    </details>
                `;
                grid.appendChild(card);
            });
            
            // Renderizar MatemÃ¡ticas
            if(window.MathJax) MathJax.typesetPromise();
        }

        // FILTROS
        function filter(type) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            render(type);
        }

        // INICIO
        render('all');

    </script>
</body>
</html>
