<!DOCTYPE html>
<html lang="es" data-scheme="dark">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Innove | La Biblia de las Funciones</title>
    <link rel="icon" type="image/png" href="innoveAI.png" />

    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Outfit:wght@400;600;800&family=JetBrains+Mono:wght@400;700&family=Montserrat:wght@700;800;900&display=swap"
        rel="stylesheet">

    <!-- LIBRARIES -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$']],
                processEscapes: true,
                tags: 'ams'
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        /* ============ VARIABLES & THEME ============ */
        :root {
            --radius: 24px;
            --nav-height: 80px;
            --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            --font-main: 'Inter', sans-serif;
            --font-display: 'Outfit', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        [data-scheme="dark"] {
            --bg-body: #050505;
            --bg-pattern:
                radial-gradient(circle at 15% 50%, rgba(45, 212, 191, 0.08) 0%, transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(168, 85, 247, 0.08) 0%, transparent 25%);
            --text-main: #ffffff;
            --text-muted: #a3a3a3;
            --card-bg: rgba(20, 20, 20, 0.6);
            --card-border: 1px solid rgba(255, 255, 255, 0.08);
            --nav-bg: rgba(5, 5, 5, 0.8);
            --shadow: 0 20px 50px -10px rgba(0, 0, 0, 0.5);
            --accent: #2dd4bf;
            --plot-bg: #000000;
            --plot-grid: #333333;
            --glass: blur(20px) saturate(180%);
        }

        [data-scheme="light"] {
            --bg-body: #ffffff;
            --bg-pattern:
                radial-gradient(circle at 15% 50%, rgba(45, 212, 191, 0.05) 0%, transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(168, 85, 247, 0.05) 0%, transparent 25%);
            --text-main: #0f172a;
            --text-muted: #64748b;
            --card-bg: rgba(255, 255, 255, 0.8);
            --card-border: 1px solid rgba(0, 0, 0, 0.06);
            --nav-bg: rgba(255, 255, 255, 0.85);
            --shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.08);
            --plot-bg: #ffffff;
            --plot-grid: #e2e8f0;
            --glass: blur(20px) saturate(180%);
        }

        /* ============ ANIMATIONS ============ */
        @keyframes float {

            0%,
            100% {
                transform: translate(0, 0);
            }

            50% {
                transform: translate(20px, 40px);
            }
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(45, 212, 191, 0.4);
            }

            70% {
                box-shadow: 0 0 0 15px rgba(45, 212, 191, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(45, 212, 191, 0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* ============ RESET & BASE ============ */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-body);
            background-image: var(--bg-pattern);
            background-attachment: fixed;
            color: var(--text-main);
            padding-top: var(--nav-height);
            min-height: 100vh;
            transition: background-color 0.4s ease, color 0.4s ease;
            overflow-x: hidden;
        }

        /* ============ ORBS ============ */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(100px);
            z-index: -1;
            opacity: 0.15;
            animation: float 20s infinite ease-in-out;
            pointer-events: none;
        }

        .orb-1 {
            top: -10%;
            left: -10%;
            width: 60vw;
            height: 60vw;
            background: var(--accent);
        }

        .orb-2 {
            bottom: -10%;
            right: -10%;
            width: 50vw;
            height: 50vw;
            background: #a855f7;
            animation-delay: -5s;
        }

        /* ============ NAVBAR ============ */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--nav-height);
            background: var(--nav-bg);
            backdrop-filter: var(--glass);
            border-bottom: var(--card-border);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 5%;
            transition: var(--transition);
        }

        .logo {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--text-main);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: -1px;
        }

        .logo span {
            background: linear-gradient(135deg, var(--text-main), var(--text-muted));
            -webkit-background-clip: text;
            color: transparent;
        }

        .nav-center {
            display: flex;
            gap: 8px;
            background: var(--card-bg);
            padding: 6px;
            border-radius: 50px;
            border: var(--card-border);
            backdrop-filter: blur(10px);
        }

        .tab-btn {
            background: transparent;
            border: none;
            padding: 10px 28px;
            border-radius: 40px;
            color: var(--text-muted);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: var(--font-display);
            position: relative;
            overflow: hidden;
        }

        .tab-btn:hover {
            color: var(--text-main);
            background: rgba(255, 255, 255, 0.05);
        }

        .tab-btn.active {
            background: var(--text-main);
            color: var(--bg-body);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            transform: scale(1.05);
        }

        .theme-toggle {
            background: transparent;
            border: var(--card-border);
            width: 44px;
            height: 44px;
            border-radius: 50%;
            color: var(--text-main);
            cursor: pointer;
            display: grid;
            place-items: center;
            font-size: 1.4rem;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(15deg);
            border-color: var(--accent);
        }

        /* ============ LAYOUT ============ */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .content-section {
            display: none;
            animation: fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .content-section.active {
            display: block;
        }

        /* ============ PLOT CARD ============ */
        .plot-card {
            background: var(--card-bg);
            border: var(--card-border);
            border-radius: var(--radius);
            margin-bottom: 60px;
            box-shadow: var(--shadow);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease, border-color 0.3s ease;
        }

        .plot-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
        }

        .plot-header {
            padding: 30px 40px;
            border-bottom: 1px solid var(--card-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.03), transparent);
        }

        .plot-title h3 {
            font-family: var(--font-display);
            font-size: 2rem;
            color: var(--text-main);
            margin-bottom: 5px;
            font-weight: 800;
        }

        .plot-title p {
            font-family: var(--font-mono);
            color: var(--accent);
            font-size: 1rem;
            letter-spacing: 1px;
        }

        .plot-body {
            display: grid;
            grid-template-columns: 350px 1fr 350px;
            min-height: 600px;
        }

        /* ============ CONTROLS ============ */
        .controls {
            padding: 40px;
            border-right: 1px solid var(--card-border);
            background: rgba(0, 0, 0, 0.02);
            overflow-y: auto;
        }

        .control-group {
            margin-bottom: 30px;
            animation: slideIn 0.5s ease backwards;
        }

        .control-group:nth-child(1) {
            animation-delay: 0.1s;
        }

        .control-group:nth-child(2) {
            animation-delay: 0.2s;
        }

        .control-group:nth-child(3) {
            animation-delay: 0.3s;
        }

        .control-group label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-weight: 700;
            color: var(--text-muted);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        input[type="range"] {
            width: 100%;
            height: 6px;
            background: var(--card-border);
            border-radius: 3px;
            appearance: none;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 0 10px var(--accent);
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.3);
        }

        select {
            width: 100%;
            padding: 14px;
            background: var(--bg-body);
            border: var(--card-border);
            color: var(--text-main);
            border-radius: 12px;
            font-family: var(--font-main);
            cursor: pointer;
            outline: none;
            font-weight: 600;
            transition: border-color 0.3s;
        }

        select:hover {
            border-color: var(--accent);
        }

        /* ============ THEORY PANEL ============ */
        .theory-panel {
            padding: 40px;
            border-left: 1px solid var(--card-border);
            background: rgba(255, 255, 255, 0.01);
            overflow-y: auto;
            font-size: 0.95rem;
            line-height: 1.7;
            color: var(--text-muted);
        }

        .theory-panel h4 {
            color: var(--text-main);
            font-family: var(--font-display);
            font-size: 1.2rem;
            margin: 25px 0 10px;
            border-bottom: 2px solid var(--accent);
            display: inline-block;
            padding-bottom: 5px;
        }

        .theory-panel h4:first-child {
            margin-top: 0;
        }

        .math-block {
            background: var(--bg-body);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid var(--card-border);
            font-family: var(--font-mono);
            text-align: center;
        }

        .plot-area {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 600px;
        }

        /* ============ RESPONSIVE ============ */
        @media (max-width: 1200px) {
            .plot-body {
                grid-template-columns: 300px 1fr;
            }

            .theory-panel {
                display: none;
            }

            /* Hide theory on medium screens */
        }

        @media (max-width: 900px) {
            .plot-body {
                grid-template-columns: 1fr;
            }

            .controls {
                border-right: none;
                border-bottom: 1px solid var(--card-border);
            }

            .navbar {
                padding: 0 20px;
            }

            .nav-center {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                width: 90%;
                justify-content: center;
                z-index: 1001;
                background: rgba(10, 10, 10, 0.95);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            }
        }
    </style>
</head>

<body>

    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <nav class="navbar">
        <a href="#" class="logo">
            <span>Innove Pro</span>
        </a>
        <div class="nav-center">
            <button class="tab-btn active" onclick="switchTab('eso', '#2dd4bf')">ESO</button>
            <button class="tab-btn" onclick="switchTab('bach', '#3b82f6')">Bachillerato</button>
            <button class="tab-btn" onclick="switchTab('uni', '#f43f5e')">Universidad</button>
        </div>
        <button class="theme-toggle" id="themeBtn">‚òÄ</button>
    </nav>

    <main class="container">

        <!-- ================= ESO ================= -->
        <div id="eso" class="content-section active">
            <!-- LINEAR -->
            <div class="plot-card">
                <div class="plot-header">
                    <div class="plot-title">
                        <h3>Funci√≥n Lineal</h3>
                        <p>$f(x) = mx + n$</p>
                    </div>
                </div>
                <div class="plot-body">
                    <div class="controls">
                        <div class="control-group">
                            <label>Pendiente ($m$) <span id="val-m">1.0</span></label>
                            <input type="range" id="input-m" min="-5" max="5" step="0.1" value="1">
                        </div>
                        <div class="control-group">
                            <label>Ordenada ($n$) <span id="val-n">0.0</span></label>
                            <input type="range" id="input-n" min="-5" max="5" step="0.1" value="0">
                        </div>
                    </div>
                    <div id="plot-lineal" class="plot-area"></div>
                    <div class="theory-panel">
                        <h4>Definici√≥n</h4>
                        <p>Una funci√≥n lineal representa una l√≠nea recta en el plano cartesiano. Es la funci√≥n
                            polin√≥mica m√°s simple de grado 1.</p>

                        <h4>Propiedades</h4>
                        <ul style="padding-left: 20px; margin-bottom: 15px;">
                            <li><strong>Dominio:</strong> $\mathbb{R}$ (Todos los reales)</li>
                            <li><strong>Recorrido:</strong> $\mathbb{R}$ (Si $m \neq 0$)</li>
                            <li><strong>Monoton√≠a:</strong> Creciente si $m > 0$, Decreciente si $m < 0$.</li>
                        </ul>

                        <h4>Par√°metros</h4>
                        <div class="math-block">
                            $m = \frac{\Delta y}{\Delta x} = \tan(\alpha)$
                        </div>
                        <p><strong>$m$ (Pendiente):</strong> Indica la inclinaci√≥n de la recta.</p>
                        <p><strong>$n$ (Ordenada):</strong> Punto de corte con el eje Y $(0, n)$.</p>
                    </div>
                </div>
            </div>

            <!-- QUADRATIC -->
            <div class="plot-card">
                <div class="plot-header">
                    <div class="plot-title">
                        <h3>Funci√≥n Cuadr√°tica</h3>
                        <p>$f(x) = ax^2 + bx + c$</p>
                    </div>
                </div>
                <div class="plot-body">
                    <div class="controls">
                        <div class="control-group">
                            <label>Coeficiente $a$ <span id="val-a">1.0</span></label>
                            <input type="range" id="input-a" min="-3" max="3" step="0.1" value="1">
                        </div>
                        <div class="control-group">
                            <label>Coeficiente $b$ <span id="val-b">0.0</span></label>
                            <input type="range" id="input-b" min="-5" max="5" step="0.1" value="0">
                        </div>
                        <div class="control-group">
                            <label>Coeficiente $c$ <span id="val-c">0.0</span></label>
                            <input type="range" id="input-c" min="-5" max="5" step="0.1" value="0">
                        </div>
                    </div>
                    <div id="plot-quad" class="plot-area"></div>
                    <div class="theory-panel">
                        <h4>Definici√≥n</h4>
                        <p>Una funci√≥n cuadr√°tica forma una par√°bola. Es fundamental en f√≠sica para describir el
                            movimiento uniformemente acelerado.</p>

                        <h4>V√©rtice</h4>
                        <div class="math-block">
                            $x_v = \frac{-b}{2a}, \quad y_v = f(x_v)$
                        </div>
                        <p>El v√©rtice es el punto m√°ximo (si $a<0$) o m√≠nimo (si $a>0$) de la par√°bola.</p>

                        <h4>Discriminante</h4>
                        <div class="math-block">$\Delta = b^2 - 4ac$</div>
                        <p>Determina el n√∫mero de ra√≠ces reales:</p>
                        <ul>
                            <li>$\Delta > 0$: 2 cortes con eje X.</li>
                            <li>$\Delta = 0$: 1 corte (tangente).</li>
                            <li>$\Delta < 0$: No corta el eje X.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- ================= BACHILLERATO ================= -->
        <div id="bach" class="content-section">

            <!-- EXP & LOG -->
            <div class="plot-card">
                <div class="plot-header">
                    <div class="plot-title">
                        <h3>Exponencial y Logar√≠tmica</h3>
                        <p>$y = a^x \iff x = \log_a(y)$</p>
                    </div>
                </div>
                <div class="plot-body">
                    <div class="controls">
                        <div class="control-group">
                            <label>Base ($a$) <span id="val-base">2.0</span></label>
                            <input type="range" id="input-base" min="0.1" max="5" step="0.1" value="2">
                        </div>
                        <p class="text-muted">Observa la simetr√≠a respecto a la recta $y=x$. Son funciones inversas.</p>
                    </div>
                    <div id="plot-explog" class="plot-area"></div>
                    <div class="theory-panel">
                        <h4>Funci√≥n Exponencial</h4>
                        <p>Crecimiento o decrecimiento r√°pido. Fundamental en biolog√≠a (poblaciones) y econom√≠a (inter√©s
                            compuesto).</p>
                        <div class="math-block">$\lim_{x \to \infty} a^x = \infty \quad (a>1)$</div>

                        <h4>Funci√≥n Logar√≠tmica</h4>
                        <p>Es la inversa de la exponencial. Transforma multiplicaciones en sumas.</p>
                        <div class="math-block">$\log_a(x \cdot y) = \log_a x + \log_a y$</div>

                        <h4>El N√∫mero $e$</h4>
                        <p>Base natural del c√°lculo. $e \approx 2.718$. La funci√≥n $e^x$ es su propia derivada.</p>
                    </div>
                </div>
            </div>

            <!-- TRIGONOMETRY -->
            <div class="plot-card">
                <div class="plot-header">
                    <div class="plot-title">
                        <h3>Trigonometr√≠a Avanzada</h3>
                        <p>$y = A \cdot \text{func}(\omega x + \phi)$</p>
                    </div>
                </div>
                <div class="plot-body">
                    <div class="controls">
                        <div class="control-group">
                            <label>Funci√≥n</label>
                            <select id="select-trig">
                                <option value="sin">Seno (sin)</option>
                                <option value="cos">Coseno (cos)</option>
                                <option value="tan">Tangente (tan)</option>
                                <option value="sec">Secante (sec)</option>
                                <option value="csc">Cosecante (csc)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>Amplitud ($A$) <span id="val-amp">1.0</span></label>
                            <input type="range" id="input-amp" min="0.1" max="3" step="0.1" value="1">
                        </div>
                        <div class="control-group">
                            <label>Frecuencia ($\omega$) <span id="val-freq">1.0</span></label>
                            <input type="range" id="input-freq" min="0.1" max="5" step="0.1" value="1">
                        </div>
                        <div class="control-group">
                            <label>Fase ($\phi$) <span id="val-phase">0.0</span></label>
                            <input type="range" id="input-phase" min="0" max="6.28" step="0.1" value="0">
                        </div>
                    </div>
                    <div id="plot-trig" class="plot-area"></div>
                    <div class="theory-panel">
                        <h4>Ondas Peri√≥dicas</h4>
                        <p>Modelan fen√≥menos c√≠clicos como el sonido, la luz y las mareas.</p>

                        <h4>Par√°metros de Onda</h4>
                        <ul>
                            <li><strong>Amplitud ($A$):</strong> Altura m√°xima de la onda.</li>
                            <li><strong>Periodo ($T$):</strong> Tiempo en completar un ciclo. $T = 2\pi / \omega$.</li>
                            <li><strong>Frecuencia ($f$):</strong> Ciclos por segundo. $f = 1/T$.</li>
                            <li><strong>Fase ($\phi$):</strong> Desplazamiento horizontal.</li>
                        </ul>

                        <h4>Identidad Fundamental</h4>
                        <div class="math-block">$\sin^2 x + \cos^2 x = 1$</div>
                    </div>
                </div>
            </div>

            <!-- DERIVATIVE -->
            <div class="plot-card">
                <div class="plot-header">
                    <div class="plot-title">
                        <h3>La Derivada (Recta Tangente)</h3>
                        <p>$f'(x) = \lim_{h \to 0} \frac{f(x+h)-f(x)}{h}$</p>
                    </div>
                </div>
                <div class="plot-body">
                    <div class="controls">
                        <div class="control-group">
                            <label>Punto $x_0$ <span id="val-x0">0.0</span></label>
                            <input type="range" id="input-x0" min="-2.5" max="2.5" step="0.05" value="0">
                        </div>
                        <div
                            style="background: var(--card-bg); padding: 20px; border-radius: 12px; border: 1px solid var(--card-border);">
                            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                                <span>Valor $f(x_0)$:</span>
                                <span id="disp-fx" style="color:var(--accent); font-weight:bold;">1.00</span>
                            </div>
                            <div style="display:flex; justify-content:space-between;">
                                <span>Pendiente $f'(x_0)$:</span>
                                <span id="disp-dfx" style="color:#f43f5e; font-weight:bold;">-3.00</span>
                            </div>
                        </div>
                    </div>
                    <div id="plot-deriv" class="plot-area"></div>
                    <div class="theory-panel">
                        <h4>Interpretaci√≥n Geom√©trica</h4>
                        <p>La derivada $f'(x_0)$ es la <strong>pendiente</strong> de la recta tangente a la curva en el
                            punto $(x_0, f(x_0))$.</p>

                        <h4>Interpretaci√≥n F√≠sica</h4>
                        <p>Representa la <strong>velocidad instant√°nea</strong> de cambio. Si $f(t)$ es posici√≥n,
                            $f'(t)$ es velocidad.</p>

                        <h4>Puntos Cr√≠ticos</h4>
                        <p>Donde $f'(x) = 0$, la tangente es horizontal. Estos puntos son candidatos a m√°ximos o m√≠nimos
                            locales.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ================= UNIVERSITY ================= -->
        <div id="uni" class="content-section">

            <!-- 3D SURFACES -->
            <div class="plot-card">
                <div class="plot-header">
                    <div class="plot-title">
                        <h3>Geometr√≠a Diferencial</h3>
                        <p>Superficies Param√©tricas y Topolog√≠a</p>
                    </div>
                </div>
                <div class="plot-body">
                    <div class="controls">
                        <div class="control-group">
                            <label>Superficie</label>
                            <select id="select-surface">
                                <option value="torus">Toro (Donut)</option>
                                <option value="helicoid">Helicoide (Minimal)</option>
                                <option value="mobius">Cinta de M√∂bius</option>
                                <option value="klein">Botella de Klein</option>
                                <option value="riemann">Superficie de Riemann</option>
                            </select>
                        </div>
                        <p class="text-muted">Explora superficies complejas. Algunas no son orientables (M√∂bius, Klein).
                        </p>
                    </div>
                    <div id="plot-3d" class="plot-area" style="height: 600px;"></div>
                    <div class="theory-panel">
                        <h4>Parametrizaci√≥n</h4>
                        <p>Una superficie en $\mathbb{R}^3$ se define por una funci√≥n vectorial $\vec{r}(u,v) = (x(u,v),
                            y(u,v), z(u,v))$.</p>

                        <h4>Curvatura</h4>
                        <p><strong>Curvatura Gaussiana ($K$):</strong> Producto de las curvaturas principales.
                            <br>Si $K > 0$: Esfera.
                            <br>Si $K < 0$: Silla de montar (Hiperb√≥lica). <br>Si $K = 0$: Plano o Cilindro.
                        </p>

                        <h4>Superficies Minimales</h4>
                        <p>Como el Helicoide, tienen curvatura media $H=0$ en todo punto. Minimizan el √°rea para un
                            contorno dado (como pompas de jab√≥n).</p>
                    </div>
                </div>
            </div>

            <!-- VECTOR FIELD -->
            <div class="plot-card">
                <div class="plot-header">
                    <div class="plot-title">
                        <h3>C√°lculo Vectorial</h3>
                        <p>Campos, Divergencia y Rotacional</p>
                    </div>
                </div>
                <div class="plot-body">
                    <div class="controls">
                        <div class="control-group">
                            <label>Campo Vectorial</label>
                            <select id="select-vector">
                                <option value="vortex">V√≥rtice (Rotacional puro)</option>
                                <option value="source">Fuente (Divergencia pura)</option>
                                <option value="saddle">Punto de Silla</option>
                                <option value="dipole">Dipolo Magn√©tico</option>
                            </select>
                        </div>
                    </div>
                    <div id="plot-vector" class="plot-area"></div>
                    <div class="theory-panel">
                        <h4>Definici√≥n</h4>
                        <p>Un campo vectorial asigna un vector a cada punto del espacio. Ejemplos: Velocidad del viento,
                            Campo El√©ctrico.</p>

                        <h4>Operadores Diferenciales</h4>
                        <div class="math-block">$\nabla \cdot \vec{F} = \text{div } \vec{F}$</div>
                        <p><strong>Divergencia:</strong> Mide cu√°nto "nace" o "muere" el campo en un punto (Fuentes y
                            Sumideros).</p>

                        <div class="math-block">$\nabla \times \vec{F} = \text{rot } \vec{F}$</div>
                        <p><strong>Rotacional:</strong> Mide la tendencia del campo a rotar alrededor de un punto
                            (V√≥rtices).</p>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <script>
        // ============ STATE & CONFIG ============
        let currentTheme = 'dark';

        function getLayout() {
            const isDark = currentTheme === 'dark';
            const bg = isDark ? '#000000' : '#ffffff';
            const grid = isDark ? '#333333' : '#e2e8f0';
            const text = isDark ? '#a3a3a3' : '#64748b';

            return {
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: { color: text, family: 'Inter, sans-serif' },
                margin: { t: 30, r: 20, b: 40, l: 50 },
                xaxis: { gridcolor: grid, zerolinecolor: grid },
                yaxis: { gridcolor: grid, zerolinecolor: grid },
                hovermode: 'closest',
                showlegend: true,
                legend: { x: 0, y: 1, bgcolor: 'rgba(0,0,0,0)' }
            };
        }

        function get3DLayout() {
            const base = getLayout();
            const isDark = currentTheme === 'dark';
            const grid = isDark ? '#333333' : '#e2e8f0';
            const axis = { gridcolor: grid, backgroundcolor: 'rgba(0,0,0,0)', showbackground: false };

            return {
                ...base,
                scene: {
                    xaxis: axis, yaxis: axis, zaxis: axis,
                    camera: { eye: { x: 1.5, y: 1.5, z: 1.5 } }
                },
                margin: { t: 0, b: 0, l: 0, r: 0 }
            };
        }

        // ============ THEME & TABS ============
        const themeBtn = document.getElementById('themeBtn');
        themeBtn.addEventListener('click', () => {
            currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-scheme', currentTheme);
            themeBtn.textContent = currentTheme === 'dark' ? '‚òÄ' : 'üåô';
            updateAllPlots();
        });

        function switchTab(tabId, accentColor) {
            document.querySelectorAll('.content-section').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');

            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            const btn = Array.from(document.querySelectorAll('.tab-btn')).find(b => b.getAttribute('onclick').includes(tabId));
            if (btn) btn.classList.add('active');

            document.documentElement.style.setProperty('--accent', accentColor);
            window.dispatchEvent(new Event('resize'));
        }

        // ============ PLOTTING FUNCTIONS ============

        // 1. LINEAR
        function updateLineal() {
            const m = parseFloat(document.getElementById('input-m').value);
            const n = parseFloat(document.getElementById('input-n').value);
            document.getElementById('val-m').textContent = m.toFixed(1);
            document.getElementById('val-n').textContent = n.toFixed(1);

            const x = [-10, 10];
            const y = x.map(val => m * val + n);

            Plotly.react('plot-lineal', [
                { x: x, y: y, type: 'scatter', mode: 'lines', line: { color: '#2dd4bf', width: 4 }, name: 'f(x)' }
            ], {
                ...getLayout(),
                xaxis: { range: [-10, 10], title: 'x' },
                yaxis: { range: [-10, 10], title: 'y' }
            }, { displayModeBar: false, responsive: true });
        }

        // 2. QUADRATIC
        function updateQuad() {
            const a = parseFloat(document.getElementById('input-a').value);
            const b = parseFloat(document.getElementById('input-b').value);
            const c = parseFloat(document.getElementById('input-c').value);
            document.getElementById('val-a').textContent = a.toFixed(1);
            document.getElementById('val-b').textContent = b.toFixed(1);
            document.getElementById('val-c').textContent = c.toFixed(1);

            const x = []; const y = [];
            for (let i = -10; i <= 10; i += 0.2) { x.push(i); y.push(a * i * i + b * i + c); }

            Plotly.react('plot-quad', [
                { x: x, y: y, type: 'scatter', mode: 'lines', line: { color: '#2dd4bf', width: 4 }, name: 'Par√°bola' }
            ], {
                ...getLayout(),
                xaxis: { range: [-10, 10] },
                yaxis: { range: [-20, 20] }
            }, { displayModeBar: false, responsive: true });
        }

        // 3. EXP & LOG
        function updateExpLog() {
            const a = parseFloat(document.getElementById('input-base').value);
            document.getElementById('val-base').textContent = a.toFixed(1);

            const xExp = []; const yExp = [];
            const xLog = []; const yLog = [];
            const xId = [-5, 5]; const yId = [-5, 5]; // y=x line

            for (let i = -5; i <= 5; i += 0.1) {
                xExp.push(i); yExp.push(Math.pow(a, i));
            }

            // Log only defined for x > 0
            for (let i = 0.01; i <= 10; i += 0.1) {
                xLog.push(i); yLog.push(Math.log(i) / Math.log(a));
            }

            Plotly.react('plot-explog', [
                { x: xExp, y: yExp, type: 'scatter', mode: 'lines', line: { color: '#3b82f6', width: 3 }, name: `y = ${a}^x` },
                { x: xLog, y: yLog, type: 'scatter', mode: 'lines', line: { color: '#f43f5e', width: 3 }, name: `y = log_${a}(x)` },
                { x: xId, y: yId, type: 'scatter', mode: 'lines', line: { color: '#888', width: 1, dash: 'dash' }, name: 'y = x' }
            ], {
                ...getLayout(),
                xaxis: { range: [-5, 5] },
                yaxis: { range: [-5, 5] }
            }, { displayModeBar: false, responsive: true });
        }

        // 4. TRIGONOMETRY
        function updateTrig() {
            const func = document.getElementById('select-trig').value;
            const A = parseFloat(document.getElementById('input-amp').value);
            const w = parseFloat(document.getElementById('input-freq').value);
            const phi = parseFloat(document.getElementById('input-phase').value);

            document.getElementById('val-amp').textContent = A.toFixed(1);
            document.getElementById('val-freq').textContent = w.toFixed(1);
            document.getElementById('val-phase').textContent = phi.toFixed(2);

            const x = []; const y = [];
            for (let i = 0; i <= 20; i += 0.05) {
                let val = 0;
                const arg = w * i + phi;
                if (func === 'sin') val = Math.sin(arg);
                else if (func === 'cos') val = Math.cos(arg);
                else if (func === 'tan') val = Math.tan(arg);
                else if (func === 'sec') val = 1 / Math.cos(arg);
                else if (func === 'csc') val = 1 / Math.sin(arg);

                // Clamp large values for Tan/Sec/Csc to avoid messy vertical lines
                if (Math.abs(val) > 10) val = null;

                x.push(i); y.push(A * val);
            }

            Plotly.react('plot-trig', [
                { x: x, y: y, type: 'scatter', mode: 'lines', line: { color: '#3b82f6', width: 3 }, name: func }
            ], {
                ...getLayout(),
                yaxis: { range: [-4, 4] }
            }, { displayModeBar: false, responsive: true });
        }

        // 5. DERIVATIVE
        function updateDeriv() {
            const x0 = parseFloat(document.getElementById('input-x0').value);
            document.getElementById('val-x0').textContent = x0.toFixed(2);

            // Function: f(x) = x^3 - 3x + 1
            // Derivative: f'(x) = 3x^2 - 3
            const f = (x) => x * x * x - 3 * x + 1;
            const df = (x) => 3 * x * x - 3;

            const y0 = f(x0);
            const m = df(x0);

            document.getElementById('disp-fx').textContent = y0.toFixed(2);
            document.getElementById('disp-dfx').textContent = m.toFixed(2);

            // Curve
            const x = []; const y = [];
            for (let i = -3; i <= 3; i += 0.1) { x.push(i); y.push(f(i)); }

            // Tangent Line: y - y0 = m(x - x0) => y = m(x - x0) + y0
            const xTan = [x0 - 1, x0 + 1];
            const yTan = xTan.map(val => m * (val - x0) + y0);

            Plotly.react('plot-deriv', [
                { x: x, y: y, type: 'scatter', mode: 'lines', line: { color: '#3b82f6', width: 3 }, name: 'f(x)' },
                { x: xTan, y: yTan, type: 'scatter', mode: 'lines', line: { color: '#f43f5e', width: 2 }, name: 'Tangente' },
                { x: [x0], y: [y0], type: 'scatter', mode: 'markers', marker: { color: '#f43f5e', size: 10 }, name: 'P' }
            ], {
                ...getLayout(),
                xaxis: { range: [-3, 3] },
                yaxis: { range: [-4, 4] }
            }, { displayModeBar: false, responsive: true });
        }

        // 6. 3D SURFACES
        function update3D() {
            const type = document.getElementById('select-surface').value;
            const x = []; const y = []; const z = [];

            // Parametric generation
            if (type === 'torus') {
                const R = 10, r = 3;
                for (let u = 0; u < 6.28; u += 0.2) {
                    for (let v = 0; v < 6.28; v += 0.2) {
                        x.push((R + r * Math.cos(v)) * Math.cos(u));
                        y.push((R + r * Math.cos(v)) * Math.sin(u));
                        z.push(r * Math.sin(v));
                    }
                }
            } else if (type === 'helicoid') {
                for (let u = -10; u < 10; u += 1) {
                    for (let v = -10; v < 10; v += 0.5) {
                        x.push(u * Math.cos(v));
                        y.push(u * Math.sin(v));
                        z.push(v * 2);
                    }
                }
            } else if (type === 'mobius') {
                for (let u = 0; u < 6.28; u += 0.1) {
                    for (let v = -1; v < 1; v += 0.2) {
                        x.push((1 + v / 2 * Math.cos(u / 2)) * Math.cos(u));
                        y.push((1 + v / 2 * Math.cos(u / 2)) * Math.sin(u));
                        z.push(v / 2 * Math.sin(u / 2));
                    }
                }
            } else if (type === 'riemann') {
                // Visualize sqrt(z) Riemann surface
                for (let r = 0; r < 2; r += 0.1) {
                    for (let theta = 0; theta < 4 * Math.PI; theta += 0.1) {
                        x.push(r * Math.cos(theta));
                        y.push(r * Math.sin(theta));
                        z.push(Math.sqrt(r) * Math.sin(theta / 2));
                    }
                }
            } else {
                // Klein Bottle (Figure 8 immersion)
                for (let u = 0; u < 6.28; u += 0.2) {
                    for (let v = 0; v < 6.28; v += 0.2) {
                        const r = 4 - 2 * Math.cos(u);
                        x.push((r + Math.cos(v)) * Math.cos(u));
                        y.push((r + Math.cos(v)) * Math.sin(u));
                        z.push(Math.sin(v)); // Simplified
                    }
                }
            }

            Plotly.react('plot-3d', [{
                type: 'mesh3d',
                x: x, y: y, z: z,
                intensity: z,
                colorscale: 'Viridis',
                opacity: 0.9,
                contour: { show: true }
            }], get3DLayout(), { displayModeBar: true, responsive: true });
        }

        // 7. VECTOR FIELDS
        function updateVector() {
            const type = document.getElementById('select-vector').value;
            const x = []; const y = []; const u = []; const v = [];

            for (let i = -5; i <= 5; i += 1) {
                for (let j = -5; j <= 5; j += 1) {
                    x.push(i); y.push(j);

                    if (type === 'vortex') { u.push(-j); v.push(i); }
                    else if (type === 'source') { u.push(i); v.push(j); }
                    else if (type === 'saddle') { u.push(j); v.push(i); }
                    else { u.push(1); v.push(Math.sin(i)); } // Dipole-ish
                }
            }

            Plotly.react('plot-vector', [{
                type: 'cone',
                x: x, y: y, z: x.map(val => 0), // Flat 2D in 3D view
                u: u, v: v, w: x.map(val => 0),
                sizemode: 'absolute',
                sizeref: 0.5,
                colorscale: 'Bluered'
            }], get3DLayout(), { displayModeBar: false, responsive: true });
        }

        function updateAllPlots() {
            updateLineal(); updateQuad();
            updateExpLog(); updateTrig(); updateDeriv();
            update3D(); updateVector();
        }

        // ============ LISTENERS ============
        document.addEventListener('DOMContentLoaded', () => {
            // ESO
            ['input-m', 'input-n'].forEach(id => document.getElementById(id).addEventListener('input', updateLineal));
            ['input-a', 'input-b', 'input-c'].forEach(id => document.getElementById(id).addEventListener('input', updateQuad));

            // BACH
            ['input-base'].forEach(id => document.getElementById(id).addEventListener('input', updateExpLog));
            ['input-amp', 'input-freq', 'input-phase', 'select-trig'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.addEventListener(el.tagName === 'SELECT' ? 'change' : 'input', updateTrig);
            });
            ['input-x0'].forEach(id => document.getElementById(id).addEventListener('input', updateDeriv));

            // UNI
            document.getElementById('select-surface').addEventListener('change', update3D);
            document.getElementById('select-vector').addEventListener('change', updateVector);

            // Initial Render
            updateAllPlots();
        });

    </script>
</body>

</html>
