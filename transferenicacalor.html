<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Transferencia de Calor ‚Äî Teor√≠a ampliada + 144 ejercicios</title>
<meta name="color-scheme" content="light dark" />
<!-- MathJax for LaTeX rendering -->
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<style>
  :root{
    --bg:#f7f9fc; --paper:#ffffff; --ink:#0f172a; --muted:#475569;
    --brand:#b91c1c; --accent:#f87171; --accent2:#fb923c;
    --border:#e2e8f0; --shadow:0 8px 28px rgba(15,23,42,.08);
    --radius:16px; --maxw:80ch; --base:18px; --lh:1.85;
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg:#0b1220; --paper:#0e1628; --ink:#e6ecff; --muted:#aab7d9;
      --brand:#fb7185; --accent:#fca5a5; --accent2:#fdba74; --border:#203054;
      --shadow:0 10px 26px rgba(0,0,0,.35);
    }
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    font-size:var(--base); line-height:var(--lh); color:var(--ink);
    background:radial-gradient(1100px 700px at 80% -10%, #fee2e2 0%, transparent 60%),
               radial-gradient(900px 600px at 10% 110%, #ffedd5 0%, transparent 65%), var(--bg);
  }
  .progress{position:fixed; inset:0 0 auto 0; height:4px; width:0; z-index:70;
    background:linear-gradient(90deg,var(--accent),var(--accent2))}
  .topbar{position:sticky; top:0; z-index:60; backdrop-filter:blur(10px) saturate(140%);
    background:color-mix(in oklab, var(--paper) 86%, transparent); border-bottom:1px solid var(--border); box-shadow:var(--shadow)}
  .wrap{max-width:1200px; margin:0 auto; padding:10px 16px}
  .brand{display:flex; align-items:center; gap:12px; text-decoration:none; color:inherit; font-weight:900}
  .badge{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;
    background:linear-gradient(135deg,color-mix(in oklab,var(--brand) 70%,white 10%),color-mix(in oklab,var(--accent) 65%,white 20%));
    color:#fff; box-shadow:0 6px 16px color-mix(in oklab,var(--brand) 30%, transparent); font-size:22px}
  .brand-title{font-size:clamp(20px,3.6vw,28px);margin:0}
  .reader{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
  .btn{border:1px solid var(--border);background:var(--paper);color:var(--ink);padding:8px 12px;border-radius:12px;font-weight:800;cursor:pointer}
  .btn.small{padding:6px 10px;font-weight:700}
  main{max-width:1200px;margin:0 auto;padding:16px}
  .paper{max-width:var(--maxw);margin:10px auto 30px;padding:20px clamp(16px,3vw,26px);
    background:var(--paper);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
  h1,h2,h3{color:color-mix(in oklab,var(--ink),var(--brand) 12%)}
  h1{font-size:clamp(28px,5vw,40px);line-height:1.2;margin:.4em 0 .2em}
  h2{font-size:clamp(22px,4vw,28px);line-height:1.28;margin:1.2em 0 .6em}
  h3{font-size:clamp(18px,3vw,22px);line-height:1.35;margin:1em 0 .4em}
  p{margin:.7em 0} ul,ol{margin:.6em 0 .8em 1.2em} li{margin:.25em 0}
  .lead{color:var(--muted)}
  .callout{background:color-mix(in oklab,var(--paper) 85%, var(--brand) 6%);border:1px solid var(--border);
    border-radius:12px;padding:12px 14px;margin:12px 0}
  .toc{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:10px;margin:12px 0}
  .toc a{display:block;text-decoration:none;border:1px solid var(--border);border-radius:12px;padding:10px 12px;
    color:color-mix(in oklab,var(--brand) 80%, var(--ink));background:color-mix(in oklab,var(--paper) 88%, transparent)}
  .examples{background:color-mix(in oklab,var(--paper) 88%, var(--accent) 4%);
    border:1px solid var(--border); border-radius:12px; padding:12px 14px; margin:12px 0}
  .examples h4{margin:.2em 0 .6em; font-size:1.05em}
  details{background:color-mix(in oklab,var(--paper) 94%, transparent);border:1px dashed var(--border);
    border-radius:10px;padding:8px 10px;margin:8px 0}
  summary{cursor:pointer;font-weight:700}
  .topbtn{position:fixed;right:16px;bottom:20px;z-index:55;background:var(--paper);border:1px solid var(--border);
    border-radius:12px;padding:10px 12px;font-weight:800;cursor:pointer;box-shadow:var(--shadow);display:none}
  .topbtn.show{display:block}
</style>
</head>
<body>
  <div class="progress" id="progress"></div>
  <div class="topbar">
    <div class="wrap" style="display:flex;align-items:center;justify-content:space-between;gap:12px">
      <a class="brand" href="#top">
        <div class="badge">‚ô®Ô∏è</div>
        <div>
          <h1 class="brand-title">Transferencia de Calor</h1>
          <div class="lead">Teor√≠a ampliada, f√≥rmulas claras y 12√ó12 ejercicios con respuestas breves</div>
        </div>
      </a>
      <div class="reader">
        <button class="btn small" id="fs-down" title="Reducir tama√±o de letra">A‚àí</button>
        <button class="btn small" id="fs-up"   title="Aumentar tama√±o de letra">A+</button>
        <button class="btn small" id="width-down" title="Reducir ancho de lectura">‚á§</button>
        <button class="btn small" id="width-up"   title="Aumentar ancho de lectura">‚á•</button>
        <button class="btn" id="theme-toggle" title="Tema claro/oscuro">‚òÄÔ∏è/üåô</button>
      </div>
    </div>
  </div>

  <main>
    <section class="paper" id="top">
      <h1>Gu√≠a de Transferencia de Calor</h1>
      <p class="lead">Doce cap√≠tulos: propiedades t√©rmicas, <strong>conducci√≥n (1D/2D/transitoria)</strong>, <strong>aletas</strong>, <strong>convecci√≥n (interna/externa/natural)</strong>, <strong>radiaci√≥n</strong>, <strong>intercambiadores</strong>, <strong>ebullici√≥n/condensaci√≥n</strong> y <strong>combinada</strong>. Cada cap√≠tulo trae <strong>ejemplos resueltos</strong> y <strong>12 ejercicios</strong> con respuesta o pista.</p>
      <div class="callout"><strong>Uso recomendado.</strong> Lee objetivos, revisa el cuadro de f√≥rmulas, estudia 2‚Äì4 ejemplos y resuelve los 12 problemas (üìù). Ajusta tama√±o, ancho y tema desde la barra.</div>
      <div class="toc">
        <a href="#cap1">1. Propiedades t√©rmicas y conceptos base</a>
        <a href="#cap2">2. Conducci√≥n estacionaria 1D</a>
        <a href="#cap3">3. Conducci√≥n radial y multicapas</a>
        <a href="#cap4">4. Aletas: eficiencia y efectividad</a>
        <a href="#cap5">5. Conducci√≥n transitoria</a>
        <a href="#cap6">6. Convecci√≥n interna (ductos)</a>
        <a href="#cap7">7. Convecci√≥n externa (placas/cilindros)</a>
        <a href="#cap8">8. Convecci√≥n natural</a>
        <a href="#cap9">9. Radiaci√≥n: fundamentos</a>
        <a href="#cap10">10. Radiaci√≥n entre superficies</a>
        <a href="#cap11">11. Intercambiadores de calor (LMTD & Œµ‚ÄìNTU)</a>
        <a href="#cap12">12. Ebullici√≥n y condensaci√≥n</a>
      </div>
    </section>

    <!-- ============ CAP 1 ============ -->
    <section class="paper" id="cap1">
      <h2>1. Propiedades t√©rmicas y conceptos base</h2>
      <div class="callout"><strong>üß† Objetivos.</strong> Manejar \(k\) (conductividad), \(c_p\), \(\rho\), difusividad \(\alpha=\tfrac{k}{\rho c_p}\), calor espec√≠fico, calor latente, fuentes internas \(\dot q'''\) y leyes b√°sicas.</div>
      <div class="callout"><strong>üìå F√≥rmulas clave.</strong>
        <ul>
          <li>Ley de Fourier: \(\vec q=-k\,\nabla T\). Flujo superficial: \(q''= -k\,dT/dx\) en 1D.</li>
          <li>Conservaci√≥n de energ√≠a (diferencial, sin movimiento): \(\rho c_p\,\tfrac{\partial T}{\partial t}=k\nabla^2 T+\dot q'''\).</li>
          <li>N√∫meros adimensionales: \(Bi=\dfrac{hL_c}{k}\), \(Fo=\dfrac{\alpha t}{L_c^2}\), \(Nu=\dfrac{hL}{k}\), \(Pr=\dfrac{\nu}{\alpha}\).</li>
        </ul>
      </div>
      <div class="examples"><h4>üîç Ejemplos (3)</h4>
        <ol>
          <li><details><summary>Flujo de calor a trav√©s de pared homog√©nea</summary>\(q''=k\,(T_1-T_2)/L\).</details></li>
          <li><details><summary>Estimaci√≥n de tiempo de enfriamiento (orden de magnitud)</summary>\(t\sim L^2/\alpha\) si Bi grande ‚Üí difusivo.</details></li>
          <li><details><summary>¬øModelo concentrado?</summary>Si \(Bi<0.1\), el s√≥lido puede tratarse is√≥t√©rmico (lumped capacitance).</details></li>
        </ol>
      </div>
      <div class="examples"><h4>üìù Ejercicios (12)</h4>
        <ol>
          <li><details><summary>Calcula \(\alpha\) para Al 6061: k=167 W/mK, \(\rho=2700\), \(c_p=896\)</summary>\(\alpha\approx6.9\times10^{-5}\,\text{m}^2/\text{s}\).</details></li>
          <li><details><summary>\(Bi\) de esfera (R=1 cm) en aire (h=20, k=200)</summary>\(L_c=V/A=R/3\Rightarrow Bi\approx0.0033\) ‚Üí lumped ok.</details></li>
          <li><details><summary>\(Nu\) define...</summary>\(Nu=hL/k\).</details></li>
          <li><details><summary>Calor latente de fusi√≥n define...</summary>Energ√≠a por unidad de masa al cambiar de fase a T constante.</details></li>
          <li><details><summary>\(Fo=0.2\), \(L_c=1\,\text{cm}\), \(\alpha=1e{-5}\)</summary>\(t=Fo L_c^2/\alpha=200\,\text{s}\).</details></li>
          <li><details><summary>Signo de \(q''\)</summary>Negativo si T decrece con x; el calor fluye de mayor a menor T.</details></li>
          <li><details><summary>\(k\) vs \(T\) para metales</summary>Suele disminuir con T (orden de magnitud).</details></li>
          <li><details><summary>\(c_p\) mayor: aire o acero</summary>Aire por masa menor; por unidad de masa, aire \(\sim1000\) J/kgK.</details></li>
          <li><details><summary>Unidades de \(\dot q'''\)</summary>W/m¬≥.</details></li>
          <li><details><summary>Define \(L_c\) en placa plana</summary>\(L_c=V/A=\tfrac{t}{2}\) para placa grande.</details></li>
          <li><details><summary>Flujo 1D condici√≥n</summary>Gradientes s√≥lo en una coordenada y propiedades uniformes.</details></li>
          <li><details><summary>Conservaci√≥n energ√≠a sin generaci√≥n y estacionario</summary>\(\nabla^2 T=0\).</details></li>
        </ol>
      </div>
    </section>

    <!-- ============ CAP 2 ============ -->
    <section class="paper" id="cap2">
      <h2>2. Conducci√≥n estacionaria 1D</h2>
      <div class="callout"><strong>üß† Objetivos.</strong> Resolver paredes planas con/ sin generaci√≥n, resistencias t√©rmicas y contacto; incluir convecci√≥n superficial.</div>
      <div class="callout"><strong>üìå F√≥rmulas.</strong>
        <ul>
          <li>Pared sin generaci√≥n: \(q=\dfrac{T_s-T_\infty}{R_{tot}}\), con \(R_{cond}=L/(kA)\) y \(R_{conv}=1/(hA)\).</li>
          <li>Pared con \(\dot q'''\) uniforme: \(T(x)=T_0+\tfrac{\dot q'''}{2k}(Lx-x^2)\) (ejemplo placa sim√©trica).</li>
          <li>Resistencia de contacto t√©rmico \(R_c\) (emp√≠rico); total en serie/paralelo.</li>
        </ul>
      </div>
      <div class="examples"><h4>üîç Ejemplos (3)</h4>
        <ol>
          <li><details><summary>Pared compuesta con convecci√≥n de ambos lados</summary>\(R_{tot}=1/(h_i A)+\sum L_i/(k_i A)+1/(h_o A)\).</details></li>
          <li><details><summary>Placa con generaci√≥n interna</summary>M√°ximo en el centro; \(T_{max}-T_s=\dot q''' L^2/(8k)\).</details></li>
          <li><details><summary>Cr√≠tica del aislamiento cil√≠ndrico</summary>Para cilindro: \(r_{crit}=k_{ais}/h\).</details></li>
        </ol>
      </div>
      <div class="examples"><h4>üìù Ejercicios (12)</h4>
        <ol>
          <li><details><summary>Pared 0.1 m, k=1.2, \(h_i=h_o=10\), \(T_i=80\), \(T_o=20\)</summary>\(R_{tot}=0.1/(1.2A)+2/(10A)=0.183/A\) ‚Üí \(q/A\approx327\,W/m^2\).</details></li>
          <li><details><summary>\(T_{max}-T_s\) en placa con \(\dot q'''=1e6\), L=0.02, k=200</summary>\(=\,1e6¬∑0.02^2/(8¬∑200)=0.25\,K\).</details></li>
          <li><details><summary>Agrega contacto \(R_c=1e{-4}\,\text{m}^2K/W\)</summary>\(q''=(T_i-T_o)/(R_{tot}+R_c)\).</details></li>
          <li><details><summary>¬øConviene aislar cilindro con h=8, k_ais=0.04?</summary>\(r_{crit}=5\,\text{mm}\). Si \(r<r_{crit}\), aislar ‚Üë q.</details></li>
          <li><details><summary>Temperatura intermedia en s√°ndwich</summary>Usa divisi√≥n proporcional por resistencias.</details></li>
          <li><details><summary>Pared multicapas equivalente</summary>\(k_{eq}=L_{tot}A/\sum(L_i A k_i^{-1})\).</details></li>
          <li><details><summary>Calor perdido en 5 m¬≤ de pared anterior</summary>\(\dot Q= q'' A\).</details></li>
          <li><details><summary>Si \(h_o\) aumenta al doble</summary>\(R_{conv,o}\) se reduce a la mitad, q'' ‚Üë.</details></li>
          <li><details><summary>Fuga por puente t√©rmico</summary>Paralelo: sumar conductancias.</details></li>
          <li><details><summary>Pregunta conceptual</summary>El perfil T en pared homog√©nea sin generaci√≥n es lineal.</details></li>
          <li><details><summary>Unidades de \(R\)</summary>\(\text{K/W}\) (o \(\text{m}^2\text{K/W}\) para por √°rea).</details></li>
          <li><details><summary>\(U\) global</summary>\(U=1/R'_{tot}\) por unidad de √°rea.</details></li>
        </ol>
      </div>
    </section>

    <!-- ============ CAP 3 ============ -->
    <section class="paper" id="cap3">
      <h2>3. Conducci√≥n radial y multicapas</h2>
      <div class="callout"><strong>üß† Objetivos.</strong> Paredes cil√≠ndricas/esf√©ricas, aislamiento, p√©rdidas en tuber√≠as y tanques.</div>
      <div class="callout"><strong>üìå F√≥rmulas.</strong>
        <ul>
          <li>Cilindro: \(q=\dfrac{2\pi L k (T_1-T_2)}{\ln(r_2/r_1)}\), \(R=\ln(r_2/r_1)/(2\pi L k)\).</li>
          <li>Esfera: \(q=4\pi k\dfrac{(T_1-T_2)}{(1/r_1-1/r_2)}\), \(R=(1/r_1-1/r_2)^{-1}/(4\pi k)\).</li>
          <li>Multicapas: resistencias radiales en serie.</li>
        </ul>
      </div>
      <div class="examples"><h4>üîç Ejemplos (2)</h4>
        <ol>
          <li><details><summary>Tuber√≠a con aislamiento</summary>Calcula \(R_{cil}+R_{ais}+R_{conv,o}\) y \(q=(T_i-T_\infty)/R_{tot}\).</details></li>
          <li><details><summary>Esfera hueca</summary>Aplica \(R_{esf}\) para cada capa.</details></li>
        </ol>
      </div>
      <div class="examples"><h4>üìù Ejercicios (12)</h4>
        <ol>
          <li><details><summary>Tuber√≠a: r1=0.02, r2=0.03, k=0.04, L=5, \(T_i=80\), \(T_o=20\)</summary>Calcula \(q\) radial (sin convecci√≥n).</details></li>
          <li><details><summary>Agrega convecci√≥n externa h=10</summary>\(R_{conv}=1/(h¬∑2\pi r_2 L)\).</details></li>
          <li><details><summary>\(r_{crit}\) para k=0.06, h=12</summary>\(=5\,\text{mm}\).</details></li>
          <li><details><summary>Temperatura en interfaz capa1‚Äìcapa2</summary>Usa ca√≠da proporcional \(qR\).</details></li>
          <li><details><summary>Aislamiento doble: ¬ømejora?</summary>Depende de k y espesores; suma resistencias.</details></li>
          <li><details><summary>Esfera con \(k\) variable</summary>Trata \(k(T)\) por promedio logar√≠tmico (aprox.).</details></li>
          <li><details><summary>P√©rdidas por 20 m de tuber√≠a</summary>\(\dot Q=q\) (estacionario) por unidad de longitud √ó longitud.</details></li>
          <li><details><summary>Contacto radial \(R_c\)</summary>A√±ade en serie.</details></li>
          <li><details><summary>\(q\) aumenta al reducir r2</summary>Menor \(R\) ‚Üí mayor q.</details></li>
          <li><details><summary>Esfera maciza</summary>√Årea diverge a \(4\pi r^2\); perfil no lineal.</details></li>
          <li><details><summary>Unidades de \(R_{rad}\)</summary>K/W.</details></li>
          <li><details><summary>Optimiza espesor para \(q\) objetivo</summary>Resuelve \(q=(T_i-T_o)/R_{tot}\) para r2.</details></li>
        </ol>
      </div>
    </section>

    <!-- ============ CAP 4 ============ -->
    <section class="paper" id="cap4">
      <h2>4. Aletas: eficiencia y efectividad</h2>
      <div class="callout"><strong>üß† Objetivos.</strong> Dise√±ar aletas para maximizar transferencia con masa m√≠nima.</div>
      <div class="callout"><strong>üìå F√≥rmulas.</strong>
        <ul>
          <li>Par√°metro \(m=\sqrt{\dfrac{hP}{kA_c}}\).</li>
          <li>Aleta recta, punta adiab√°tica: \(\eta_f=\tanh(mL)/(mL)\).</li>
          <li>Efectividad: \(\varepsilon_f=\dfrac{Q_f}{hA_b\,(T_b-T_\infty)}\). √ötil si \(\varepsilon_f>2\) (regla).</li>
          <li>Superficie aleteada global: \(\eta_o=\dfrac{A_b h + \sum \eta_f A_{f} h}{h(A_b+\sum A_f)}\).</li>
        </ul>
      </div>
      <div class="examples"><h4>üîç Ejemplos (2)</h4>
        <ol>
          <li><details><summary>Aleta de placa delgada (Al)</summary>Calcula \(mL\), \(\eta_f\), \(Q_f\).</details></li>
          <li><details><summary>Bater√≠a de tubos aleteados</summary>\(\eta_o\) para muchas aletas id√©nticas.</details></li>
        </ol>
      </div>
      <div class="examples"><h4>üìù Ejercicios (12)</h4>
        <ol>
          <li><details><summary>k=200, h=30, t=1 mm, P‚âà2, A_c‚âàt¬∑1, L=20 mm</summary>\(mL\) y \(\eta_f\).</details></li>
          <li><details><summary>¬øCu√°ndo no conviene aleta?</summary>\(k\) bajo o \(h\) muy alto ‚Üí \(mL\) grande, \(\eta_f\) baja.</details></li>
          <li><details><summary>Punta isoterma</summary>Usa soluci√≥n con \(\cosh\) y \(\sinh\).</details></li>
          <li><details><summary>\(\eta_o\) con 70% √°rea aleteada y \(\eta_f=0.9\)</summary>\(\eta_o=0.1+0.9√ó0.9=0.91\).</details></li>
          <li><details><summary>Incremento de masa por aletas</summary>Compara W a√±adida vs ganancia t√©rmica.</details></li>
          <li><details><summary>Aleta c√≥nica</summary>Definir \(m(x)\) ‚Üí aproximar por promedio.</details></li>
          <li><details><summary>Selecci√≥n de material</summary>Al vs Cu: Cu mejor \(k\) pero m√°s pesado/caro.</details></li>
          <li><details><summary>Optimizaci√≥n de L</summary>\(\partial Q/\partial L=0\) (conceptual).</details></li>
          <li><details><summary>Pin fin (cil√≠ndrica)</summary>Usa \(m=\sqrt{hP/(kA_c)}\) con \(P=\pi d\).</details></li>
          <li><details><summary>Comparar \(Q\) con/ sin aleta</summary>Eval√∫a \(\varepsilon_f\).</details></li>
          <li><details><summary>Efecto de pintura</summary>Pintura ‚Üì \(k\) local, ‚Üë \(\varepsilon\) radiativa (si radiaci√≥n relevante).</details></li>
          <li><details><summary>Radiaci√≥n incluida</summary>Usa \(h_{eq}=h_{conv}+h_{rad}\).</details></li>
        </ol>
      </div>
    </section>

    <!-- ============ CAP 5 ============ -->
    <section class="paper" id="cap5">
      <h2>5. Conducci√≥n transitoria</h2>
      <div class="callout"><strong>üß† Objetivos.</strong> Sistemas concentrados (Bi peque√±o), tablas de Heisler, capas semi-infinitas y respuesta temporal.</div>
      <div class="callout"><strong>üìå Relaciones.</strong>
        <ul>
          <li><strong>Lumped</strong>: \(Bi<0.1\), \(\dfrac{T-T_\infty}{T_i-T_\infty}=\exp\big(-\tfrac{hA}{\rho c_p V} t\big)=\exp(-t/\tau)\).</li>
          <li><strong>Heisler</strong>: placas, cilindros, esferas (tablas con \(Fo\), \(Bi\)).</li>
          <li><strong>Semi-infinito</strong>: \(\dfrac{T(x,t)-T_s}{T_i-T_s}=\operatorname{erf}\big(\tfrac{x}{2\sqrt{\alpha t}}\big)\).</li>
        </ul>
      </div>
      <div class="examples"><h4>üîç Ejemplos (2)</h4>
        <ol>
          <li><details><summary>Enfriamiento de cilindro (lumped)</summary>Calcula \(\tau=\rho c_p V/(hA)\).</details></li>
          <li><details><summary>Penetraci√≥n t√©rmica en s√≥lido semi-infinito</summary>Profundidad \(\delta\sim 4\sqrt{\alpha t}\) (definici√≥n pr√°ctica).</details></li>
        </ol>
      </div>
      <div class="examples"><h4>üìù Ejercicios (12)</h4>
        <ol>
          <li><details><summary>\(Bi\) de placa: t=10 mm, k=50, h=100</summary>\(L_c=t/2\Rightarrow Bi=0.01\): lumped v√°lido.</details></li>
          <li><details><summary>Tiempo para caer al 10% (lumped)</summary>\(t=-\tau\ln 0.1\). </details></li>
          <li><details><summary>\(Fo=0.2\) con \(L_c=5\,mm\), \(\alpha=1e{-5}\)</summary>\(t=50\,s\).</details></li>
          <li><details><summary>Temperatura a x=1 cm, t=10 min, semi-inf.</summary>Usa erf; calcula argumento.</details></li>
          <li><details><summary>Condici√≥n inicial distinta</summary>Superposici√≥n si cambios por pasos.</details></li>
          <li><details><summary>Bi=0.3: ¬øHeisler o lumped?</summary>Heisler.</details></li>
          <li><details><summary>\(h\) duplica ‚Üí \(\tau\) ...</summary>Se reduce a la mitad.</details></li>
          <li><details><summary>Intercambio de calor total en enfriamiento</summary>\(Q=\rho c_p V (T_i-T_f)\).</details></li>
          <li><details><summary>Pared con generaci√≥n transitoria</summary>Suma particular + homog√©nea (noci√≥n).</details></li>
          <li><details><summary>Se√±al t√©rmica peri√≥dica</summary>Profundidad de penetraci√≥n \(\delta_p=\sqrt{2\alpha/\omega}\).</details></li>
          <li><details><summary>Medici√≥n de \(\alpha\)</summary>Desde respuesta de impulso t√©rmico.</details></li>
          <li><details><summary>Enfriamiento criog√©nico</summary>Verifica Bi; \(k\) var√≠a con T.</details></li>
        </ol>
      </div>
    </section>

    <!-- ============ CAP 6 ============ -->
    <section class="paper" id="cap6">
      <h2>6. Convecci√≥n interna (ductos)</h2>
      <div class="callout"><strong>üß† Objetivos.</strong> Coeficiente \(h\) en tuber√≠as/canales; correlaciones laminar/turbulento y desarrollo t√©rmico.</div>
      <div class="callout"><strong>üìå Correlaciones comunes.</strong>
        <ul>
          <li>Laminar totalmente desarrollado: \(Nu=4.36\) (flujo de calor uniforme), \(Nu=3.66\) (T_s uniforme).
          </li>
          <li>Turbulento liso (Dittus‚ÄìBoelter): \(Nu=0.023 Re^{0.8} Pr^n\), \(n=0.4\) (calentando), \(0.3\) (enfriando), \(0.6\lesssim Pr\lesssim160\).</li>
          <li>Entrada t√©rmica: Sieder‚ÄìTate: \(Nu=1.86 (Re Pr D/L)^{1/3}(\mu/\mu_w)^{0.14}\) (laminar).</li>
        </ul>
      </div>
      <div class="examples"><h4>üîç Ejemplos (2)</h4>
        <ol>
          <li><details><summary>Agua en tubo D=25 mm, V=1 m/s</summary>Calcula Re, elige r√©gimen y \(h=Nu¬∑k/D\).</details></li>
          <li><details><summary>Canal rectangular</summary>Usa di√°metro hidr√°ulico \(D_h=4A/P\).</details></li>
        </ol>
      </div>
      <div class="examples"><h4>üìù Ejercicios (12)</h4>
        <ol>
          <li><details><summary>Re con \(\nu=1e{-6}\), D=0.02, V=2</summary>\(Re=4e4\).</details></li>
          <li><details><summary>\(Nu\) D‚ÄìB con Re=5e4, Pr=7</summary>‚âà 0.023√ó(5e4)^0.8√ó7^0.4.</details></li>
          <li><details><summary>\(h\) si k=0.6 y D=0.02</summary>\(h=Nu k/D\).</details></li>
          <li><details><summary>Entrada t√©rmica L=0.5 m</summary>Eval√∫a Sieder‚ÄìTate.</details></li>
          <li><details><summary>Superficie rugosa</summary>Usa correlaci√≥n con rugosidad (nota conceptual).</details></li>
          <li><details><summary>Fluidizaci√≥n (noci√≥n)</summary>Granular ‚Üí coeficientes altos.</details></li>
          <li><details><summary>Ca√≠da de presi√≥n</summary>Acopla con cap√≠tulo de flujo interno.</details></li>
          <li><details><summary>Refrigerantes con Pr alto</summary>Ajusta n en D‚ÄìB.</details></li>
          <li><details><summary>Calentamiento vs enfriamiento</summary>\(n\) cambia.</details></li>
          <li><details><summary>\(Nu\) para aire (Pr‚âà0.7)</summary>Calcula num√©ricamente.</details></li>
          <li><details><summary>Microcanales</summary>Efectos de rarefacci√≥n (Knudsen) si D muy peque√±o.</details></li>
          <li><details><summary>Propiedades a T de film</summary>Promedia a \(T_f=(T_s+T_b)/2\).</details></li>
        </ol>
      </div>
    </section>

    <!-- ============ CAP 7 ============ -->
    <section class="paper" id="cap7">
      <h2>7. Convecci√≥n externa (placas/cilindros)</h2>
      <div class="callout"><strong>üß† Objetivos.</strong> Estimar \(h\) en flujo sobre superficies externas.</div>
      <div class="callout"><strong>üìå Correlaciones.</strong>
        <ul>
          <li>Placa plana laminar: \(Nu_x=0.332 Re_x^{1/2} Pr^{1/3}\); promedio hasta L: \(Nu_L=0.664 Re_L^{1/2} Pr^{1/3}\).</li>
          <li>Mixta: \(Nu_L=0.037 Re_L^{0.8}-871\) (Pr‚âà0.7).</li>
          <li>Cilindro cruzado (Churchill‚ÄìBernstein): \(Nu=0.3+\dfrac{0.62 Re^{1/2} Pr^{1/3}}{[1+(0.4/Pr)^{2/3}]^{1/4}}\Big[1+\big(\tfrac{Re}{282000}\big)^{5/8}\Big]^{4/5}\).</li>
        </ul>
      </div>
      <div class="examples"><h4>üîç Ejemplos (2)</h4>
        <ol>
          <li><details><summary>Placa L=0.5 m a 80¬∞C en aire 20¬∞C, U=5 m/s</summary>Calcula Re_L, decide r√©gimen, \(Nu_L\) y \(h\).</details></li>
          <li><details><summary>Cable cilindro √ò10 mm, aire 2 m/s</summary>Churchill‚ÄìBernstein para \(Nu\) y \(h\).</details></li>
        </ol>
      </div>
      <div class="examples"><h4>üìù Ejercicios (12)</h4>
        <ol>
          <li><details><summary>Re_x en x=0.2 m con U=3, \(\nu=1.5e{-5}\)</summary>\(=4e4\).</details></li>
          <li><details><summary>\(Nu_L\) laminar (Pr=0.7), L=0.3, U=2</summary>Eval√∫a f√≥rmula.</details></li>
          <li><details><summary>Estimaci√≥n de \(h\) si k=0.026</summary>\(h=Nu k/L\).</details></li>
          <li><details><summary>Transici√≥n a turbulento</summary>\(Re_x\sim5e5\).</details></li>
          <li><details><summary>Cilindro Re=2e4, Pr=0.7</summary>\(Nu\) con C‚ÄìB.</details></li>
          <li><details><summary>Efecto de rugosidad</summary>Puede adelantar transici√≥n.</details></li>
          <li><details><summary>Placa invertida</summary>Similar si U igual; gravedad afecta capa t√©rmica en natural.</details></li>
          <li><details><summary>Direcci√≥n del calor</summary>\(h\) depende d√©bilmente del signo (aire).</details></li>
          <li><details><summary>Propiedades a T film</summary>\(T_f=(T_s+T_\infty)/2\).</details></li>
          <li><details><summary>Dos placas paralelas externas</summary>Interacci√≥n de estelas (conceptual).</details></li>
          <li><details><summary>Coeficiente local vs promedio</summary>\(h_x>h_{prom}\) cerca del borde de ataque.</details></li>
          <li><details><summary>Estimaci√≥n de potencia de ventilador</summary>Acopla con ca√≠da de presi√≥n (flujo externo: potencia aerodin√°mica).</details></li>
        </ol>
      </div>
    </section>

    <!-- ============ CAP 8 ============ -->
    <section class="paper" id="cap8">
      <h2>8. Convecci√≥n natural</h2>
      <div class="callout"><strong>üß† Objetivos.</strong> Flujos por flotabilidad (\(Ra=Gr¬∑Pr\)).</div>
      <div class="callout"><strong>üìå Correlaciones t√≠picas.</strong>
        <ul>
          <li>Placa vertical: \(Nu_L=0.68+\dfrac{0.670 Ra_L^{1/4}}{[1+(0.492/Pr)^{9/16}]^{4/9}}\), \(10^{-1}\le Ra\le 10^9\).</li>
          <li>Cilindro horizontal: \(Nu=0.36+\dfrac{0.518 Ra^{1/4}}{[1+(0.559/Pr)^{9/16}]^{4/9}}\).</li>
          <li>Reg√≠menes: l√°mina (\(Ra\lesssim10^9\)) vs turbulento.</li>
        </ul>
      </div>
      <div class="examples"><h4>üîç Ejemplos (2)</h4>
        <ol>
          <li><details><summary>Radiador vertical a 60¬∞C en sala 20¬∞C</summary>Calcula \(\beta\), \(\Delta T\), \(Ra_L\), luego \(Nu\) y \(h\).</details></li>
          <li><details><summary>Cilindro caliente en aire quieto</summary>Usa correlaci√≥n para \(Nu\).</details></li>
        </ol>
      </div>
      <div class="examples"><h4>üìù Ejercicios (12)</h4>
        <ol>
          <li><details><summary>\(\beta\) para gas ideal</summary>\(\beta=1/T\) (K‚Åª¬π).</details></li>
          <li><details><summary>\(Ra\) con \(g\beta\Delta T L^3/(\nu\alpha)\)</summary>Eval√∫a con datos.</details></li>
          <li><details><summary>\(h\) estimado</summary>\(h=Nu k/L\).</details></li>
          <li><details><summary>Placa calentada hacia abajo</summary>Inestable ‚Üí convecci√≥n fuerte.</details></li>
          <li><details><summary>Placa enfriada hacia arriba</summary>Estable ‚Üí convecci√≥n d√©bil.</details></li>
          <li><details><summary>Aire vs agua: Pr</summary>Agua Pr‚â´1: BL t√©rmica delgada.</details></li>
          <li><details><summary>Cambio de altitud</summary>\(\nu, \alpha\) y \(\beta\) cambian (conceptual).</details></li>
          <li><details><summary>Placa muy alta</summary>Transici√≥n a turbulento si \(Ra\) grande.</details></li>
          <li><details><summary>Rendijas verticales</summary>Convecci√≥n confinada: correlaciones espec√≠ficas.</details></li>
          <li><details><summary>Microgravedad</summary>\(g\to0\) ‚Üí natural desaparece.</details></li>
          <li><details><summary>Propiedades a T film</summary>\(T_f=(T_s+T_\infty)/2\).</details></li>
          <li><details><summary>Radiaci√≥n simult√°nea</summary>Usa \(h_{eq}=h_{conv}+h_{rad}\).</details></li>
        </ol>
      </div>
    </section>

    <!-- ============ CAP 9 ============ -->
    <section class="paper" id="cap9">
      <h2>9. Radiaci√≥n: fundamentos</h2>
      <div class="callout"><strong>üß† Objetivos.</strong> Emisi√≥n, absorci√≥n, reflectancia, <em>cuerpo negro</em>, ley de Stefan‚ÄìBoltzmann y ley de desplazamiento.</div>
      <div class="callout"><strong>üìå F√≥rmulas.</strong>
        <ul>
          <li>Cuerpo negro: \(E_b=\sigma T^4\), \(\sigma=5.67\times10^{-8}\,\text{W/m}^2\text{K}^4\).</li>
          <li>Superficie gris/difrusa: \(E=\varepsilon \sigma T^4\), \(\alpha=\varepsilon\) (ley de Kirchhoff).</li>
          <li>Intercambio con entorno grande: \(q=\varepsilon\sigma A (T_s^4-T_{sur}^4)\).</li>
        </ul>
      </div>
      <div class="examples"><h4>üîç Ejemplos (2)</h4>
        <ol>
          <li><details><summary>Placa a 500 K frente a entorno 300 K</summary>\(q''=\varepsilon\sigma (T_s^4-T_{sur}^4)\).</details></li>
          <li><details><summary>Cambio de \(\varepsilon\)</summary>Pintura negra mate ‚Üë \(\varepsilon\) ‚Üí ‚Üë radiaci√≥n.</details></li>
        </ol>
      </div>
      <div class="examples"><h4>üìù Ejercicios (12)</h4>
        <ol>
          <li><details><summary>\(E_b\) a 700 K</summary>\(\sigma T^4\).</details></li>
          <li><details><summary>\(q''\) con \(\varepsilon=0.8\)</summary>Eval√∫a num√©ricamente.</details></li>
          <li><details><summary>¬øSiempre \(\alpha=\varepsilon\)?</summary>S√≥lo en equilibrio radiativo, superficies grises.</details></li>
          <li><details><summary>Longitud de onda pico</summary>Wien: \(\lambda_{max} T\approx 2898\,\mu\text{m¬∑K}\).</details></li>
          <li><details><summary>Placa a 300 K con entorno 300 K</summary>\(q=0\) (radiaci√≥n neta nula si solo radiaci√≥n).</details></li>
          <li><details><summary>Superficie pulida</summary>\(\varepsilon\) baja ‚Üí menor intercambio radiativo.</details></li>
          <li><details><summary>Verificaci√≥n dimensional de \(\sigma\)</summary>W/m¬≤K‚Å¥.</details></li>
          <li><details><summary>Espectro solar pico ~0.5 Œºm</summary>Consistente con \(T\) ‚âà 5800 K.</details></li>
          <li><details><summary>Escudo radiante</summary>Interponer pantalla reduce \(q\).</details></li>
          <li><details><summary>Radiaci√≥n vs convecci√≥n</summary>Compara magnitudes para decidir relevancia.</details></li>
          <li><details><summary>√Årea efectiva</summary>Proyecci√≥n importa para radiaci√≥n direccional (noci√≥n).</details></li>
          <li><details><summary>\(h_{rad}\) equivalente</summary>\(4\varepsilon\sigma T_m^3\).</details></li>
        </ol>
      </div>
    </section>

    <!-- ============ CAP 10 ============ -->
    <section class="paper" id="cap10">
      <h2>10. Radiaci√≥n entre superficies</h2>
      <div class="callout"><strong>üß† Objetivos.</strong> Factores de forma, redes radiativas, superficies grises y cavidades.</div>
      <div class="callout"><strong>üìå Relaciones.</strong>
        <ul>
          <li>Dos superficies grandes paralelas (grises, difusas): \(q''=\dfrac{\sigma(T_1^4-T_2^4)}{\dfrac{1}{\varepsilon_1}+\dfrac{1}{\varepsilon_2}-1}\).</li>
          <li>Factor de forma: \(A_1F_{12}=A_2F_{21}\), \(\sum_j F_{1j}=1\).</li>
          <li>Red equivalente: resistencias radiativas superficiales y espaciales.</li>
        </ul>
      </div>
      <div class="examples"><h4>üîç Ejemplos (2)</h4>
        <ol>
          <li><details><summary>Paralelas con \(\varepsilon_1=0.8\), \(\varepsilon_2=0.4\)</summary>Aplica f√≥rmula de \(q''\).</details></li>
          <li><details><summary>Recinto con pantalla intermedia</summary>Reduce \(q\) (resistencias en serie).</details></li>
        </ol>
      </div>
      <div class="examples"><h4>üìù Ejercicios (12)</h4>
        <ol>
          <li><details><summary>\(F_{12}\) placa‚Äìplaca paralelas</summary>‚âà1 (si grandes).</details></li>
          <li><details><summary>\(F_{12}\) placa peque√±a frente a grande</summary>\(F\approx A_{peque√±a}/A_{grande}\).</details></li>
          <li><details><summary>Conservaci√≥n de \(F\)</summary>\(A_1F_{12}=A_2F_{21}\).</details></li>
          <li><details><summary>Esfera conc√©ntrica</summary>\(F_{12}=1\).</details></li>
          <li><details><summary>Recinto c√∫bico</summary>Simetr√≠a ‚Üí \(F\) iguales por caras opuestas.</details></li>
          <li><details><summary>\(q''\) cambia al pulir una cara</summary>\(\varepsilon\) ‚Üì ‚Üí \(q''\) ‚Üì.</details></li>
          <li><details><summary>Red radiativa: nodos</summary>Potenciales \(J=\varepsilon\sigma T^4+(1-\varepsilon)G\).</details></li>
          <li><details><summary>Peque√±a apertura</summary>Aproxima como cuerpo negro (cavidad).</details></li>
          <li><details><summary>M√∫ltiples pantallas</summary>Resistencias en serie suman.</details></li>
          <li><details><summary>Choque con convecci√≥n</summary>Usa \(h_{eq}\) para combinar.</details></li>
          <li><details><summary>\(T\) efectiva de cielo</summary>\(T_{sky}<T_{amb}\) ‚Üí radiaci√≥n neta hacia cielo.</details></li>
          <li><details><summary>Blindaje t√©rmico</summary>Materiales con baja \(\varepsilon\).</details></li>
        </ol>
      </div>
    </section>

    <!-- ============ CAP 11 ============ -->
    <section class="paper" id="cap11">
      <h2>11. Intercambiadores de calor (LMTD & \(\varepsilon\)‚ÄìNTU)</h2>
      <div class="callout"><strong>üß† Objetivos.</strong> Seleccionar, dimensionar y evaluar desempe√±o de intercambiadores.</div>
      <div class="callout"><strong>üìå Relaciones.</strong>
        <ul>
          <li>LMTD: \(\dot Q=U A \Delta T_{lm} F\). Flujo paralelo/contracorriente: \(\Delta T_{lm}=\dfrac{\Delta T_1-\Delta T_2}{\ln(\Delta T_1/\Delta T_2)}\). Factor \(F\le1\).</li>
          <li>\(\varepsilon\)‚ÄìNTU: \(\varepsilon=\dfrac{\dot Q}{C_{min}(T_{h,i}-T_{c,i})}\), \(NTU=\dfrac{UA}{C_{min}}\), \(C_r=\dfrac{C_{min}}{C_{max}}\).</li>
          <li>Contracorriente: \(\varepsilon=\dfrac{1-\exp[-NTU(1+C_r)]}{1+C_r\,\exp[-NTU(1+C_r)]}\).</li>
        </ul>
      </div>
      <div class="examples"><h4>üîç Ejemplos (3)</h4>
        <ol>
          <li><details><summary>Calcula √°rea con LMTD y U</summary>Obt√©n \(\Delta T_1, \Delta T_2\), halla \(\Delta T_{lm}\) y despeja \(A\).</details></li>
          <li><details><summary>Predice salida con \(\varepsilon\)‚ÄìNTU</summary>Con \(NTU\), \(C_r\) ‚Üí \(\varepsilon\) ‚Üí temperaturas de salida.</details></li>
          <li><details><summary>Resistencias en U</summary>\(1/U=1/h_i+R_{wall}+1/h_o+R_f\).</details></li>
        </ol>
      </div>
      <div class="examples"><h4>üìù Ejercicios (12)</h4>
        <ol>
          <li><details><summary>Paralelo: \(T_{h,i}=100\), \(T_{h,o}=60\), \(T_{c,i}=20\), \(T_{c,o}=50\)</summary>\(\Delta T_1=50\), \(\Delta T_2=40\), \(\Delta T_{lm}\approx44.3\,K\).</details></li>
          <li><details><summary>\(U=400\), \(\dot Q=200\,kW\), \(\Delta T_{lm}=30\)</summary>\(A=\dot Q/(U\Delta T_{lm})\approx16.7\,m^2\).</details></li>
          <li><details><summary>\(NTU=2\), \(C_r=0.5\) contracorriente</summary>\(\varepsilon‚âà0.76\) (aprox.).</details></li>
          <li><details><summary>√Årea m√≠nima para \(\varepsilon=0.8\)</summary>Calcula NTU requerido y \(A=NTU C_{min}/U\).</details></li>
          <li><details><summary>Fouling</summary>\(R_f\) ‚Üë ‚Üí U ‚Üì.</details></li>
          <li><details><summary>Balance de energ√≠a</summary>\(\dot m_h c_{p,h}(T_{h,i}-T_{h,o})=\dot m_c c_{p,c}(T_{c,o}-T_{c,i})\).</details></li>
          <li><details><summary>Config. de 1‚Äì2 pasos</summary>Usa factor \(F\).</details></li>
          <li><details><summary>Enfriador de aceite (Pr alto)</summary>Coefs distintos por lado.</details></li>
          <li><details><summary>Calcular \(C_{min}\)</summary>Menor \(\dot m c_p\).</details></li>
          <li><details><summary>Intercambiador cruzado</summary>Curvas \(\varepsilon\)(NTU, \(C_r\)).</details></li>
          <li><details><summary>Bypass en carcasa</summary>Efecto en U efectivo.</details></li>
          <li><details><summary>Paralelo vs contracorriente</summary>Contracorriente m√°s eficiente (mayor \(\Delta T_{lm}\)).</details></li>
        </ol>
      </div>
    </section>

    <!-- ============ CAP 12 ============ -->
    <section class="paper" id="cap12">
      <h2>12. Ebullici√≥n y condensaci√≥n</h2>
      <div class="callout"><strong>üß† Objetivos.</strong> Comprender reg√≠menes de ebullici√≥n y condensaci√≥n de pel√≠cula/goteo.</div>
      <div class="callout"><strong>üìå Ideas y f√≥rmulas.</strong>
        <ul>
          <li>Ebullici√≥n: natural vs forzada, nucleada vs pel√≠cula; curva de ebullici√≥n con \(q''\)‚Äì\(\Delta T\); CHF (Kruzhilin/Zuber, noci√≥n).</li>
          <li>Rohsenow (nucleada, noci√≥n): \(q''\propto \mu_l h_{fg} [g(\rho_l-\rho_v)/\sigma]^{1/2} \big(\dfrac{\Delta T}{C_{sf} h_{fg}}\big)^n Pr_l^s\).</li>
          <li>Condensaci√≥n de pel√≠cula (Nusselt, placa vertical): \(h\propto \big(\dfrac{k_l^3 \rho_l^2 (\rho_l-\rho_v) g h_{fg}}{\mu_l L \Delta T}\big)^{1/4}\).</li>
        </ul>
      </div>
      <div class="examples"><h4>üîç Ejemplos (2)</h4>
        <ol>
          <li><details><summary>Condensador de placa</summary>Estima \(h\) por Nusselt y \(\dot Q=hA\Delta T\).</details></li>
          <li><details><summary>Ebullici√≥n en resistencia el√©ctrica</summary>Verifica que \(q''\) < CHF para seguridad.</details></li>
        </ol>
      </div>
      <div class="examples"><h4>üìù Ejercicios (12)</h4>
        <ol>
          <li><details><summary>Identifica r√©gimen en curva de ebullici√≥n</summary>Nucleado ‚Üí alta \(q''\) y peque√±as \(\Delta T\).</details></li>
          <li><details><summary>\(h\) en condensaci√≥n ‚Üë o ‚Üì con L</summary>\(h\propto L^{-1/4}\): ‚Üì con L.</details></li>
          <li><details><summary>Agentes humectantes</summary>Reducen \(\sigma\): afecta nucleaci√≥n.</details></li>
          <li><details><summary>Condensaci√≥n en tubo</summary>Coeficientes mayores que en placa.</details></li>
          <li><details><summary>Presi√≥n reduce \(h_{fg}\)</summary>Facilita ebullici√≥n.</details></li>
          <li><details><summary>CHF depende de gravedad</summary>Menor g ‚Üí menor CHF.</details></li>
          <li><details><summary>Goteo vs pel√≠cula</summary>Goteo mucho m√°s eficiente (\(h\) ‚Üë).</details></li>
          <li><details><summary>Ensuciamiento</summary>R_f ‚Üë ‚Üí U ‚Üì.</details></li>
          <li><details><summary>Seguridad t√©rmica</summary>Margen \(q''_{op}/q''_{CHF}\).</details></li>
          <li><details><summary>Nucleaci√≥n en superficies rugosas</summary>Favorece inicio de ebullici√≥n.</details></li>
          <li><details><summary>Refrigeraci√≥n por ebullici√≥n</summary>Alta remoci√≥n de calor por \(h_{fg}\).</details></li>
          <li><details><summary>Vapor puro vs mezcla</summary>Mezclas complican \(h\) (difusi√≥n masiva).</details></li>
        </ol>
      </div>
    </section>

    <section class="paper">
      <h2>Errores t√≠picos y trucos</h2>
      <ul>
        <li>Aplicar correlaciones fuera de rango (Re/Pr/Ra) ‚Üí verifica validez.</li>
        <li>Usar propiedades a T equivocada ‚Üí usa temperatura de film.</li>
        <li>Ignorar radiaci√≥n a T altas (&gt;400 K) ‚Üí incluir \(h_{rad}\).</li>
        <li>Suponer lumped con Bi&gt;0.1 ‚Üí usar Heisler o soluci√≥n transitoria.</li>
        <li>En intercambiadores, olvidar fouling/ensuciamiento ‚Üí ajusta U.</li>
      </ul>
    </section>
  </main>

  <button class="topbtn" id="topbtn">‚Üë Arriba</button>

  <script>
    const $ = s => document.querySelector(s);
    const bar = $('#progress');
    function updateProgress(){
      const h=document.documentElement; const sc=h.scrollTop||document.body.scrollTop;
      const max=(h.scrollHeight-h.clientHeight); const p=max>0?(sc/max)*100:0; bar.style.width=p+'%';
      $('#topbtn').classList.toggle('show', sc>600);
    }
    addEventListener('scroll', updateProgress, {passive:true}); updateProgress();

    const root=document.documentElement;
    $('#fs-up').addEventListener('click', ()=>{
      const val=parseFloat(getComputedStyle(root).getPropertyValue('--base'))||18;
      root.style.setProperty('--base', Math.min(val+1, 22)+'px');
    });
    $('#fs-down').addEventListener('click', ()=>{
      const val=parseFloat(getComputedStyle(root).getPropertyValue('--base'))||18;
      root.style.setProperty('--base', Math.max(val-1, 14)+'px');
    });
    $('#width-up').addEventListener('click', ()=>{
      const w=getComputedStyle(root).getPropertyValue('--maxw')||'80ch'; const num=parseFloat(w);
      root.style.setProperty('--maxw', Math.min(num+8, 96)+'ch');
    });
    $('#width-down').addEventListener('click', ()=>{
      const w=getComputedStyle(root).getPropertyValue('--maxw')||'80ch'; const num=parseFloat(w);
      root.style.setProperty('--maxw', Math.max(num-8, 56)+'ch');
    });
    $('#theme-toggle').addEventListener('click', ()=>{
      const light=getComputedStyle(root).getPropertyValue('--paper').trim()==='#ffffff';
      if(light){
        root.style.setProperty('--bg','#0b1220'); root.style.setProperty('--paper','#0e1628'); root.style.setProperty('--ink','#e6ecff');
        root.style.setProperty('--muted','#aab7d9'); root.style.setProperty('--brand','#fb7185'); root.style.setProperty('--accent','#fca5a5'); root.style.setProperty('--accent2','#fdba74'); root.style.setProperty('--border','#203054');
      }else{
        root.style.setProperty('--bg','#f7f9fc'); root.style.setProperty('--paper','#ffffff'); root.style.setProperty('--ink','#0f172a');
        root.style.setProperty('--muted','#475569'); root.style.setProperty('--brand','#b91c1c'); root.style.setProperty('--accent','#f87171'); root.style.setProperty('--accent2','#fb923c'); root.style.setProperty('--border','#e2e8f0');
      }
    });
    $('#topbtn').addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));
  </script>
</body>
</html>

