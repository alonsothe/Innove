<!DOCTYPE html>
<html lang="es" data-theme="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Innove | Heat Transfer Exam Suite</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet">

  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$']],
        processEscapes: true,
        tags: 'ams'
      },
      options: {
        renderActions: { addMenu: [] }
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    /* ========================================
       1. VARIABLES & THEME CONFIGURATION
       ======================================== */
    :root {
      /* Dimensions */
      --sidebar-width: 280px;
      --card-radius: 16px;
      --modal-radius: 24px;

      /* Typography */
      --font-sans: 'Inter', sans-serif;
      --font-display: 'Space Grotesk', sans-serif;
      --font-mono: 'JetBrains Mono', monospace;

      /* Animations */
      --ease-out: cubic-bezier(0.215, 0.61, 0.355, 1);
      --duration-normal: 0.4s;
    }

    /* MODO CLARO (POR DEFECTO) */
    [data-theme="light"] {
      --bg-app: #fff7ed; /* Fondo crema c√°lido */
      --bg-sidebar: #ffffff;
      --bg-card: #ffffff;
      --bg-card-hover: #fffaf5;
      --bg-modal: #ffffff;
      --bg-input: #fcf5f0;

      --text-primary: #431407;
      --text-secondary: #78350f;
      --text-tertiary: #a8a29e;

      --border-light: rgba(67, 20, 7, 0.08);
      --border-hover: rgba(67, 20, 7, 0.15);

      /* Heat Accents */
      --accent-primary: #ea580c;   /* Naranja quemado */
      --accent-secondary: #b91c1c; /* Rojo intenso */
      --accent-success: #059669;
      --accent-warning: #d97706;
      --accent-danger: #dc2626;

      --shadow-sm: 0 2px 4px rgba(234, 88, 12, 0.05);
      --shadow-md: 0 8px 24px rgba(234, 88, 12, 0.08);
      --glow-primary: 0 0 20px rgba(234, 88, 12, 0.15);
    }

    /* MODO OSCURO */
    [data-theme="dark"] {
      --bg-app: #0f0a05;
      --bg-sidebar: #14110f;
      --bg-card: #1c1917;
      --bg-card-hover: #292524;
      --bg-modal: #1c1917;
      --bg-input: #292524;

      --text-primary: #fafaf9;
      --text-secondary: #a8a29e;
      --text-tertiary: #57534e;

      --border-light: rgba(255, 255, 255, 0.08);
      --border-hover: rgba(255, 255, 255, 0.15);

      --accent-primary: #f97316;
      --accent-secondary: #ef4444;
      --accent-success: #10b981;
      --accent-warning: #f59e0b;
      --accent-danger: #ef4444;

      --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
      --shadow-md: 0 8px 16px rgba(0, 0, 0, 0.4);
      --glow-primary: 0 0 25px rgba(249, 115, 22, 0.2);
    }

    /* ========================================
       2. RESET & LAYOUT
       ======================================== */
    * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
    
    body {
      font-family: var(--font-sans);
      background-color: var(--bg-app);
      color: var(--text-primary);
      height: 100vh;
      overflow: hidden;
      display: flex;
      transition: background-color var(--duration-normal) var(--ease-out);
    }

    button { border: none; background: none; cursor: pointer; font-family: inherit; }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border-hover); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--text-tertiary); }

    /* ========================================
       3. SIDEBAR
       ======================================== */
    .sidebar {
      width: var(--sidebar-width);
      height: 100%;
      background: var(--bg-sidebar);
      border-right: 1px solid var(--border-light);
      display: flex; flex-direction: column; padding: 24px;
      z-index: 10;
    }

    .brand {
      display: flex; align-items: center; gap: 12px; margin-bottom: 40px; padding-left: 8px;
    }

    .brand-logo {
      width: 36px; height: 36px;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      border-radius: 10px;
      display: grid; place-items: center;
      font-size: 1.4rem;
      box-shadow: var(--glow-primary);
    }

    .brand-text {
      font-family: var(--font-display); font-size: 1.3rem; font-weight: 700;
    }

    .nav-menu { display: flex; flex-direction: column; gap: 8px; flex-grow: 1; }

    .nav-item {
      display: flex; align-items: center; gap: 12px;
      padding: 12px 16px; border-radius: 12px;
      color: var(--text-secondary); font-weight: 500;
      transition: 0.2s;
    }

    .nav-item:hover { background: var(--bg-input); color: var(--text-primary); }
    
    .nav-item.active {
      background: rgba(234, 88, 12, 0.1);
      color: var(--accent-primary);
    }

    .nav-icon { font-size: 1.2rem; width: 24px; text-align: center; }

    /* Stats Footer */
    .sidebar-footer { margin-top: auto; padding-top: 20px; border-top: 1px solid var(--border-light); }
    .stats-card { background: var(--bg-input); padding: 16px; border-radius: 12px; }
    .stat-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.85rem; }
    .progress-bar { width: 100%; height: 6px; background: var(--border-hover); border-radius: 3px; overflow: hidden; }
    .progress-fill { height: 100%; background: var(--accent-primary); width: 0%; transition: width 1s; }

    /* ========================================
       4. MAIN CONTENT
       ======================================== */
    .main-content {
      flex-grow: 1; height: 100%; overflow-y: auto;
      padding: 40px 60px; position: relative;
    }

    .header {
      display: flex; justify-content: space-between; align-items: flex-end;
      margin-bottom: 40px; animation: slideDown 0.6s var(--ease-out);
    }

    .h1 { font-family: var(--font-display); font-size: 2.5rem; font-weight: 700; line-height: 1.1; margin-bottom: 8px; }
    .text-muted { color: var(--text-secondary); max-width: 600px; line-height: 1.6; }

    .theme-btn {
      width: 44px; height: 44px; border-radius: 12px; border: 1px solid var(--border-light);
      display: grid; place-items: center; color: var(--text-secondary); font-size: 1.2rem;
      transition: 0.2s;
    }
    .theme-btn:hover { background: var(--bg-card-hover); border-color: var(--accent-primary); color: var(--accent-primary); }

    /* ========================================
       5. GRID & CARDS
       ======================================== */
    .exercise-grid {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
      gap: 24px; padding-bottom: 60px;
    }

    .exercise-card {
      background: var(--bg-card);
      border: 1px solid var(--border-light);
      border-radius: var(--card-radius);
      padding: 24px;
      display: flex; flex-direction: column;
      transition: 0.3s; cursor: pointer;
      animation: fadeInUp 0.6s var(--ease-out) backwards;
    }

    .exercise-card:hover {
      transform: translateY(-5px);
      border-color: var(--accent-primary);
      box-shadow: var(--shadow-md);
    }

    .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
    
    .badge {
      padding: 4px 10px; border-radius: 6px; font-size: 0.7rem; font-weight: 700;
      text-transform: uppercase; letter-spacing: 0.05em;
    }
    .badge-topic { background: var(--bg-input); color: var(--text-secondary); border: 1px solid var(--border-light); }
    
    /* Difficulty Badges */
    .badge-diff-easy { background: rgba(16, 185, 129, 0.15); color: var(--accent-success); }
    .badge-diff-medium { background: rgba(245, 158, 11, 0.15); color: var(--accent-warning); }
    .badge-diff-hard { background: rgba(239, 68, 68, 0.15); color: var(--accent-danger); }

    .card-id { font-family: var(--font-mono); font-size: 0.75rem; color: var(--text-tertiary); }
    
    .problem-preview {
      font-size: 0.95rem; line-height: 1.6; color: var(--text-primary);
      display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
      flex-grow: 1; margin-bottom: 20px;
    }

    .view-btn {
      font-size: 0.85rem; font-weight: 600; color: var(--accent-primary);
      display: flex; align-items: center; gap: 6px; margin-top: auto;
    }
    .view-btn::after { content: '‚Üí'; transition: transform 0.2s; }
    .exercise-card:hover .view-btn::after { transform: translateX(4px); }

    /* ========================================
       6. MODAL
       ======================================== */
    .modal-backdrop {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(6px);
      z-index: 1000; display: none; justify-content: center; align-items: center;
      opacity: 0; transition: opacity 0.3s;
    }
    .modal-backdrop.active { display: flex; opacity: 1; }

    .modal-content {
      width: 90%; max-width: 900px; height: 85%;
      background: var(--bg-modal); border-radius: var(--modal-radius);
      box-shadow: var(--shadow-md); border: 1px solid var(--border-light);
      display: flex; flex-direction: column; transform: scale(0.95); transition: 0.3s;
    }
    .modal-backdrop.active .modal-content { transform: scale(1); }

    .modal-header {
      padding: 20px 30px; border-bottom: 1px solid var(--border-light);
      display: flex; justify-content: space-between; align-items: center;
    }
    .modal-title { font-family: var(--font-display); font-size: 1.2rem; font-weight: 700; }
    
    .close-btn {
      width: 36px; height: 36px; border-radius: 50%; background: var(--bg-input);
      font-size: 1.2rem; color: var(--text-secondary); transition: 0.2s;
      display: grid; place-items: center;
    }
    .close-btn:hover { background: var(--accent-danger); color: white; transform: rotate(90deg); }

    .modal-body {
      padding: 40px; overflow-y: auto;
      display: grid; grid-template-columns: 1fr 1fr; gap: 40px;
    }

    .section-label {
      font-family: var(--font-mono); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px;
      color: var(--accent-primary); margin-bottom: 12px; display: block;
    }

    .problem-full { font-size: 1.1rem; line-height: 1.7; margin-bottom: 30px; padding-right: 20px; border-right: 1px solid var(--border-light); }

    .step-card {
      background: var(--bg-input); border-radius: 12px; padding: 16px 20px;
      margin-bottom: 16px; border-left: 3px solid var(--accent-primary);
      animation: slideIn 0.4s backwards;
    }
    .step-num { font-family: var(--font-mono); font-size: 0.75rem; color: var(--text-tertiary); margin-bottom: 6px; display: block;}

    .final-ans {
      margin-top: 30px; padding: 20px; text-align: center;
      background: rgba(234, 88, 12, 0.1); border: 1px solid var(--accent-primary); border-radius: 12px;
    }
    .ans-label { color: var(--accent-primary); font-weight: 700; text-transform: uppercase; font-size: 0.8rem; margin-bottom: 8px; display: block; }

    /* Animations */
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

    /* Responsive */
    @media (max-width: 900px) {
      .sidebar { width: 80px; padding: 16px; }
      .brand-text, .nav-text, .stats-card { display: none; }
      .brand { justify-content: center; padding: 0; }
      .nav-item { justify-content: center; padding: 16px; }
      .main-content { padding: 20px; }
      .modal-body { grid-template-columns: 1fr; }
      .problem-full { border-right: none; border-bottom: 1px solid var(--border-light); padding-bottom: 20px; }
    }
  </style>
</head>

<body>

  <aside class="sidebar">
    <div class="brand">
      <div class="brand-logo">üî•</div>
      <span class="brand-text">Innove</span>
    </div>

    <nav class="nav-menu">
      <button class="nav-item active" onclick="filterExercises('all')">
        <span class="nav-icon">üìë</span>
        <span class="nav-text">Todo</span>
      </button>
      <button class="nav-item" onclick="filterExercises('cond')">
        <span class="nav-icon">üß±</span>
        <span class="nav-text">Conducci√≥n</span>
      </button>
      <button class="nav-item" onclick="filterExercises('conv')">
        <span class="nav-icon">üå¨Ô∏è</span>
        <span class="nav-text">Convecci√≥n</span>
      </button>
      <button class="nav-item" onclick="filterExercises('rad')">
        <span class="nav-icon">‚ò¢Ô∏è</span>
        <span class="nav-text">Radiaci√≥n</span>
      </button>
    </nav>

    <div class="sidebar-footer">
      <div class="stats-card">
        <div class="stat-row">
          <span>Completado</span>
          <span id="progress-text">0/15</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
      </div>
    </div>
  </aside>

  <main class="main-content">
    <header class="header">
      <div>
        <h1 class="h1">Transferencia de Calor</h1>
        <p class="text-muted">Banco de ejercicios de examen. Incluye conducci√≥n estacionaria/transitoria, convecci√≥n y radiaci√≥n t√©rmica.</p>
      </div>
      <button class="theme-btn" onclick="toggleTheme()" title="Cambiar Tema">üåó</button>
    </header>

    <div class="exercise-grid" id="grid">
      </div>
  </main>

  <div class="modal-backdrop" id="modal">
    <div class="modal-content">
      <div class="modal-header">
        <div>
          <h2 class="modal-title" id="m-title">T√≠tulo</h2>
          <span class="card-id" id="m-id">ID</span>
        </div>
        <button class="close-btn" onclick="closeModal()">√ó</button>
      </div>
      <div class="modal-body">
        <div>
          <span class="section-label">Enunciado del Problema</span>
          <div class="problem-full" id="m-problem"></div>
        </div>
        <div>
          <span class="section-label">Soluci√≥n Paso a Paso</span>
          <div id="m-steps"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const exercises = [
      // ================= CONDUCCI√ìN =================
      {
        id: "COND-01", category: "cond", difficulty: "Medium", topic: "Pared Compuesta",
        problem: "Un horno tiene una pared de ladrillo ($k_1=1.2$) de 20cm y aislante ($k_2=0.05$). Si $T_{int}=1000^\\circ C$ y $T_{ext}=30^\\circ C$, y la p√©rdida m√°xima es $500 W/m^2$, calcula el espesor m√≠nimo de aislante.",
        steps: [
          "Resistencia ladrillo: $R_1 = L_1/k_1 = 0.2/1.2 = 0.167$.",
          "Resistencia total necesaria: $R_{tot} = \\Delta T / q'' = (1000-30)/500 = 1.94$.",
          "Resistencia aislante: $R_2 = R_{tot} - R_1 = 1.94 - 0.167 = 1.773$.",
          "Espesor aislante: $L_2 = R_2 \\cdot k_2 = 1.773 \\cdot 0.05 = 0.0886 m$."
        ],
        solution: "$$ L_2 \\approx 8.9 \\text{ cm} $$"
      },
      {
        id: "COND-02", category: "cond", difficulty: "Medium", topic: "Radio Cr√≠tico",
        problem: "Un cable de 2mm de di√°metro se a√≠sla con pl√°stico ($k=0.15$). $h_{ext}=20$. ¬øAumenta o disminuye la transferencia de calor al a√±adir aislante?",
        steps: [
          "Radio cr√≠tico: $r_{cr} = k/h = 0.15/20 = 0.0075 m = 7.5mm$.",
          "Radio del cable: $r = 1mm$.",
          "Como $r < r_{cr}$, a√±adir aislante AUMENTA la transferencia de calor hasta llegar a 7.5mm de radio total."
        ],
        solution: "$$ \\text{Aumenta (refrigera mejor)} $$"
      },
      {
        id: "COND-03", category: "cond", difficulty: "Hard", topic: "Generaci√≥n de Calor",
        problem: "Pared plana de espesor $2L=4cm$, $k=20$, con generaci√≥n $\\dot{q}=10^6 W/m^3$. Superficies a $100^\\circ C$. Halla $T_{max}$.",
        steps: [
          "Ecuaci√≥n: $T(x) = \\frac{\\dot{q}L^2}{2k}(1 - x^2/L^2) + T_s$.",
          "M√°xima en el centro ($x=0$).",
          "$T_{max} = \\frac{10^6 (0.02)^2}{2(20)} + 100$.",
          "$T_{max} = 400/40 + 100 = 10 + 100$."
        ],
        solution: "$$ 110^\\circ C $$"
      },
      {
        id: "COND-04", category: "cond", difficulty: "Hard", topic: "Transitorio (Biot)",
        problem: "Esfera de acero ($k=50$) de 1cm se enfr√≠a en aire ($h=100$). Verifica si se puede usar el m√©todo de capacitancia global (Lumped capacitance).",
        steps: [
          "Longitud caracter√≠stica $L_c = V/A = r/3 = 0.005/3 = 0.00167 m$.",
          "N√∫mero de Biot: $Bi = h L_c / k$.",
          "$Bi = (100 \\cdot 0.00167) / 50 = 0.0033$.",
          "Como $Bi < 0.1$, el m√©todo es v√°lido (temperatura uniforme)."
        ],
        solution: "$$ \\text{S√≠, } Bi = 0.0033 $$"
      },
      {
        id: "COND-05", category: "cond", difficulty: "Hard", topic: "S√≥lido Semi-infinito",
        problem: "Suelo a $20^\\circ C$. Superficie baja a $-10^\\circ C$. ¬øProfundidad de congelaci√≥n tras 12h? ($\\alpha = 0.15\\times 10^{-6}$).",
        steps: [
          "Soluci√≥n: $\\frac{T-T_s}{T_i-T_s} = \\text{erf}(x / 2\\sqrt{\\alpha t})$.",
          "$\\frac{0 - (-10)}{20 - (-10)} = 0.333 = \\text{erf}(\\eta)$. Tabla: $\\eta \\approx 0.37$.",
          "$x = 2 \\eta \\sqrt{\\alpha t}$. $t=43200s$.",
          "$x = 2(0.37)\\sqrt{0.00648} \\approx 0.06 m$."
        ],
        solution: "$$ 6 \\text{ cm} $$"
      },
      // ================= CONVECCI√ìN =================
      {
        id: "CONV-01", category: "conv", difficulty: "Medium", topic: "Placa Plana",
        problem: "Aire a 5m/s sobre placa plana. Calcula Reynolds a $x=0.5m$. ($\\nu = 1.5\\times 10^{-5}$). ¬øFlujo laminar o turbulento?",
        steps: [
          "$Re_x = V x / \\nu$.",
          "$Re = (5 \\cdot 0.5) / (1.5\\times 10^{-5})$.",
          "$Re = 2.5 / 0.000015 \\approx 1.66 \\times 10^5$.",
          "Transici√≥n en $5\\times 10^5$. Es Laminar."
        ],
        solution: "$$ Re \\approx 1.66\\times 10^5 \\text{ (Laminar)} $$"
      },
      {
        id: "CONV-02", category: "conv", difficulty: "Hard", topic: "Dittus-Boelter",
        problem: "Agua en tuber√≠a, flujo turbulento calent√°ndose ($n=0.4$). $Re=40000, Pr=5, k=0.6, D=0.02$. Halla $h$.",
        steps: [
          "$Nu = 0.023 Re^{0.8} Pr^{0.4}$.",
          "$Nu = 0.023 (40000)^{0.8} (5)^{0.4} \\approx 0.023(4800)(1.9) \\approx 210$.",
          "$h = Nu \\cdot k / D = 210 \\cdot 0.6 / 0.02$."
        ],
        solution: "$$ h \\approx 6300 \\, W/m^2K $$"
      },
      {
        id: "CONV-03", category: "conv", difficulty: "Medium", topic: "Cilindro Cruzado",
        problem: "Viento sobre cable ($D=2cm$). $Re=13333$. Estima Nu usando $C=0.193, m=0.618$.",
        steps: [
          "$Nu = C Re^m Pr^{1/3}$. Aire $Pr \\approx 0.7$.",
          "$Nu = 0.193 (13333)^{0.618} (0.7)^{0.33}$.",
          "$Nu \\approx 0.193 (355) (0.89) \\approx 61$."
        ],
        solution: "$$ Nu \\approx 61 $$"
      },
      {
        id: "CONV-04", category: "conv", difficulty: "Hard", topic: "Convecci√≥n Natural",
        problem: "Placa vertical caliente. ¬øQu√© par√°metro adimensional determina si es laminar/turbulento?",
        steps: [
          "En convecci√≥n natural, el par√°metro es el N√∫mero de Rayleigh (Ra).",
          "$Ra = Gr \\cdot Pr$.",
          "Criterio: $Ra < 10^9$ es laminar, $Ra > 10^9$ es turbulento."
        ],
        solution: "$$ \\text{N√∫mero de Rayleigh (Ra)} $$"
      },
      {
        id: "CONV-05", category: "conv", difficulty: "Hard", topic: "Eficiencia Aleta",
        problem: "Aleta de aluminio ($k=200$) muy larga. $h=10$, espesor $t=2mm$. Calcula el par√°metro $m$.",
        steps: [
          "$m = \\sqrt{hP / kA_c}$. Para aleta rectangular ancha, $P \\approx 2w, A_c = wt$.",
          "$m = \\sqrt{2h / kt} = \\sqrt{20 / (200 \\cdot 0.002)}$.",
          "$m = \\sqrt{20 / 0.4} = \\sqrt{50} \\approx 7.07$."
        ],
        solution: "$$ m \\approx 7.07 \\, m^{-1} $$"
      },
      // ================= RADIACI√ìN =================
      {
        id: "RAD-01", category: "rad", difficulty: "Easy", topic: "Stefan-Boltzmann",
        problem: "Cuerpo negro esf√©rico ($D=0.1m$) a 800K. Calcula potencia emitida.",
        steps: [
          "√Årea $A = \\pi D^2 = 0.0314 m^2$.",
          "$Q = A \\sigma T^4$. $\\sigma = 5.67\\times 10^{-8}$.",
          "$Q = 0.0314 \\cdot 5.67\\times 10^{-8} \\cdot 4.096\\times 10^{11}$."
        ],
        solution: "$$ Q \\approx 729 \\, W $$"
      },
      {
        id: "RAD-02", category: "rad", difficulty: "Medium", topic: "Factor de Visi√≥n",
        problem: "Esfera peque√±a ($A_1$) dentro de una esfera grande hueca ($A_2$). ¬øCu√°nto vale $F_{22}$?",
        steps: [
          "Regla de la suma: $F_{11} + F_{12} = 1$. Esfera convexa: $F_{11}=0 \\Rightarrow F_{12}=1$.",
          "Reciprocidad: $A_1 F_{12} = A_2 F_{21} \\Rightarrow F_{21} = A_1/A_2$.",
          "Suma para sup 2: $F_{21} + F_{22} = 1$.",
          "$F_{22} = 1 - A_1/A_2$."
        ],
        solution: "$$ 1 - (D_1/D_2)^2 $$"
      },
      {
        id: "RAD-03", category: "rad", difficulty: "Hard", topic: "Escudo Radiaci√≥n",
        problem: "Dos placas paralelas infinitas negras. Se inserta un escudo ($\\, \\epsilon=1$) entre ellas. ¬øCu√°nto se reduce el calor?",
        steps: [
          "Original: $Q_0 = \\sigma(T_1^4 - T_2^4)$.",
          "Con escudo (negro): Se forman 2 resistencias espaciales id√©nticas.",
          "El flujo se reduce exactamente a la mitad porque a√±adimos una resistencia igual en serie."
        ],
        solution: "$$ 50\\% $$"
      },
      {
        id: "RAD-04", category: "rad", difficulty: "Medium", topic: "Intercambiador LMTD",
        problem: "Contraflujo. Entradas: $100, 30$. Salidas: $60, 50$. Halla LMTD.",
        steps: [
          "$\\Delta T_1 = 100 - 50 = 50$.",
          "$\\Delta T_2 = 60 - 30 = 30$.",
          "$LMTD = (50 - 30) / \\ln(50/30) = 20 / 0.51$."
        ],
        solution: "$$ 39.2^\\circ C $$"
      },
      {
        id: "RAD-05", category: "rad", difficulty: "Hard", topic: "Efectividad NTU",
        problem: "$C_{min}=1000, UA=1500$. $NTU = 1.5$. $C_r=0$ (Cambio de fase). Halla efectividad.",
        steps: [
          "Para $C_r = 0$ (condensador/evaporador), la f√≥rmula es simple:",
          "$\\varepsilon = 1 - e^{-NTU}$.",
          "$\\varepsilon = 1 - e^{-1.5} = 1 - 0.223$."
        ],
        solution: "$$ \\varepsilon \\approx 0.777 $$"
      }
    ];

    // DOM Elements
    const grid = document.getElementById('grid');
    const modal = document.getElementById('modal');

    // Render Cards
    function renderGrid(filterType) {
      grid.innerHTML = '';
      const filtered = filterType === 'all' ? exercises : exercises.filter(e => e.category === filterType);
      
      filtered.forEach((ex, i) => {
        const card = document.createElement('article');
        card.className = 'exercise-card';
        card.style.animationDelay = `${i * 0.05}s`;
        card.innerHTML = `
          <div class="card-header">
            <div class="card-badges">
              <span class="badge badge-diff-${ex.difficulty.toLowerCase()}">${ex.difficulty}</span>
              <span class="badge badge-topic">${ex.topic}</span>
            </div>
            <span class="card-id">${ex.id}</span>
          </div>
          <div class="card-body">
            <div class="problem-preview">${ex.problem}</div>
          </div>
          <div class="view-btn">Ver Soluci√≥n</div>
        `;
        card.onclick = () => openModal(ex);
        grid.appendChild(card);
      });
      
      if(window.MathJax) MathJax.typesetPromise();
    }

    // Modal Logic
    function openModal(ex) {
      document.getElementById('m-title').innerText = ex.topic;
      document.getElementById('m-id').innerText = ex.id;
      document.getElementById('m-problem').innerHTML = ex.problem;
      
      const stepsContainer = document.getElementById('m-steps');
      stepsContainer.innerHTML = '';
      
      ex.steps.forEach((step, i) => {
        stepsContainer.innerHTML += `
          <div class="step-card" style="animation-delay: ${i*0.1}s">
            <span class="step-num">PASO ${i+1}</span>
            <div>${step}</div>
          </div>
        `;
      });

      stepsContainer.innerHTML += `
        <div class="final-ans">
          <span class="ans-label">Resultado Final</span>
          <div style="font-size: 1.2rem">${ex.solution}</div>
        </div>
      `;

      modal.classList.add('active');
      if(window.MathJax) MathJax.typesetPromise([modal]);
    }

    function closeModal() { modal.classList.remove('active'); }
    
    function filterExercises(cat) {
      document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
      event.currentTarget.classList.add('active');
      renderGrid(cat);
    }

    function toggleTheme() {
      const html = document.documentElement;
      html.setAttribute('data-theme', html.getAttribute('data-theme') === 'light' ? 'dark' : 'light');
    }

    // Click outside to close
    modal.addEventListener('click', e => { if(e.target === modal) closeModal(); });

    // Init
    renderGrid('all');
    
    // Fake Progress Animation
    setTimeout(() => {
      document.getElementById('progress-fill').style.width = '20%';
      document.getElementById('progress-text').innerText = '3/15';
    }, 500);

  </script>
</body>
</html>
