<!DOCTYPE html>
<html lang="es" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Innove | Heat Transfer Suite</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet">

  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$']],
        processEscapes: true,
        tags: 'ams'
      },
      options: {
        renderActions: { addMenu: [] }
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    /* ========================================
        1. VARIABLES & THEME CONFIGURATION
        ========================================
        */
    :root {
      /* Dimensions */
      --sidebar-width: 280px;
      --header-height: 70px;
      --card-radius: 16px;
      --modal-radius: 24px;

      /* Typography */
      --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
      --font-display: 'Space Grotesk', sans-serif;
      --font-mono: 'JetBrains Mono', monospace;

      /* Animations */
      --ease-out: cubic-bezier(0.215, 0.61, 0.355, 1);
      --ease-in-out: cubic-bezier(0.645, 0.045, 0.355, 1);
      --duration-fast: 0.2s;
      --duration-normal: 0.4s;
      --duration-slow: 0.6s;
    }

    [data-theme="dark"] {
      /* Backgrounds */
      --bg-app: #050505;
      --bg-sidebar: #0a0a0a;
      --bg-card: #111111;
      --bg-card-hover: #161616;
      --bg-modal: #0f0f0f;
      --bg-input: #1a1a1a;

      /* Text */
      --text-primary: #ffffff;
      --text-secondary: #a1a1aa;
      --text-tertiary: #52525b;

      /* Borders */
      --border-light: rgba(255, 255, 255, 0.06);
      --border-hover: rgba(255, 255, 255, 0.12);

      /* Accents (Heat Theme) */
      --accent-primary: #f97316;  /* Orange */
      --accent-secondary: #ef4444; /* Red */
      --accent-success: #10b981;
      --accent-warning: #eab308;
      --accent-danger: #dc2626;

      /* Shadows */
      --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
      --shadow-md: 0 8px 16px rgba(0, 0, 0, 0.4);
      --shadow-lg: 0 24px 48px rgba(0, 0, 0, 0.6);
      --glow-primary: 0 0 20px rgba(249, 115, 22, 0.15);
    }

    [data-theme="light"] {
      /* Backgrounds */
      --bg-app: #fff7ed; /* Warm white */
      --bg-sidebar: #ffffff;
      --bg-card: #ffffff;
      --bg-card-hover: #fffaf5;
      --bg-modal: #ffffff;
      --bg-input: #fcf5f0;

      /* Text */
      --text-primary: #431407;
      --text-secondary: #78350f;
      --text-tertiary: #a8a29e;

      /* Borders */
      --border-light: rgba(67, 20, 7, 0.08);
      --border-hover: rgba(67, 20, 7, 0.15);

      /* Accents */
      --accent-primary: #ea580c;
      --accent-secondary: #b91c1c;
      --accent-success: #059669;
      --accent-warning: #d97706;
      --accent-danger: #dc2626;

      /* Shadows */
      --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 8px 16px rgba(0, 0, 0, 0.08);
      --shadow-lg: 0 24px 48px rgba(0, 0, 0, 0.12);
      --glow-primary: 0 0 20px rgba(234, 88, 12, 0.1);
    }

    /* ========================================
        2. RESET & UTILITIES
        ========================================
        */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      outline: none;
    }

    body {
      font-family: var(--font-sans);
      background-color: var(--bg-app);
      color: var(--text-primary);
      height: 100vh;
      overflow: hidden;
      display: flex;
      transition: background-color var(--duration-normal) var(--ease-out);
    }

    a { text-decoration: none; color: inherit; }
    button { border: none; background: none; cursor: pointer; font-family: inherit; }
    ul { list-style: none; }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border-hover); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--text-tertiary); }

    /* Typography Utilities */
    .h1 { font-family: var(--font-display); font-size: 2.5rem; font-weight: 700; letter-spacing: -0.02em; line-height: 1.1; }
    .h2 { font-family: var(--font-display); font-size: 1.75rem; font-weight: 700; letter-spacing: -0.01em; }
    .text-muted { color: var(--text-secondary); }
    .font-mono { font-family: var(--font-mono); }

    /* ========================================
        3. SIDEBAR NAVIGATION
        ========================================
        */
    .sidebar {
      width: var(--sidebar-width);
      height: 100%;
      background: var(--bg-sidebar);
      border-right: 1px solid var(--border-light);
      display: flex;
      flex-direction: column;
      padding: 24px;
      z-index: 10;
      transition: transform var(--duration-normal) var(--ease-out);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 40px;
      padding-left: 12px;
    }

    .brand-logo {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      border-radius: 10px;
      display: grid;
      place-items: center;
      font-weight: 700;
      color: white;
      font-size: 1.2rem;
      box-shadow: var(--glow-primary);
    }

    .brand-text {
      font-family: var(--font-display);
      font-size: 1.25rem;
      font-weight: 700;
      letter-spacing: -0.02em;
    }

    .nav-menu {
      display: flex;
      flex-direction: column;
      gap: 8px;
      flex-grow: 1;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      border-radius: 12px;
      color: var(--text-secondary);
      font-weight: 500;
      transition: all var(--duration-fast);
    }

    .nav-item:hover {
      background: var(--bg-input);
      color: var(--text-primary);
    }

    .nav-item.active {
      background: rgba(249, 115, 22, 0.1);
      color: var(--accent-primary);
    }

    .nav-icon { width: 20px; height: 20px; opacity: 0.7; font-size: 1.2rem; display: grid; place-items: center; }

    .sidebar-footer {
      margin-top: auto;
      padding-top: 24px;
      border-top: 1px solid var(--border-light);
    }

    .stats-card {
      background: var(--bg-input);
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 16px;
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 0.85rem;
    }

    .progress-bar {
      width: 100%;
      height: 4px;
      background: var(--border-hover);
      border-radius: 2px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: var(--accent-success);
      width: 0%;
      transition: width 1s var(--ease-out);
    }

    /* ========================================
        4. MAIN CONTENT AREA
        ========================================
        */
    .main-content {
      flex-grow: 1;
      height: 100%;
      overflow-y: auto;
      padding: 40px 60px;
      position: relative;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      margin-bottom: 40px;
      animation: slideDown 0.6s var(--ease-out);
    }

    .header-content h1 { margin-bottom: 8px; }
    .header-content p { max-width: 600px; line-height: 1.6; }

    .theme-btn {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      border: 1px solid var(--border-light);
      display: grid;
      place-items: center;
      color: var(--text-secondary);
      transition: all var(--duration-fast);
    }

    .theme-btn:hover {
      background: var(--bg-card-hover);
      color: var(--text-primary);
      border-color: var(--border-hover);
    }

    /* Filter Bar */
    .filter-bar {
      display: flex;
      gap: 12px;
      margin-bottom: 32px;
      overflow-x: auto;
      padding-bottom: 4px;
      animation: fadeIn 0.8s var(--ease-out);
    }

    /* ========================================
        5. EXERCISE GRID & CARDS
        ========================================
        */
    .exercise-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 24px;
      padding-bottom: 60px;
    }

    .exercise-card {
      background: var(--bg-card);
      border: 1px solid var(--border-light);
      border-radius: var(--card-radius);
      padding: 24px;
      display: flex;
      flex-direction: column;
      transition: all var(--duration-fast);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      animation: fadeInUp 0.6s var(--ease-out) backwards;
    }

    .exercise-card:hover {
      transform: translateY(-4px);
      border-color: var(--accent-primary);
      box-shadow: var(--glow-primary);
      background: var(--bg-card-hover);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 16px;
    }

    .card-badges { display: flex; gap: 8px; flex-wrap: wrap; }

    .badge {
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .badge-diff-easy { background: rgba(16, 185, 129, 0.1); color: var(--accent-success); }
    .badge-diff-medium { background: rgba(234, 179, 8, 0.1); color: var(--accent-warning); }
    .badge-diff-hard { background: rgba(239, 68, 68, 0.1); color: var(--accent-danger); }
    
    .badge-topic {
      background: var(--bg-input);
      color: var(--text-secondary);
      border: 1px solid var(--border-light);
    }

    .card-id { font-family: var(--font-mono); font-size: 0.75rem; color: var(--text-tertiary); }

    .card-body { flex-grow: 1; margin-bottom: 20px; }

    .problem-preview {
      font-size: 1rem;
      line-height: 1.6;
      color: var(--text-primary);
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 16px;
      border-top: 1px solid var(--border-light);
    }

    .view-sol-btn {
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--accent-primary);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .view-sol-btn::after { content: '‚Üí'; transition: transform 0.2s; }
    .exercise-card:hover .view-sol-btn::after { transform: translateX(4px); }

    /* ========================================
        6. FULL SCREEN MODAL
        ========================================
        */
    .modal-backdrop {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(8px);
      z-index: 1000;
      display: none;
      opacity: 0;
      transition: opacity var(--duration-normal);
    }

    .modal-backdrop.active { display: flex; justify-content: center; align-items: center; opacity: 1; }

    .modal-content {
      width: 90%; max-width: 1000px; height: 90%;
      background: var(--bg-modal);
      border-radius: var(--modal-radius);
      border: 1px solid var(--border-light);
      box-shadow: var(--shadow-lg);
      display: flex; flex-direction: column;
      transform: scale(0.95) translateY(20px);
      transition: transform var(--duration-normal) var(--ease-out);
      overflow: hidden;
    }

    .modal-backdrop.active .modal-content { transform: scale(1) translateY(0); }

    .modal-header {
      padding: 24px 32px;
      border-bottom: 1px solid var(--border-light);
      display: flex; justify-content: space-between; align-items: center;
      background: var(--bg-card);
    }

    .modal-title-group h2 { margin-bottom: 4px; }
    .modal-subtitle { font-family: var(--font-mono); color: var(--text-tertiary); font-size: 0.9rem; }

    .close-modal-btn {
      width: 40px; height: 40px; border-radius: 50%;
      background: var(--bg-input); color: var(--text-secondary);
      display: grid; place-items: center; font-size: 1.2rem;
      transition: all 0.2s;
    }

    .close-modal-btn:hover { background: var(--accent-danger); color: white; transform: rotate(90deg); }

    .modal-body {
      flex-grow: 1; overflow-y: auto; padding: 40px;
      display: grid; grid-template-columns: 1fr 1fr; gap: 40px;
    }

    .problem-section { padding-right: 40px; border-right: 1px solid var(--border-light); }
    .solution-section { padding-left: 10px; }

    .section-label {
      font-family: var(--font-mono); font-size: 0.75rem;
      text-transform: uppercase; letter-spacing: 0.1em;
      color: var(--accent-primary); margin-bottom: 16px; display: block;
    }

    .problem-text { font-size: 1.25rem; line-height: 1.7; margin-bottom: 32px; }

    .step-card {
      background: var(--bg-input);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      border-left: 3px solid var(--accent-secondary);
      animation: slideInRight 0.5s var(--ease-out) backwards;
    }

    .step-number {
      font-family: var(--font-mono); font-size: 0.8rem;
      color: var(--text-secondary); margin-bottom: 8px; display: block;
    }

    .final-answer {
      margin-top: 40px; padding: 24px;
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid var(--accent-success);
      border-radius: 12px;
      text-align: center;
    }

    .final-label {
      color: var(--accent-success); font-weight: 700;
      text-transform: uppercase; font-size: 0.8rem;
      margin-bottom: 12px; display: block;
    }

    /* ========================================
        7. ANIMATIONS
        ========================================
        */
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideInRight { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

    /* Responsive */
    @media (max-width: 1024px) {
      .sidebar { width: 80px; padding: 16px; }
      .brand-text, .nav-text, .stats-card { display: none; }
      .brand { justify-content: center; padding: 0; }
      .nav-item { justify-content: center; padding: 16px; }
      .main-content { padding: 20px; }
      .modal-body { grid-template-columns: 1fr; }
      .problem-section { border-right: none; border-bottom: 1px solid var(--border-light); padding-bottom: 30px; margin-bottom: 30px; padding-right: 0; }
      .solution-section { padding-left: 0; }
    }
  </style>
</head>

<body>

  <aside class="sidebar">
    <div class="brand">
      <div class="brand-logo">Q</div>
      <span class="brand-text">Innove</span>
    </div>

    <nav class="nav-menu">
      <button class="nav-item active" onclick="filterExercises('all')">
        <span class="nav-icon">üî•</span>
        <span class="nav-text">Todo</span>
      </button>
      <button class="nav-item" onclick="filterExercises('cond')">
        <span class="nav-icon">üß±</span>
        <span class="nav-text">Conducci√≥n</span>
      </button>
      <button class="nav-item" onclick="filterExercises('conv')">
        <span class="nav-icon">üí®</span>
        <span class="nav-text">Convecci√≥n</span>
      </button>
      <button class="nav-item" onclick="filterExercises('rad')">
        <span class="nav-icon">‚ò¢Ô∏è</span>
        <span class="nav-text">Radiaci√≥n/HX</span>
      </button>
    </nav>

    <div class="sidebar-footer">
      <div class="stats-card">
        <div class="stat-row">
          <span>Progreso</span>
          <span id="progress-text">0/15</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
      </div>
    </div>
  </aside>

  <main class="main-content">
    <header class="header">
      <div class="header-content">
        <h1 class="h1">Transferencia de Calor</h1>
        <p class="text-muted">Banco de ejercicios de examen. Conducci√≥n, convecci√≥n, radiaci√≥n e intercambiadores de calor.</p>
      </div>
      <div class="header-actions">
        <button class="theme-btn" onclick="toggleTheme()">‚òÄ</button>
      </div>
    </header>

    <div class="exercise-grid" id="grid">
      </div>
  </main>

  <div class="modal-backdrop" id="modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title-group">
          <h2 class="h2" id="modal-title">T√≠tulo</h2>
          <span class="modal-subtitle" id="modal-id">ID</span>
        </div>
        <button class="close-modal-btn" onclick="closeModal()">√ó</button>
      </div>
      <div class="modal-body">
        <div class="problem-section">
          <span class="section-label">Enunciado</span>
          <div class="problem-text" id="modal-problem"></div>
        </div>
        <div class="solution-section" id="modal-steps">
          <span class="section-label">Soluci√≥n Paso a Paso</span>
          </div>
      </div>
    </div>
  </div>

  <script>
    const exercises = [
      // ============================================================
      // CONDUCCI√ìN (5 EJERCICIOS)
      // ============================================================
      {
        id: "COND-01",
        category: "cond",
        topic: "Pared Compuesta",
        difficulty: "Medium",
        problem: "Un horno tiene una pared de ladrillo ($k_1=1.2 \\, W/mK$, $L_1=0.2m$) y una capa de aislante ($k_2=0.05 \\, W/mK$). Si $T_{int}=1000^\\circ C$, $T_{ext}=30^\\circ C$ y la p√©rdida m√°xima permitida es $500 \\, W/m^2$, calcula el espesor m√≠nimo de aislante ($L_2$).",
        steps: [
          "Circuito t√©rmico en serie: $R_{total} = R_{ladrillo} + R_{aislante}$.",
          "$R_{lad} = \\frac{L_1}{k_1} = \\frac{0.2}{1.2} \\approx 0.167 \\, m^2K/W$.",
          "Sabemos que $q'' = \\frac{\\Delta T}{R_{total}} \\Rightarrow R_{total} = \\frac{1000-30}{500} = 1.94 \\, m^2K/W$.",
          "$R_{aisl} = R_{total} - R_{lad} = 1.94 - 0.167 = 1.773 \\, m^2K/W$.",
          "Espesor aislante: $L_2 = R_{aisl} \\cdot k_2 = 1.773 \\cdot 0.05$."
        ],
        solution: "$$ L_2 \\approx 0.089 \\, m \\quad (8.9 \\, cm) $$"
      },
      {
        id: "COND-02",
        category: "cond",
        topic: "Radio Cr√≠tico",
        difficulty: "Medium",
        problem: "Un cable el√©ctrico de 2mm de di√°metro se recubre con pl√°stico ($k=0.15 \\, W/mK$) expuesto a aire con $h=20 \\, W/m^2K$. Determina si a√±adir aislamiento mejora la refrigeraci√≥n.",
        steps: [
          "Radio cr√≠tico de aislamiento: $r_{cr} = \\frac{k_{aisl}}{h_{ext}}$.",
          "$r_{cr} = \\frac{0.15}{20} = 0.0075 \\, m = 7.5 \\, mm$.",
          "Radio del cable $r_{cable} = 1 \\, mm$.",
          "Como $r_{cable} < r_{cr}$, a√±adir aislamiento aumenta el √°rea superficial m√°s r√°pido que la resistencia conductiva, mejorando la transferencia de calor hasta alcanzar los 7.5mm."
        ],
        solution: "$$ \\text{S√≠, mejora hasta } r=7.5mm $$"
      },
      {
        id: "COND-03",
        category: "cond",
        topic: "Generaci√≥n Interna",
        difficulty: "Hard",
        problem: "Una pared plana de espesor $2L=4cm$ y $k=20 W/mK$ genera calor volum√©trico $\\dot{q}=10^6 W/m^3$. Superficies a $T_s = 100^\\circ C$. Halla la temperatura m√°xima en el centro.",
        steps: [
          "Ecuaci√≥n de difusi√≥n 1D con generaci√≥n: $\\frac{d^2T}{dx^2} + \\frac{\\dot{q}}{k} = 0$.",
          "Soluci√≥n perfil parab√≥lico: $T(x) = \\frac{\\dot{q}L^2}{2k}(1 - \\frac{x^2}{L^2}) + T_s$.",
          "M√°xima en $x=0$. $L=0.02m$.",
          "$T_{max} = T(0) = \\frac{10^6 (0.02)^2}{2(20)} + 100$.",
          "$T_{max} = \\frac{400}{40} + 100 = 10 + 100$."
        ],
        solution: "$$ T_{max} = 110^\\circ C $$"
      },
      {
        id: "COND-04",
        category: "cond",
        topic: "Transitorio (Lumped)",
        difficulty: "Medium",
        problem: "Una bola de acero ($k=50, \\rho=7800, c=450$) de 1cm de di√°metro a $300^\\circ C$ se enfr√≠a en aire a $25^\\circ C$ ($h=100$). Verifica el m√©todo de capacitancia global y calcula el tiempo para llegar a $100^\\circ C$.",
        steps: [
          "Longitud caracter√≠stica $L_c = V/A = r/3 = 0.005/3 \\approx 0.00167 m$.",
          "N√∫mero de Biot: $Bi = \\frac{h L_c}{k} = \\frac{100 \\cdot 0.00167}{50} \\approx 0.0033$.",
          "Como $Bi < 0.1$, el m√©todo de capacitancia global es v√°lido.",
          "Constante de tiempo $\\tau = \\frac{\\rho V c}{h A} = \\frac{\\rho (L_c) c}{h} = \\frac{7800 \\cdot 0.00167 \\cdot 450}{100} = 58.6 \\, s$.",
          "$\\frac{T-T_\\infty}{T_i - T_\\infty} = e^{-t/\\tau} \\Rightarrow \\frac{100-25}{300-25} = e^{-t/58.6}$.",
          "$0.2727 = e^{-t/58.6} \\Rightarrow t = -58.6 \\ln(0.2727)$."
        ],
        solution: "$$ t \\approx 76.1 \\, s $$"
      },
      {
        id: "COND-05",
        category: "cond",
        topic: "S√≥lido Semi-infinito",
        difficulty: "Hard",
        problem: "El suelo ($k=0.5, \\alpha=0.15 \\times 10^{-6} m^2/s$) est√° a $20^\\circ C$. De repente la superficie baja a $-10^\\circ C$. ¬øA qu√© profundidad se congela ($0^\\circ C$) tras 12 horas?",
        steps: [
          "Modelo s√≥lido semi-infinito con T constante en superficie.",
          "$\\frac{T(x,t) - T_s}{T_i - T_s} = \\text{erf}\\left( \\frac{x}{2\\sqrt{\\alpha t}} \\right)$.",
          "$\\frac{0 - (-10)}{20 - (-10)} = \\frac{10}{30} = 0.333 = \\text{erf}(\\eta)$.",
          "De tablas, $\\text{erf}(0.37) \\approx 0.333 \\Rightarrow \\eta = 0.37$.",
          "$x = 2\\eta \\sqrt{\\alpha t}$. Tiempo $t = 12 \\times 3600 = 43200 s$.",
          "$x = 2(0.37) \\sqrt{0.15\\times 10^{-6} \\cdot 43200} = 0.74 \\sqrt{0.00648}$."
        ],
        solution: "$$ x \\approx 0.06 \\, m \\quad (6 \\, cm) $$"
      },
      
      // ============================================================
      // CONVECCI√ìN (5 EJERCICIOS)
      // ============================================================
      {
        id: "CONV-01",
        category: "conv",
        topic: "Placa Plana (Laminar)",
        difficulty: "Medium",
        problem: "Aire a $25^\\circ C$ fluye a $5 m/s$ sobre una placa a $75^\\circ C$. Calcula el coeficiente $h$ promedio a 0.5m del borde. ($\\nu = 1.6\\times 10^{-5} m^2/s, k=0.026$)",
        steps: [
          "Reynolds: $Re_x = \\frac{V x}{\\nu} = \\frac{5 \\cdot 0.5}{1.6\\times 10^{-5}} = 1.56\\times 10^5$.",
          "Como $Re < 5\\times 10^5$, el flujo es laminar.",
          "Correlaci√≥n Nusselt local: $Nu_x = 0.332 Re^{1/2} Pr^{1/3}$. (Asumir Pr aprox 0.7)",
          "Nusselt promedio $\\overline{Nu}_L = 2 Nu_{x=L} = 0.664 Re_L^{1/2} Pr^{1/3}$.",
          "$\\overline{Nu} = 0.664 \\sqrt{156000} (0.7)^{1/3} \\approx 233$.",
          "$\\overline{h} = \\frac{\\overline{Nu} k}{L} = \\frac{233 \\cdot 0.026}{0.5}$."
        ],
        solution: "$$ \\overline{h} \\approx 12.1 \\, W/m^2K $$"
      },
      {
        id: "CONV-02",
        category: "conv",
        topic: "Flujo en Tuber√≠a",
        difficulty: "Hard",
        problem: "Agua fluye por un tubo ($D=0.02m$) a $0.5 kg/s$. Calcula $h$ usando Dittus-Boelter ($n=0.4$). Propiedades a temp media: $\\mu=8\\times 10^{-4}, k=0.6, Pr=5$.",
        steps: [
          "Velocidad o Reynolds directo: $Re_D = \\frac{4 \\dot{m}}{\\pi D \\mu}$.",
          "$Re_D = \\frac{4(0.5)}{\\pi(0.02)(8\\times 10^{-4})} = \\frac{2}{5.02\\times 10^{-5}} \\approx 39800$.",
          "Flujo turbulento ($Re > 10000$). Usamos Dittus-Boelter.",
          "$Nu_D = 0.023 Re^{0.8} Pr^{0.4}$.",
          "$Nu_D = 0.023 (39800)^{0.8} (5)^{0.4} \\approx 0.023(4800)(1.9) \\approx 210$.",
          "$h = \\frac{Nu k}{D} = \\frac{210 \\cdot 0.6}{0.02}$."
        ],
        solution: "$$ h \\approx 6300 \\, W/m^2K $$"
      },
      {
        id: "CONV-03",
        category: "conv",
        topic: "Cilindro Cruzado",
        difficulty: "Medium",
        problem: "Viento a $10 m/s$ incide sobre un cable de alta tensi√≥n ($D=2cm$). Estima el n√∫mero de Nusselt usando la correlaci√≥n $Nu = C Re^m Pr^{1/3}$. (Para este Re, $C=0.193, m=0.618$). Aire: $\\nu=1.5\\times 10^{-5}$.",
        steps: [
          "Reynolds: $Re = \\frac{VD}{\\nu} = \\frac{10 \\cdot 0.02}{1.5\\times 10^{-5}} = 13333$.",
          "Aplicamos correlaci√≥n de Hilpert: $Nu = 0.193 (13333)^{0.618} (0.7)^{1/3}$.",
          "$13333^{0.618} \\approx 355$.",
          "$Nu = 0.193 (355) (0.89) \\approx 61$."
        ],
        solution: "$$ Nu \\approx 61 $$"
      },
      {
        id: "CONV-04",
        category: "conv",
        topic: "Convecci√≥n Natural",
        difficulty: "Hard",
        problem: "Una placa vertical de 1m de altura a $50^\\circ C$ en aire a $20^\\circ C$. Calcula el n√∫mero de Rayleigh.",
        steps: [
          "Temperatura de pel√≠cula $T_f = (50+20)/2 = 35^\\circ C = 308 K$.",
          "$\\beta = 1/T_f = 1/308 K^{-1}$.",
          "$Ra_L = \\frac{g \\beta (T_s - T_\\infty) L^3}{\\nu \\alpha}$.",
          "Propiedades aire 308K (aprox): $\\nu=1.6\\times 10^{-5}, \\alpha=2.3\\times 10^{-5}$.",
          "$Ra = \\frac{9.8 (1/308) (30) (1)^3}{(1.6\\times 10^{-5})(2.3\\times 10^{-5})} = \\frac{0.95}{3.68\\times 10^{-10}}$."
        ],
        solution: "$$ Ra \\approx 2.58 \\times 10^9 $$"
      },
      {
        id: "CONV-05",
        category: "conv",
        topic: "Aleta de Enfriamiento",
        difficulty: "Hard",
        problem: "Una aleta de aluminio ($k=200$) de secci√≥n rectangular infinita (muy larga) tiene base a $100^\\circ C$ y ambiente a $25^\\circ C$ ($h=10$). Per√≠metro $P$, √Årea $A_c$. Calcula temperatura a $x=5cm$.",
        steps: [
          "Modelo aleta infinita: $\\frac{T(x)-T_\\infty}{T_b-T_\\infty} = e^{-mx}$.",
          "Par√°metro $m = \\sqrt{\\frac{hP}{kA_c}}$. Asumimos aleta delgada espesor $t=2mm$, ancho $w=10cm$.",
          "$P \\approx 2w = 0.2m, A_c = wt = 0.0002m^2$.",
          "$m = \\sqrt{\\frac{10 \\cdot 0.2}{200 \\cdot 0.0002}} = \\sqrt{\\frac{2}{0.04}} = \\sqrt{50} \\approx 7.07 m^{-1}$.",
          "$T(0.05) = 25 + (100-25) e^{-7.07 \\cdot 0.05} = 25 + 75 e^{-0.35}$."
        ],
        solution: "$$ T \\approx 77.8^\\circ C $$"
      },

      // ============================================================
      // RADIACI√ìN & INTERCAMBIADORES (5 EJERCICIOS)
      // ============================================================
      {
        id: "RAD-01",
        category: "rad",
        topic: "Cuerpo Negro",
        difficulty: "Easy",
        problem: "Una esfera de 10cm de di√°metro act√∫a como cuerpo negro a $800K$. Calcula la potencia emisiva total.",
        steps: [
          "Ley de Stefan-Boltzmann: $E = \\sigma T^4$.",
          "Potencia $Q = A \\sigma T^4$. √Årea esfera $A = 4\\pi r^2 = \\pi D^2 = \\pi (0.1)^2 = 0.0314 m^2$.",
          "$\\sigma = 5.67 \\times 10^{-8} W/m^2K^4$.",
          "$Q = 0.0314 \\cdot 5.67\\times 10^{-8} \\cdot (800)^4$.",
          "$800^4 = 4.096 \\times 10^{11}$.",
          "$Q = 0.0314 \\cdot 5.67 \\cdot 4096 \\approx 729 W$."
        ],
        solution: "$$ Q \\approx 729 \\, W $$"
      },
      {
        id: "RAD-02",
        category: "rad",
        topic: "Factor de Forma",
        difficulty: "Medium",
        problem: "Dos discos paralelos coaxiales de di√°metro D separados una distancia L=D. Halla $F_{12}$ usando gr√°ficas o f√≥rmulas (aprox).",
        steps: [
          "Para discos paralelos con $R_1 = R_2 = R$ y $L = 2R$.",
          "Par√°metros: $R/L = 0.5$.",
          "F√≥rmula compleja o lectura de gr√°fica: $S = 1 + \\frac{1+R_2^2}{R_1^2}$.",
          "Valor t√≠pico para discos iguales separados por su di√°metro: $F_{12} \\approx 0.17$."
        ],
        solution: "$$ F_{12} \\approx 0.17 $$"
      },
      {
        id: "RAD-03",
        category: "rad",
        topic: "Escudo de Radiaci√≥n",
        difficulty: "Hard",
        problem: "Dos placas infinitas ($\\, \\epsilon=0.8$) a $T_1=1000K$ y $T_2=500K$. Se coloca un escudo ($\\, \\epsilon_s=0.1$) entre ellas. Calcula la reducci√≥n de flujo de calor.",
        steps: [
          "Sin escudo: $q_{12} = \\frac{\\sigma(T_1^4 - T_2^4)}{\\frac{1}{\\epsilon} + \\frac{1}{\\epsilon} - 1} = \\frac{\\sigma(T^4)}{2/0.8 - 1} = \\frac{\\sigma \\Delta T^4}{1.5}$.",
          "Con escudo: Se forman dos resistencias en serie. Resistencia total $\\approx$ Suma de resistencias.",
          "Resistencia adicional del escudo (muy alta por bajo $\\epsilon$): $\\frac{1-\\epsilon_s}{\\epsilon_s} \\times 2$ lados.",
          "C√°lculo aproximado: $q_{escudo} = \\frac{\\sigma(T_1^4 - T_2^4)}{R_{eq}}$.",
          "La relaci√≥n es aprox $\\frac{1}{N+1}$ si las emisividades fueran iguales, pero aqu√≠ el escudo tiene $\\epsilon$ muy bajo, reduciendo dr√°sticamente el flujo."
        ],
        solution: "$$ \\text{Reducci√≥n } > 90\\% $$"
      },
      {
        id: "HX-01",
        category: "rad",
        topic: "Intercambiador LMTD",
        difficulty: "Medium",
        problem: "Intercambiador contraflujo. Aceite entra a 100 y sale a 60. Agua entra a 30 y sale a 50. Calcula la LMTD.",
        steps: [
          "Diferencias de temperatura en extremos:",
          "$\\Delta T_1 = T_{h,in} - T_{c,out} = 100 - 50 = 50$.",
          "$\\Delta T_2 = T_{h,out} - T_{c,in} = 60 - 30 = 30$.",
          "LMTD $\\Delta T_{lm} = \\frac{\\Delta T_1 - \\Delta T_2}{\\ln(\\Delta T_1 / \\Delta T_2)}$.",
          "$\\Delta T_{lm} = \\frac{50 - 30}{\\ln(50/30)} = \\frac{20}{\\ln(1.66)} = \\frac{20}{0.51}$."
        ],
        solution: "$$ \\Delta T_{lm} \\approx 39.2^\\circ C $$"
      },
      {
        id: "HX-02",
        category: "rad",
        topic: "M√©todo NTU",
        difficulty: "Hard",
        problem: "Se tiene $C_{min} = 1000 W/K$ y $C_{max} = 2000 W/K$. $UA = 1500 W/K$. Calcula la efectividad $\\varepsilon$ para contraflujo.",
        steps: [
          "Relaci√≥n de capacidades $C_r = C_{min} / C_{max} = 0.5$.",
          "N√∫mero de Unidades de Transferencia $NTU = UA / C_{min} = 1500/1000 = 1.5$.",
          "F√≥rmula efectividad contraflujo: $\\varepsilon = \\frac{1 - e^{-NTU(1-C_r)}}{1 - C_r e^{-NTU(1-C_r)}}$.",
          "Exponente: $-1.5(0.5) = -0.75$. $e^{-0.75} \\approx 0.472$.",
          "$\\varepsilon = \\frac{1 - 0.472}{1 - 0.5(0.472)} = \\frac{0.528}{0.764}$."
        ],
        solution: "$$ \\varepsilon \\approx 0.69 \\quad (69\\%) $$"
      }
    ];

    const modal = document.getElementById('modal');
    let currentFilter = 'all';

    function renderGrid(data) {
      const grid = document.getElementById('grid');
      grid.innerHTML = data.map((ex, index) => `
  <article class="exercise-card" style="animation-delay: ${index * 0.05}s" onclick="openModal('${ex.id}')">
    <div class="card-header">
      <div class="card-badges">
        <span class="badge badge-diff-${ex.difficulty.toLowerCase()}">${ex.difficulty}</span>
        <span class="badge badge-topic">${ex.topic}</span>
      </div>
      <span class="card-id">${ex.id}</span>
    </div>
    <div class="card-body">
      <div class="problem-preview">${ex.problem}</div>
    </div>
    <div class="card-footer">
      <span class="view-sol-btn">Ver Soluci√≥n Completa</span>
    </div>
  </article>
  `).join('');

      if (window.MathJax) MathJax.typesetPromise([grid]);
    }

    function openModal(id) {
      const ex = exercises.find(e => e.id === id);
      if (!ex) return;

      document.getElementById('modal-title').textContent = ex.topic;
      document.getElementById('modal-id').textContent = ex.id;
      document.getElementById('modal-problem').innerHTML = ex.problem;

      const stepsContainer = document.getElementById('modal-steps');
      stepsContainer.innerHTML = '<span class="section-label">Soluci√≥n Paso a Paso</span>';

      ex.steps.forEach((step, i) => {
        stepsContainer.innerHTML += `
  <div class="step-card" style="animation-delay: ${i * 0.1}s">
    <span class="step-number">PASO ${i + 1}</span>
    <div class="step-content">${step}</div>
  </div>
  `;
      });

      stepsContainer.innerHTML += `
  <div class="final-answer">
    <span class="final-label">Resultado Final</span>
    <div class="final-math">${ex.solution}</div>
  </div>
  `;

      modal.classList.add('active');
      if (window.MathJax) MathJax.typesetPromise([modal]);
    }

    function closeModal() {
      modal.classList.remove('active');
    }

    function filterExercises(cat) {
      currentFilter = cat;
      document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('active'));
      event.currentTarget.classList.add('active');
      const filtered = cat === 'all' ? exercises : exercises.filter(e => e.category === cat);
      renderGrid(filtered);
    }

    function toggleTheme() {
      const html = document.documentElement;
      html.setAttribute('data-theme', html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
    }

    // Update Progress
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    // Simulating progress for demo
    setTimeout(() => {
      progressFill.style.width = '20%';
      progressText.textContent = '3/15';
    }, 1000);

    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal();
    });

    // Initial Render
    renderGrid(exercises);

  </script>
</body>

</html>
