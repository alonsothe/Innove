<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Polinomios â€” TeorÃ­a y ejercicios (ESO y Bachillerato)</title>
<meta name="color-scheme" content="light dark" />
<style>
  :root{
    --bg:#f7f9fc; --paper:#ffffff; --ink:#121826; --muted:#48536b;
    --brand:#2563eb; --accent:#0ea5e9; --accent2:#22c55e;
    --border:#d9e1f2; --shadow:0 8px 28px rgba(16,24,40,.08);
    --radius:16px; --maxw:74ch; --base:18px; --lh:1.85;
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg:#0e1424; --paper:#101a34; --ink:#eaf2ff; --muted:#aab7d9;
      --brand:#60a5fa; --accent:#7dd3fc; --accent2:#34d399;
      --border:#203054; --shadow:0 10px 26px rgba(0,0,0,.35);
    }
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    font-size:var(--base); line-height:var(--lh); color:var(--ink);
    background:radial-gradient(1000px 700px at 80% -10%, #ddecff 0%, transparent 60%),
               radial-gradient(900px 600px at 10% 110%, #e2f2ff 0%, transparent 65%), var(--bg);
  }
  .progress{position:fixed; inset:0 0 auto 0; height:4px; width:0; z-index:70;
    background:linear-gradient(90deg,var(--accent),var(--accent2))}
  .topbar{position:sticky; top:0; z-index:60; backdrop-filter:blur(10px) saturate(140%);
    background:color-mix(in oklab, var(--paper) 86%, transparent); border-bottom:1px solid var(--border);
    box-shadow:var(--shadow)}
  .wrap{max-width:1200px; margin:0 auto; padding:10px 16px}
  .brand{display:flex; align-items:center; gap:12px; text-decoration:none; color:inherit; font-weight:900}
  .badge{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(135deg,var(--brand),color-mix(in oklab,var(--brand) 45%,white 25%));color:#fff}
  .brand-title{font-size:clamp(20px,3.6vw,28px);margin:0}
  .reader{display:flex;align-items:center;gap:8px;flex-wrap:wrap;border:1px solid var(--border);border-radius:12px;padding:8px;background:color-mix(in oklab,var(--paper) 80%, transparent)}
  .btn{border:1px solid var(--border);background:var(--paper);color:inherit;padding:8px 12px;border-radius:12px;font-weight:800;cursor:pointer}
  .btn.small{padding:6px 10px;font-weight:700}
  .levels{display:flex;gap:8px;padding:8px 2px 10px;overflow:auto;scrollbar-width:thin}
  .pill{border:1px solid var(--border);background:color-mix(in oklab,var(--paper) 88%, transparent);color:inherit;border-radius:14px;padding:8px 12px;font-weight:800;white-space:nowrap;cursor:pointer}
  .pill[aria-selected="true"]{background:color-mix(in oklab,var(--brand) 22%, var(--paper));border-color:color-mix(in oklab,var(--brand) 60%, var(--border));color:#fff;box-shadow:0 10px 22px color-mix(in oklab,var(--brand) 20%, transparent)}
  main{max-width:1200px;margin:0 auto;padding:16px}
  .paper{max-width:var(--maxw);margin:10px auto 30px;padding:20px clamp(16px,3vw,26px);background:var(--paper);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
  h1,h2,h3{color:color-mix(in oklab,var(--ink),var(--brand) 10%)}
  h1{font-size:clamp(28px,5vw,40px);line-height:1.2;margin:.4em 0 .2em}
  h2{font-size:clamp(22px,4vw,28px);line-height:1.28;margin:1.2em 0 .6em}
  h3{font-size:clamp(18px,3vw,22px);line-height:1.35;margin:1em 0 .4em}
  p{margin:.7em 0} ul,ol{margin:.6em 0 .8em 1.2em} li{margin:.25em 0}
  .lead{color:var(--muted)}
  .callout{background:color-mix(in oklab,var(--paper) 85%, var(--bg));border:1px solid var(--border);border-left:6px solid var(--accent);padding:12px 14px;border-radius:12px;margin:12px 0}
  .toc{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:8px;background:color-mix(in oklab,var(--paper) 70%, transparent);padding:12px;border:1px solid var(--border);border-radius:12px}
  .toc a{text-decoration:none;color:color-mix(in oklab,var(--brand) 80%, var(--ink))}
  section.level{display:none} section.level[data-active]{display:block}
  .topbtn{position:fixed;right:16px;bottom:20px;z-index:55;background:var(--brand);color:#fff;border:none;border-radius:999px;padding:10px 14px;font-weight:800;cursor:pointer;box-shadow:var(--shadow);display:none}
  .topbtn.show{display:block}
  /* === Bloques de ejemplos/ejercicios === */
  .examples{background:color-mix(in oklab,var(--paper) 88%, var(--bg)); border:1px solid var(--border); border-radius:12px; padding:12px 14px; margin:12px 0}
  .examples h4{margin:.2em 0 .6em; font-size:1.05em}
  details{background:color-mix(in oklab,var(--paper) 94%, transparent); border:1px dashed var(--border); border-radius:10px; padding:8px 10px; margin:6px 0}
  summary{cursor:pointer; font-weight:800}
  code.kbd{background:color-mix(in oklab,var(--paper) 82%, transparent); padding:2px 6px; border-radius:8px; font-weight:800}
  .grid2{display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:12px}
  .gen{display:flex; gap:6px; flex-wrap:wrap}
  input[type="number"], input[type="text"]{padding:8px 10px; border:1px solid var(--border); border-radius:10px; background:var(--paper); color:inherit; width:120px}
  .ok{color:color-mix(in oklab, var(--accent2) 80%, var(--ink))}
  .bad{color:#ef4444}
</style>
</head>
<body>
  <div class="progress" id="progress"></div>
  <div class="topbar">
    <div class="wrap" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
      <a class="brand" href="#"><span class="badge">ğ’«</span><span class="brand-title">Polinomios â€” TeorÃ­a por niveles</span></a>
      <div class="reader">
        <button class="btn small" id="fs-down" title="Reducir letra">Aâˆ’</button>
        <button class="btn small" id="fs-up" title="Aumentar letra">A+</button>
        <button class="btn small" id="width-down" title="Reducir ancho de lectura">â‡¤</button>
        <button class="btn small" id="width-up" title="Ampliar ancho de lectura">â‡¥</button>
        <button class="btn" id="theme-toggle" title="Modo claro/oscuro">â˜€ï¸/ğŸŒ™</button>
      </div>
    </div>
    <div class="wrap">
      <nav class="levels" id="levelBar" role="tablist" aria-label="Nivel">
        <button class="pill" data-level="eso" role="tab" aria-selected="true">ESO</button>
        <button class="pill" data-level="bach" role="tab" aria-selected="false">Bachillerato</button>
      </nav>
    </div>
  </div>

  <main>
    <!-- ===== ESO ===== -->
    <section id="sec-eso" class="paper level" data-active>
      <h1>ESO â€” Polinomios: conceptos y operaciones</h1>
      <p class="lead">Construimos polinomios, los ordenamos por grado y practicamos suma, resta, multiplicaciÃ³n y factorizaciÃ³n bÃ¡sica. Todo con <em>muchos</em> ejemplos.</p>

      <div class="toc">
        <a href="#e-def">DefiniciÃ³n, tÃ©rminos y grado</a>
        <a href="#e-operar">Suma, resta y multiplicaciÃ³n</a>
        <a href="#e-identidades">Identidades notables</a>
        <a href="#e-factor">FactorizaciÃ³n bÃ¡sica</a>
        <a href="#e-evaluar">EvaluaciÃ³n y raÃ­ces</a>
        <a href="#e-practica">Generador de prÃ¡ctica</a>
      </div>

      <h2 id="e-def">DefiniciÃ³n, tÃ©rminos y grado</h2>
      <p>Un <strong>polinomio</strong> en <em>x</em> es una expresiÃ³n de la forma <em>a<sub>n</sub>x<sup>n</sup> + a<sub>nâˆ’1</sub>x<sup>nâˆ’1</sup> + â€¦ + a<sub>1</sub>x + a<sub>0</sub></em>, con coeficientes <em>a<sub>i</sub></em> reales (o racionales) y exponente <em>n</em> entero no negativo. El <strong>grado</strong> es el exponente mayor con coeficiente no nulo. El <strong>coeficiente principal</strong> es <em>a<sub>n</sub></em>. Se escribe en <em>forma estÃ¡ndar</em> ordenando de mayor a menor grado.</p>
      <div class="examples">
        <h4>Ejemplos resueltos (10)</h4>
        <ol>
          <li><details><summary>Identifica grado y coeficiente principal en 5xÂ³ âˆ’ 2x + 7.</summary>Grado 3; coeficiente principal 5.</details></li>
          <li><details><summary>Â¿Es 3x<sup>âˆ’2</sup> + 1 un polinomio?</summary>No; los exponentes deben ser enteros <em>no negativos</em>.</details></li>
          <li><details><summary>Escribe en forma estÃ¡ndar: 4 âˆ’ x + 2xÂ³ + xÂ².</summary>2xÂ³ + xÂ² âˆ’ x + 4.</details></li>
          <li><details><summary>Cuenta tÃ©rminos en âˆ’3xÂ² + 6x âˆ’ 1.</summary>Tres tÃ©rminos (trinomio).</details></li>
          <li><details><summary>Monomio de grado 0.</summary>Cualquier constante â‰  0; p.ej., 9.</details></li>
          <li><details><summary>Â¿QuÃ© polinomio tiene grado indefinido?</summary>El polinomio nulo (todos coeficientes 0).</details></li>
          <li><details><summary>Completa: 7xÂ² + __x + 5 tiene 2 raÃ­ces reales siâ€¦</summary>â€¦su discriminante bÂ²âˆ’4ac &gt; 0; aquÃ­ a=7, c=5.</details></li>
          <li><details><summary>Coeficiente de x en 9 âˆ’ 4x + xÂ³.</summary>âˆ’4.</details></li>
          <li><details><summary>Â¿QuÃ© tÃ©rmino falta en 6xÂ³ + 0xÂ² + 5?</summary>El tÃ©rmino en x (coeficiente 0).</details></li>
          <li><details><summary>Clasifica: 8x âˆ’ 3.</summary>Binomio de grado 1 (lineal).</details></li>
        </ol>
      </div>

      <h2 id="e-operar">Suma, resta y multiplicaciÃ³n</h2>
      <p>Para <strong>sumar o restar</strong> se combinan <em>tÃ©rminos semejantes</em> (misma potencia de x). Para <strong>multiplicar</strong> se usa distributiva y, si procede, <span class="nowrap">producto notable</span>.</p>
      <div class="examples">
        <h4>Ejemplos resueltos (10)</h4>
        <ol>
          <li><details><summary>(3xÂ² + x âˆ’ 4) + (âˆ’xÂ² + 5x + 7)</summary>2xÂ² + 6x + 3.</details></li>
          <li><details><summary>(2xÂ³ âˆ’ x + 1) âˆ’ (xÂ³ + 3x âˆ’ 5)</summary>xÂ³ âˆ’ 4x + 6.</details></li>
          <li><details><summary>(x + 2)(x + 5)</summary>xÂ² + 7x + 10.</details></li>
          <li><details><summary>(2x âˆ’ 3)(x âˆ’ 4)</summary>2xÂ² âˆ’ 11x + 12.</details></li>
          <li><details><summary>(x âˆ’ 6)Â²</summary>xÂ² âˆ’ 12x + 36.</details></li>
          <li><details><summary>(x + 3)(xÂ² âˆ’ x + 2)</summary>xÂ³ + 2xÂ² âˆ’ x + 6.</details></li>
          <li><details><summary>(2x + 1)(3xÂ² âˆ’ x + 4)</summary>6xÂ³ + xÂ² + 7x + 4.</details></li>
          <li><details><summary>Ordena y simplifica: 4x âˆ’ 3 + 2xÂ² âˆ’ x + 5</summary>2xÂ² + 3x + 2.</details></li>
          <li><details><summary>(x âˆ’ 1)(x + 1)</summary>xÂ² âˆ’ 1 (diferencia de cuadrados).</details></li>
          <li><details><summary>Producto de un monomio: 3x(2xÂ² âˆ’ x + 5)</summary>6xÂ³ âˆ’ 3xÂ² + 15x.</details></li>
        </ol>
      </div>

      <h2 id="e-identidades">Identidades notables</h2>
      <p>Recetas Ãºtiles: <strong>(aÂ±b)Â² = aÂ² Â± 2ab + bÂ²</strong>, <strong>aÂ² âˆ’ bÂ² = (aâˆ’b)(a+b)</strong>, <strong>(aÂ±b)Â³ = aÂ³ Â± 3aÂ²b + 3abÂ² Â± bÂ³</strong>.</p>
      <div class="examples">
        <h4>Ejemplos resueltos (6)</h4>
        <ol>
          <li><details><summary>Expande (3x âˆ’ 2)Â²</summary>9xÂ² âˆ’ 12x + 4.</details></li>
          <li><details><summary>Factoriza xÂ² âˆ’ 49</summary>(x âˆ’ 7)(x + 7).</details></li>
          <li><details><summary>Expande (x + 4)Â³</summary>xÂ³ + 12xÂ² + 48x + 64.</details></li>
          <li><details><summary>Factoriza 9xÂ² âˆ’ 24x + 16</summary>(3x âˆ’ 4)Â².</details></li>
          <li><details><summary>Simplifica (x + 2)Â² âˆ’ (x âˆ’ 2)Â²</summary>4xÂ·2 = 8x (por aÂ²âˆ’bÂ²).</details></li>
          <li><details><summary>Completa cuadrado: xÂ² + 6x + 5</summary>(x + 3)Â² âˆ’ 4.</details></li>
        </ol>
      </div>

      <h2 id="e-factor">FactorizaciÃ³n bÃ¡sica</h2>
      <p>Claves: <strong>factor comÃºn</strong>, <strong>agrupaciÃ³n</strong>, y usar identidades. Las <em>raÃ­ces</em> de un polinomio indican factores lineales: si r es raÃ­z de p(x), entonces (x âˆ’ r) divide p(x).</p>
      <div class="examples">
        <h4>Ejemplos resueltos (8)</h4>
        <ol>
          <li><details><summary>3xÂ² + 6x</summary>3x(x + 2) (factor comÃºn).</details></li>
          <li><details><summary>ax + ay</summary>a(x + y).</details></li>
          <li><details><summary>xÂ² + 5x + 6</summary>(x + 2)(x + 3) (buscar dos nÃºmeros con suma 5 y producto 6).</details></li>
          <li><details><summary>2xÂ² + 7x + 3</summary>(2x + 1)(x + 3).</details></li>
          <li><details><summary>xÂ³ + 3xÂ² + x + 3</summary>Grupo: (xÂ³ + 3xÂ²) + (x + 3) = xÂ²(x + 3) + 1(x + 3) = (x + 3)(xÂ² + 1).</details></li>
          <li><details><summary>4xÂ² âˆ’ 25</summary>(2x âˆ’ 5)(2x + 5).</details></li>
          <li><details><summary>xÂ² âˆ’ 10x + 25</summary>(x âˆ’ 5)Â².</details></li>
          <li><details><summary>xÂ³ âˆ’ x</summary>x(x âˆ’ 1)(x + 1).</details></li>
        </ol>
      </div>

      <h2 id="e-evaluar">EvaluaciÃ³n y raÃ­ces</h2>
      <p>Para evaluar p(x) en x=a sustituimos y calculamos. <strong>r es raÃ­z</strong> si p(r)=0. La multiplicidad de una raÃ­z es cuÃ¡ntas veces se repite el factor (xâˆ’r).</p>
      <div class="examples">
        <h4>Ejemplos resueltos (6)</h4>
        <ol>
          <li><details><summary>p(x)=xÂ² âˆ’ 4x + 3. Calcula p(2).</summary>4 âˆ’ 8 + 3 = âˆ’1.</details></li>
          <li><details><summary>Â¿Es 3 raÃ­z de xÂ² âˆ’ 5x + 6?</summary>9 âˆ’ 15 + 6 = 0 â‡’ sÃ­; factor (x âˆ’ 3).</details></li>
          <li><details><summary>RaÃ­ces de xÂ² âˆ’ 9</summary>Â±3.</details></li>
          <li><details><summary>Multiplicidad de la raÃ­z 2 en (x âˆ’ 2)Â²(x + 1)</summary>2 tiene multiplicidad 2.</details></li>
          <li><details><summary>Â¿CuÃ¡ntas raÃ­ces reales puede tener un polinomio cÃºbico?</summary>1 o 3 (contando multiplicidades siempre 3 complejas).</details></li>
          <li><details><summary>Grafica mentalmente y= (x âˆ’ 1)Â²</summary>Toca el eje x en x=1 (mÃ­nimo) y no lo atraviesa.</details></li>
        </ol>
      </div>

      <h2 id="e-practica">Generador de prÃ¡ctica (ESO)</h2>
      <p>Elige un tipo y genera ejercicios con soluciÃ³n. Escribe la respuesta en forma simplificada.</p>
      <div class="grid2">
        <div class="paper" style="margin:0">
          <h3>Sumar/restar polinomios</h3>
          <div class="gen">
            <button class="btn small" onclick="genSuma()">Nuevo</button>
            <span id="sumExp" style="font-weight:800"></span>
          </div>
          <div class="gen" style="margin-top:8px">
            <input id="sumAns" type="text" placeholder="Respuesta" />
            <button class="btn small" onclick="checkSuma()">Comprobar</button>
            <span id="sumOk"></span>
          </div>
          <details style="margin-top:8px"><summary>Ver soluciÃ³n</summary><div id="sumSol"></div></details>
        </div>
        <div class="paper" style="margin:0">
          <h3>Producto (binomio Ã— binomio)</h3>
          <div class="gen">
            <button class="btn small" onclick="genProd()">Nuevo</button>
            <span id="prodExp" style="font-weight:800"></span>
          </div>
          <div class="gen" style="margin-top:8px">
            <input id="prodAns" type="text" placeholder="Respuesta" />
            <button class="btn small" onclick="checkProd()">Comprobar</button>
            <span id="prodOk"></span>
          </div>
          <details style="margin-top:8px"><summary>Ver soluciÃ³n</summary><div id="prodSol"></div></details>
        </div>
      </div>

      <div class="examples">
        <h4>Ejercicios propuestos (20) â€” con soluciÃ³n</h4>
        <ol>
          <li><details><summary>Simplifica: (2xÂ² âˆ’ 3x + 1) + (xÂ² + 5x âˆ’ 4)</summary>3xÂ² + 2x âˆ’ 3.</details></li>
          <li><details><summary>Multiplica: (x âˆ’ 7)(x + 2)</summary>xÂ² âˆ’ 5x âˆ’ 14.</details></li>
          <li><details><summary>Factoriza: xÂ² + x âˆ’ 12</summary>(x + 4)(x âˆ’ 3).</details></li>
          <li><details><summary>EvalÃºa p(âˆ’1) para p(x)=2xÂ² + x âˆ’ 3</summary>2(1) âˆ’ 1 âˆ’ 3 = âˆ’2.</details></li>
          <li><details><summary>Escribe en forma estÃ¡ndar: 6 âˆ’ 4x + xÂ³ + x</summary>xÂ³ âˆ’ 3x + 6.</details></li>
          <li><details><summary>Producto: (2x âˆ’ 5)Â²</summary>4xÂ² âˆ’ 20x + 25.</details></li>
          <li><details><summary>Factoriza por grupos: xÂ³ âˆ’ 4xÂ² + x âˆ’ 4</summary>(x âˆ’ 4)(xÂ² + 1).</details></li>
          <li><details><summary>Indica el grado de 7 âˆ’ 2xâµ + xâ´</summary>5.</details></li>
          <li><details><summary>RaÃ­ces de xÂ² âˆ’ 6x + 9</summary>3 (doble).</details></li>
          <li><details><summary>Completa cuadrado: xÂ² âˆ’ 8x + 5</summary>(x âˆ’ 4)Â² âˆ’ 11.</details></li>
          <li><details><summary>Multiplica: (x + 1)(xÂ² + x + 1)</summary>xÂ³ + 2xÂ² + 2x + 1.</details></li>
          <li><details><summary>Simplifica: 5x âˆ’ (3x âˆ’ 4)</summary>2x + 4.</details></li>
          <li><details><summary>Factoriza: 6xÂ² âˆ’ 21x</summary>3x(2x âˆ’ 7).</details></li>
          <li><details><summary>Producto: (3x + 2)(x âˆ’ 4)</summary>3xÂ² âˆ’ 10x âˆ’ 8.</details></li>
          <li><details><summary>Â¿x=âˆ’2 anula p(x)=xÂ²+4x+4?</summary>SÃ­, p(âˆ’2)=0; (x+2)Â².</details></li>
          <li><details><summary>Expande: (x âˆ’ 3)(xÂ² + 3x + 9)</summary>xÂ³ âˆ’ 27 (cubo de binomio).</details></li>
          <li><details><summary>Factoriza: 25xÂ² âˆ’ 1</summary>(5x âˆ’ 1)(5x + 1).</details></li>
          <li><details><summary>Multiplica: (2x âˆ’ 1)(x + 6)</summary>2xÂ² + 11x âˆ’ 6.</details></li>
          <li><details><summary>Reduce: (x âˆ’ 2)Â³</summary>xÂ³ âˆ’ 6xÂ² + 12x âˆ’ 8.</details></li>
          <li><details><summary>EvalÃºa p(3) si p(x)=xÂ³ âˆ’ x</summary>27 âˆ’ 3 = 24.</details></li>
        </ol>
      </div>
    </section>

    <!-- ===== BACHILLERATO ===== -->
    <section id="sec-bach" class="paper level">
      <h1>Bachillerato â€” ProfundizaciÃ³n en polinomios</h1>
      <p class="lead">Ampliamos con <strong>divisiÃ³n polinÃ³mica</strong>, <strong>Ruffini</strong>, <strong>teorema del resto y del factor</strong>, <strong>factorizaciÃ³n avanzada</strong>, <strong>raÃ­ces y multiplicidad</strong>, <strong>ecuaciones e inecuaciones</strong> y <strong>esbozo de grÃ¡ficas</strong>.</p>

      <div class="toc">
        <a href="#b-division">DivisiÃ³n y algoritmo</a>
        <a href="#b-ruffini">Ruffini / DivisiÃ³n sintÃ©tica</a>
        <a href="#b-resto">Teoremas del resto y del factor</a>
        <a href="#b-racionales">BÃºsqueda de raÃ­ces racionales</a>
        <a href="#b-factoriza">FactorizaciÃ³n avanzada</a>
        <a href="#b-ecuaciones">Ecuaciones e inecuaciones</a>
        <a href="#b-grafica">Comportamiento y esbozos</a>
        <a href="#b-practica">Generadores y test</a>
      </div>

      <h2 id="b-division">DivisiÃ³n polinÃ³mica y algoritmo de Euclides</h2>
      <p>Dados p(x) (dividendo) y d(x)â‰ 0 (divisor), existen Ãºnicos q(x) (cociente) y r(x) (resto) tales que <strong>p = dq + r</strong> con <em>grado(r) &lt; grado(d)</em>. Esto permite simplificar fracciones algebraicas y preparar factorizaciones.</p>
      <div class="examples">
        <h4>Ejemplos resueltos (8)</h4>
        <ol>
          <li><details><summary>Divide xÂ³ âˆ’ 6xÂ² + 11x âˆ’ 6 entre x âˆ’ 1</summary>Cociente xÂ² âˆ’ 5x + 6; resto 0 (porque 1 es raÃ­z).</details></li>
          <li><details><summary>Divide 2xÂ³ + 3xÂ² âˆ’ x + 5 entre x + 2</summary>Cociente 2xÂ² âˆ’ x + 1; resto 3.</details></li>
          <li><details><summary>Comprueba grados: deg(r) &lt; deg(d)</summary>En los casos anteriores, r es constante (grado 0) y d es lineal (grado 1).</details></li>
          <li><details><summary>Euclides para polinomios: mcd(xÂ² âˆ’ 1, xÂ² âˆ’ x)</summary>mcd = x âˆ’ 1.</details></li>
          <li><details><summary>Divide xâ´ âˆ’ 1 entre xÂ² âˆ’ 1</summary>q = xÂ² + 1, r = 0.</details></li>
          <li><details><summary>Divide xÂ³ + 2xÂ² âˆ’ x âˆ’ 2 entre x + 1</summary>q = xÂ² + x âˆ’ 2, r = 0.</details></li>
          <li><details><summary>Usa la divisiÃ³n para simplificar (xÂ³ âˆ’ 1)/(x âˆ’ 1)</summary>Resultado xÂ² + x + 1.</details></li>
          <li><details><summary>Divide 3xÂ³ âˆ’ 5x + 2 entre x âˆ’ 2</summary>q = 3xÂ² + 6x + 7, r = 16 (vÃ­a Ruffini).</details></li>
        </ol>
      </div>

      <h2 id="b-ruffini">Regla de Ruffini (divisiÃ³n sintÃ©tica)</h2>
      <p>Para dividir entre (x âˆ’ r), copiamos coeficientes y <em>bajamosâ€“multiplicamosâ€“sumamos</em>. El Ãºltimo nÃºmero es el resto p(r).</p>
      <div class="examples">
        <h4>Ejemplos resueltos (8)</h4>
        <ol>
          <li><details><summary>Ruffini de p(x)=xÂ³ âˆ’ 4xÂ² + x + 6 con r=2</summary>Cociente xÂ² âˆ’ 2x âˆ’ 3; resto 0 â‡’ (x âˆ’ 2)(xÂ² âˆ’ 2x âˆ’ 3).</details></li>
          <li><details><summary>Ruffini con huecos: p(x)=2xÂ³ + 0xÂ² âˆ’ x + 1, r=âˆ’1</summary>Cociente 2xÂ² âˆ’ 2x + 1; resto 0.</details></li>
          <li><details><summary>Interpreta el resto</summary>Siempre es p(r), por el teorema del resto.</details></li>
          <li><details><summary>Extrae otro factor: xÂ³ âˆ’ 6xÂ² + 11x âˆ’ 6</summary>Ruffini con r=1,2,3 â†’ factores (xâˆ’1)(xâˆ’2)(xâˆ’3).</details></li>
          <li><details><summary>Si el resto no es 0â€¦</summary>El divisor no es factor; prueba con otro r o usa divisiÃ³n larga.</details></li>
          <li><details><summary>Ruffini con r=0</summary>Equivale a separar el tÃ©rmino independiente: resto p(0) es el tÃ©rmino independiente.</details></li>
          <li><details><summary>Ruffini con fracciones (opcional)</summary>Se puede usar r=p/q (racional) con mÃ¡s cuidado en los productos.</details></li>
          <li><details><summary>Ruffini y multiplicidad</summary>Si al dividir por (x âˆ’ r) el resto es 0 repetidas veces, la multiplicidad de r aumenta.</details></li>
        </ol>
      </div>

      <h2 id="b-resto">Teoremas del resto y del factor</h2>
      <p><strong>Resto:</strong> si dividimos p(x) entre (x âˆ’ a), el resto es p(a). <strong>Factor:</strong> (x âˆ’ a) es factor de p(x) â‡” p(a)=0. Consecuencia: las raÃ­ces determinan factores lineales.</p>
      <div class="examples">
        <h4>Ejemplos resueltos (6)</h4>
        <ol>
          <li><details><summary>Calcula el resto de dividir p(x)=2xÂ³ âˆ’ xÂ² + 4x âˆ’ 7 entre (x âˆ’ 2)</summary>p(2)=2Â·8 âˆ’ 4 + 8 âˆ’ 7 = 13.</details></li>
          <li><details><summary>Comprueba si (x âˆ’ 3) divide xÂ² âˆ’ 5x + 6</summary>p(3)=9 âˆ’ 15 + 6 = 0 â‡’ sÃ­.</details></li>
          <li><details><summary>Si p(âˆ’1)=0, Â¿quÃ© factor tiene p?</summary>(x + 1).</details></li>
          <li><details><summary>Encuentra k para que x âˆ’ 1 sea factor de xÂ³ + kxÂ² âˆ’ 5x + 2</summary>p(1)=1 + k âˆ’ 5 + 2 = 0 â‡’ k=2.</details></li>
          <li><details><summary>Halla a tal que el resto de dividir por (x âˆ’ a) sea 5</summary>p(a)=5 (usa la definiciÃ³n del resto).</details></li>
          <li><details><summary>Si p(x) tiene raÃ­ces 1 y âˆ’2, escribe factores</summary>(x âˆ’ 1)(x + 2)Â·q(x).</details></li>
        </ol>
      </div>

      <h2 id="b-racionales">BÃºsqueda de raÃ­ces racionales</h2>
      <p>Para polinomios con coeficientes enteros, los candidatos a raÃ­z racional <em>p/q</em> (en forma irreducible) deben verificar: <em>p | tÃ©rmino independiente</em> y <em>q | coeficiente principal</em>. (Criterio de raÃ­ces racionales).</p>
      <div class="examples">
        <h4>Ejemplos resueltos (6)</h4>
        <ol>
          <li><details><summary>p(x)=xÂ³ âˆ’ 4xÂ² âˆ’ 7x + 10</summary>Candidatos Â±1,Â±2,Â±5,Â±10. Probando: p(âˆ’1)=0 â‡’ (x + 1)(xÂ² âˆ’ 5x + 10).</details></li>
          <li><details><summary>p(x)=2xÂ³ + xÂ² âˆ’ 8x âˆ’ 4</summary>candidatos Â±1,Â±2,Â±4,Â±1/2,Â±1/4,Â±2 â‡’ r=1 es raÃ­z â‡’ reduce por Ruffini.</details></li>
          <li><details><summary>Â¿Y si ningÃºn candidato vale?</summary>No hay raÃ­ces racionales; usa otros mÃ©todos (grÃ¡fica, numÃ©ricos) o factoriza sobre â„ con cuadrÃ¡ticas.</details></li>
          <li><details><summary>RelaciÃ³n con coeficiente principal â‰ 1</summary>Incluye divisores de ese coeficiente en los denominadores.</details></li>
          <li><details><summary>Si el tÃ©rmino independiente es 0</summary>x=0 es raÃ­z; factoriza x.</details></li>
          <li><details><summary>ComprobaciÃ³n final</summary>Multiplica los factores para verificar.</details></li>
        </ol>
      </div>

      <h2 id="b-factoriza">FactorizaciÃ³n avanzada</h2>
      <p>Combinamos todos los recursos: buscar raÃ­ces racionales, Ruffini repetida, completar cuadrado y reconocer irreducibles cuadrÃ¡ticos.</p>
      <div class="examples">
        <h4>Ejemplos resueltos (10)</h4>
        <ol>
          <li><details><summary>xÂ³ âˆ’ 6xÂ² + 11x âˆ’ 6</summary>(x âˆ’ 1)(x âˆ’ 2)(x âˆ’ 3).</details></li>
          <li><details><summary>2xÂ³ âˆ’ 3xÂ² âˆ’ 8x + 12</summary>Racional r=2 â‡’ (x âˆ’ 2)(2xÂ² + x âˆ’ 6) â‡’ (x âˆ’ 2)(2x âˆ’ 3)(x + 2).</details></li>
          <li><details><summary>xâ´ âˆ’ 5xÂ² + 4</summary>Truco: t=xÂ² â‡’ tÂ² âˆ’ 5t + 4 = (t âˆ’ 1)(t âˆ’ 4) â‡’ (xÂ² âˆ’ 1)(xÂ² âˆ’ 4) â‡’ (x âˆ’ 1)(x + 1)(x âˆ’ 2)(x + 2).</details></li>
          <li><details><summary>3xâ´ + 6xÂ³ âˆ’ 3xÂ²</summary>3xÂ²(xÂ² + 2x âˆ’ 1).</details></li>
          <li><details><summary>xÂ³ + xÂ² âˆ’ 4x âˆ’ 4</summary>Grupo: xÂ²(x + 1) âˆ’ 4(x + 1) = (x + 1)(xÂ² âˆ’ 4) â‡’ (x + 1)(x âˆ’ 2)(x + 2).</details></li>
          <li><details><summary>xâ´ + 4xÂ³ + 6xÂ² + 4x + 1</summary>(x + 1)â´ (binomio de Newton).</details></li>
          <li><details><summary>2xâ´ âˆ’ 18xÂ² + 32</summary>2(xâ´ âˆ’ 9xÂ² + 16) â‡’ intenta t=xÂ²: tÂ² âˆ’ 9t + 16=(tâˆ’1)(tâˆ’8) â‡’ 2(xÂ²âˆ’1)(xÂ²âˆ’8).</details></li>
          <li><details><summary>xÂ³ âˆ’ 9x</summary>x(x âˆ’ 3)(x + 3).</details></li>
          <li><details><summary>xâµ âˆ’ xÂ³</summary>xÂ³(xÂ² âˆ’ 1)=xÂ³(x âˆ’ 1)(x + 1).</details></li>
          <li><details><summary>4xÂ³ âˆ’ 12xÂ² + 9x</summary>x(2x âˆ’ 3)Â².</details></li>
        </ol>
      </div>

      <h2 id="b-ecuaciones">Ecuaciones e inecuaciones polinÃ³micas</h2>
      <p>Resolver <em>p(x)=0</em> equivale a factorizar y anular cada factor. Para inecuaciones usamos el <strong>mÃ©todo de signos</strong>: eje real marcado por las raÃ­ces y el signo de cada intervalo.</p>
      <div class="examples">
        <h4>Ejemplos resueltos (8)</h4>
        <ol>
          <li><details><summary>Resuelve xÂ³ âˆ’ 4xÂ² âˆ’ x + 4 = 0</summary>Factoriza por grupos: (xÂ²(x âˆ’ 4) âˆ’ 1(x âˆ’ 4))=(x âˆ’ 4)(xÂ² âˆ’ 1) â‡’ raÃ­ces 4, Â±1.</details></li>
          <li><details><summary>Resuelve 2xÂ³ + xÂ² âˆ’ 8x âˆ’ 4 = 0</summary>r=1 â‡’ divide â‡’ 2xÂ² + 3x âˆ’ 4 â‡’ raÃ­ces 1, (âˆ’3Â±âˆš(9+32))/4 = (âˆ’3Â±âˆš41)/4.</details></li>
          <li><details><summary>Resuelve (x âˆ’ 2)Â²(x + 3) â‰¥ 0</summary>Signos: raÃ­z doble en 2 (cambia? no), simple en âˆ’3. Sol: (âˆ’âˆ,âˆ’3] âˆª {2} âˆª [2,âˆ).</details></li>
          <li><details><summary>Encuentra k para que x=2 sea raÃ­z doble de xÂ³ + kxÂ² + x + 2</summary>p(2)=0 y pâ€²(2)=0 â‡’ resuelve sistema para k=âˆ’5.</details></li>
          <li><details><summary>Resuelve xâ´ âˆ’ 5xÂ² + 4 â‰¤ 0</summary>(xÂ² âˆ’ 1)(xÂ² âˆ’ 4) â‰¤ 0 â‡’ intervalos: [âˆ’2,âˆ’1] âˆª [1,2].</details></li>
          <li><details><summary>Resuelve xÂ³ âˆ’ 6xÂ² + 9x = 0</summary>x(x âˆ’ 3)Â²=0 â‡’ x=0, 3 (con 3 doble).</details></li>
          <li><details><summary>Encuentra el polinomio mÃ­nimo grado con raÃ­ces 1 (doble) y âˆ’2</summary>(x âˆ’ 1)Â²(x + 2).</details></li>
          <li><details><summary>Halla parÃ¡metros a,b si x=1 y x=âˆ’2 anulan xÂ³ + axÂ² + bx + 6</summary>p(1)=0 â‡’ 1+a+b+6=0; p(âˆ’2)=0 â‡’ âˆ’8+4aâˆ’2b+6=0 â‡’ resuelve: a=âˆ’1, b=âˆ’6.</details></li>
        </ol>
      </div>

      <h2 id="b-grafica">Comportamiento de grÃ¡ficas</h2>
      <p>Para grandes |x|, domina el tÃ©rmino de mayor grado: <em>comportamiento al infinito</em>. Si el grado es par y coeficiente principal &gt;0, yâ†’+âˆ en ambos extremos; si es impar y coeficiente principal &gt;0, yâ†’âˆ’âˆ a la izquierda y yâ†’+âˆ a la derecha. La <strong>multiplicidad</strong> indica si la curva <em>atraviesa</em> (impar) o <em>toca</em> (par) el eje en esa raÃ­z.</p>
      <div class="examples">
        <h4>Ejemplos rÃ¡pidos (5)</h4>
        <ol>
          <li><details><summary>Esboza y = (x âˆ’ 1)(x âˆ’ 3)</summary>ParÃ¡bola (abre hacia arriba); corta en x=1 y x=3; vÃ©rtice en x=2.</details></li>
          <li><details><summary>y = âˆ’2xÂ³ + x</summary>Grado impar, coeficiente principal negativo â‡’ sube a la izquierda y baja a la derecha; corta en x=0, Â±âˆš(1/2).</details></li>
          <li><details><summary>y = (x + 2)Â²(x âˆ’ 1)</summary>Toca en âˆ’2 (doble) y atraviesa en 1.</details></li>
          <li><details><summary>Â¿CuÃ¡ntos cortes puede tener con el eje x un polinomio de grado n?</summary>Como mÃ¡ximo n cortes reales (contando multiplicidad).</details></li>
          <li><details><summary>Signo de (x âˆ’ 2)Â³ para x &lt; 2</summary>Negativo (potencia impar de un negativo).</details></li>
        </ol>
      </div>

      <h2 id="b-practica">Generadores (Bach) y test de autoevaluaciÃ³n</h2>
      <div class="grid2">
        <div class="paper" style="margin:0">
          <h3>Ruffini / Resto</h3>
          <div class="gen">
            <button class="btn small" onclick="genRuffini()">Nuevo</button>
            <span id="ruffExp" style="font-weight:800"></span>
          </div>
          <div class="gen" style="margin-top:8px">
            <input id="ruffAns" type="text" placeholder="Resto p(r)" />
            <button class="btn small" onclick="checkRuffini()">Comprobar</button>
            <span id="ruffOk"></span>
          </div>
          <details style="margin-top:8px"><summary>Ver desarrollo</summary><div id="ruffSol"></div></details>
        </div>
        <div class="paper" style="margin:0">
          <h3>FactorizaciÃ³n guiada</h3>
          <div class="gen">
            <button class="btn small" onclick="genFact()">Nuevo</button>
            <span id="factExp" style="font-weight:800"></span>
          </div>
          <details style="margin-top:8px"><summary>Ver una posible soluciÃ³n</summary><div id="factSol"></div></details>
        </div>
      </div>

      <div class="examples">
        <h4>Test rÃ¡pido (5 preguntas)</h4>
        <ol id="quizList"></ol>
        <div class="gen"><button class="btn" onclick="startQuiz()">Generar test</button><span id="quizScore" style="font-weight:800"></span></div>
      </div>

      <div class="examples">
        <h4>Ejercicios propuestos (25) â€” con soluciÃ³n detallada</h4>
        <ol>
          <li><details><summary>Divide xÂ³ âˆ’ 2xÂ² âˆ’ x + 2 entre x âˆ’ 1</summary>q=xÂ² âˆ’ x âˆ’ 2, r=0 â‡’ (x âˆ’ 1)(xÂ² âˆ’ x âˆ’ 2).</details></li>
          <li><details><summary>Usa el teorema del resto para calcular p(2) si p(x)=3xÂ³ âˆ’ xÂ² + 4x âˆ’ 5</summary>p(2)=24 âˆ’ 4 + 8 âˆ’ 5 = 23.</details></li>
          <li><details><summary>Encuentra todas las raÃ­ces de xÂ³ âˆ’ 3xÂ² âˆ’ 4x + 12</summary>r=3 â‡’ divide â‡’ xÂ² âˆ’ 4 â‡’ raÃ­ces 3, Â±2.</details></li>
          <li><details><summary>Halla k para que (x âˆ’ 2) divida xÂ³ + kxÂ² âˆ’ 5x + 6</summary>p(2)=8 + 4k âˆ’ 10 + 6 = 0 â‡’ k=âˆ’1.</details></li>
          <li><details><summary>Factoriza xâ´ âˆ’ 5xÂ² + 6</summary>(xÂ² âˆ’ 2)(xÂ² âˆ’ 3).</details></li>
          <li><details><summary>Resuelve (x âˆ’ 1)(x + 2)(x âˆ’ 3) â‰¥ 0</summary>Intervalos: (âˆ’âˆ,âˆ’2] âˆª [1,3] âˆª [3,âˆ).</details></li>
          <li><details><summary>Determina m para que x=âˆ’1 sea raÃ­z doble de xÂ³ + mxÂ² + x + m</summary>p(âˆ’1)=0 y pâ€²(âˆ’1)=0 â‡’ m=0.</details></li>
          <li><details><summary>Aplica Euclides: mcd(xÂ³ âˆ’ x, xÂ² âˆ’ 1)</summary>xÂ² âˆ’ 1.</details></li>
          <li><details><summary>Factoriza 6xÂ³ âˆ’ xÂ² âˆ’ 12x + 2</summary>r=1/2 â‡’ (2x âˆ’ 1)(3xÂ² + x âˆ’ 2) â‡’ (2x âˆ’ 1)(3x âˆ’ 2)(x + 1).</details></li>
          <li><details><summary>Esboza y = âˆ’xÂ³ + 4x</summary>Cortes: x=0, Â±2; sube izq., baja dcha. MÃ¡x/MÃ­n relativos en Â±âˆš(4/3).</details></li>
          <li><details><summary>Encuentra el polinomio de menor grado con raÃ­ces âˆ’2 (doble) y 3</summary>(x + 2)Â²(x âˆ’ 3).</details></li>
          <li><details><summary>Comprueba si x+2 es factor de xÂ³ + 5xÂ² + 8x + 4</summary>p(âˆ’2)=âˆ’8+20âˆ’16+4=0 â‡’ sÃ­.</details></li>
          <li><details><summary>Divide 2xâ´ âˆ’ 3xÂ³ + x âˆ’ 5 entre xÂ² âˆ’ x + 1</summary>q=2xÂ² âˆ’ x âˆ’ 1, r=âˆ’x âˆ’ 4.</details></li>
          <li><details><summary>Resuelve xâ´ âˆ’ 7xÂ² + 10 = 0</summary>t=xÂ² â‡’ (t âˆ’ 5)(t âˆ’ 2)=0 â‡’ x=Â±âˆš5, Â±âˆš2.</details></li>
          <li><details><summary>SeÃ±ala el signo de p(x)=(xâˆ’1)Â²(x+4) para xâˆˆ(âˆ’4,1)</summary>Negativo (factor simple x+4&lt;0, doble no cambia signo).</details></li>
          <li><details><summary>Construye p(x) de grado 3 con coef. principal 2 y raÃ­ces âˆ’1, 2 y 3</summary>p(x)=2(x+1)(xâˆ’2)(xâˆ’3).</details></li>
          <li><details><summary>Determina a para que el resto de dividir xÂ³ + axÂ² + 1 entre (x âˆ’ 1) sea 5</summary>p(1)=1 + a + 1 = 5 â‡’ a=3.</details></li>
          <li><details><summary>Factoriza xâ¶ âˆ’ 1</summary>(xÂ³ âˆ’ 1)(xÂ³ + 1) = (x âˆ’ 1)(xÂ² + x + 1)(x + 1)(xÂ² âˆ’ x + 1).</details></li>
          <li><details><summary>Resuelve (xÂ² âˆ’ 4)(x âˆ’ 1) &lt; 0</summary>Intervalos por signos: (âˆ’âˆ,âˆ’2)âˆª(âˆ’2,1)âˆª(1,2)âˆª(2,âˆ) â‡’ soluciÃ³n (âˆ’2,1) âˆª (2,âˆ).</details></li>
          <li><details><summary>Calcula pâ€²(x) de p(x)=(x âˆ’ 2)Â³(x + 1)</summary>pâ€²(x) = (x âˆ’ 2)Â²[3(x + 1) + (x âˆ’ 2)] = (x âˆ’ 2)Â²(4x + 1) (Ãºtil para mÃ­nimos/mÃ¡ximos).</details></li>
          <li><details><summary>Si p(x)=xÂ³ âˆ’ axÂ² + bx âˆ’ 8 tiene raÃ­z 2, halla relaciÃ³n entre a y b</summary>p(2)=8 âˆ’ 4a + 2b âˆ’ 8 = 0 â‡’ 2b = 4a â‡’ b=2a.</details></li>
          <li><details><summary>Encuentra todas las raÃ­ces de 2xÂ³ âˆ’ 5xÂ² âˆ’ 4x + 12</summary>r=2 â‡’ divide â‡’ 2xÂ² âˆ’ x âˆ’ 6 â‡’ raÃ­ces 2, 2, âˆ’3/2? (corrige): 2xÂ² âˆ’ x âˆ’ 6=(2x+3)(xâˆ’2) â‡’ raÃ­ces 2 (doble), âˆ’3/2.</details></li>
          <li><details><summary>Factoriza xâ´ + 2xÂ³ âˆ’ x âˆ’ 2</summary>Grupo: xÂ³(x+2) âˆ’ 1(x+2) = (x+2)(xÂ³ âˆ’ 1) â‡’ (x+2)(x âˆ’ 1)(xÂ² + x + 1).</details></li>
          <li><details><summary>Determina la multiplicidad de x=0 en p(x)=xâµ âˆ’ 3xÂ³ + 2x</summary>Extrae x â‡’ p=x(xâ´ âˆ’ 3xÂ² + 2) â‡’ multiplicidad 1 (las otras raÃ­ces vienen de la cuadrÃ¡tica en xÂ²).</details></li>
          <li><details><summary>Esboza y=(xâˆ’1)â´</summary>Grado par, toca el eje en x=1 con aplanamiento (raÃ­z de multiplicidad 4).</details></li>
          <li><details><summary>Resto de dividir 5xâ´ âˆ’ xÂ³ + 4x âˆ’ 7 entre (x + 1)</summary>p(âˆ’1)=âˆ’5 âˆ’ 1 âˆ’ 4 âˆ’ 7 = âˆ’17.</details></li>
        </ol>
      </div>
    </section>
  </main>

  <button class="topbtn" id="topbtn" title="Volver arriba">â†‘</button>

  <script>
    // Utilidades DOM
    const $ = s => document.querySelector(s);
    const $$ = s => document.querySelectorAll(s);

    // Tabs (solo ESO y Bachillerato)
    const map = { eso:'#sec-eso', bach:'#sec-bach' };
    function showLevel(key, push=true){
      Object.entries(map).forEach(([k,sel])=>{
        document.querySelector(sel).toggleAttribute('data-active', k===key);
        const b = document.querySelector(`.pill[data-level="${k}"]`);
        if(b) b.setAttribute('aria-selected', String(k===key));
      });
      if(push){
        const url = new URL(location.href); url.searchParams.set('nivel', key);
        history.replaceState(null,'',url.toString());
        localStorage.setItem('nivel-polinomios', key);
        window.scrollTo({top:0, behavior:'smooth'});
      }
    }
    $$('.pill').forEach(b=> b.addEventListener('click', ()=> showLevel(b.dataset.level)));
    const saved = localStorage.getItem('nivel-polinomios');
    const param = new URLSearchParams(location.search).get('nivel');
    showLevel(map[param]?param:(map[saved]?saved:'eso'), false);

    // Progress bar + top button
    const bar = $('#progress');
    function updateProgress(){
      const h = document.documentElement;
      const sc = h.scrollTop || document.body.scrollTop;
      const max = (h.scrollHeight - h.clientHeight);
      const p = max>0 ? (sc/max)*100 : 0;
      bar.style.width = p + '%';
      $('#topbtn').classList.toggle('show', sc>600);
    }
    addEventListener('scroll', updateProgress, {passive:true}); updateProgress();

    // Reader controls (Aâˆ’ A+ ancho)
    const root = document.documentElement;
    $('#fs-up').addEventListener('click', ()=>{
      const val = parseFloat(getComputedStyle(root).getPropertyValue('--base')); root.style.setProperty('--base', Math.min(val+1, 24)+'px');
    });
    $('#fs-down').addEventListener('click', ()=>{
      const val = parseFloat(getComputedStyle(root).getPropertyValue('--base')); root.style.setProperty('--base', Math.max(val-1, 14)+'px');
    });
    $('#width-up').addEventListener('click', ()=>{
      const w = getComputedStyle(root).getPropertyValue('--maxw'); const num = parseInt(w); root.style.setProperty('--maxw', Math.min(num+8, 100)+'ch');
    });
    $('#width-down').addEventListener('click', ()=>{
      const w = getComputedStyle(root).getPropertyValue('--maxw'); const num = parseInt(w); root.style.setProperty('--maxw', Math.max(num-8, 54)+'ch');
    });

    // Tema claro/oscuro (toggle variables)
    $('#theme-toggle').addEventListener('click', ()=>{
      const light = getComputedStyle(root).getPropertyValue('--bg').trim()==='#f7f9fc';
      if(light){
        root.style.setProperty('--bg','#0e1424'); root.style.setProperty('--paper','#101a34'); root.style.setProperty('--ink','#eaf2ff');
        root.style.setProperty('--muted','#aab7d9'); root.style.setProperty('--brand','#60a5fa'); root.style.setProperty('--accent','#7dd3fc');
        root.style.setProperty('--accent2','#34d399'); root.style.setProperty('--border','#203054');
      }else{
        root.style.setProperty('--bg','#f7f9fc'); root.style.setProperty('--paper','#ffffff'); root.style.setProperty('--ink','#121826');
        root.style.setProperty('--muted','#48536b'); root.style.setProperty('--brand','#2563eb'); root.style.setProperty('--accent','#0ea5e9');
        root.style.setProperty('--accent2','#22c55e'); root.style.setProperty('--border','#d9e1f2');
      }
    });

    // Top button
    $('#topbtn').addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

    // ===== Generadores ESO =====
    function polyToString(coefs){ // coefs from high to low
      const n = coefs.length - 1; let out = [];
      for(let i=0;i<coefs.length;i++){
        const a = coefs[i]; const p = n - i; if(Math.abs(a) < 1e-12) continue;
        const sign = (a>=0 && out.length>0) ? ' + ' : (a<0 ? (out.length>0?' âˆ’ ':'âˆ’') : '');
        const abs = Math.abs(a);
        let term = '';
        if(p===0){ term = abs.toString(); }
        else if(p===1){ term = (abs===1? 'x' : abs+'x'); }
        else{ term = (abs===1? 'x' : abs+'x') + '^' + p; }
        out.push(sign + term);
      }
      return out.length? out.join('') : '0';
    }
    function parseAns(txt){ // naive normalizer: remove spaces, replace âˆ’ with -
      return txt.replace(/\s+/g,'').replace(/âˆ’/g,'-').toLowerCase();
    }

    // Suma/resta
    let sumState=null;
    function genPoly(deg,maxC){
      const coefs=[]; for(let i=deg;i>=0;i--){ let v = Math.floor((Math.random()*2-1)*maxC); if(i===deg && v===0) v=1; coefs.push(v); }
      return coefs; // high->low already
    }
    function addCoefs(a,b){ const n=Math.max(a.length,b.length); const A=[...Array(n)].map((_,i)=>a[a.length-n+i]||0); const B=[...Array(n)].map((_,i)=>b[b.length-n+i]||0); return A.map((v,i)=>v+B[i]); }
    function genSuma(){
      const A = genPoly(2,7), B = genPoly(2,7); sumState = {A,B};
      $('#sumExp').textContent = polyToString(A) + '  +  ' + polyToString(B);
      $('#sumSol').textContent = polyToString(addCoefs(A,B));
      $('#sumAns').value=''; $('#sumOk').textContent='';
    }
    function checkSuma(){
      if(!sumState) return; const want=$('#sumSol').textContent; const got=parseAns($('#sumAns').value);
      $('#sumOk').textContent = (parseAns(want)===got)? 'âœ”ï¸ Correcto' : 'âœ–ï¸ Revisa (soluciÃ³n en "Ver soluciÃ³n")';
      $('#sumOk').className = (parseAns(want)===got)? 'ok' : 'bad';
    }

    // Producto binomioÃ—binomio
    let prodState=null;
    function genProd(){
      function bin(){ const a=Math.floor(Math.random()*7)+1, b=Math.floor(Math.random()*9)-4; return [a,b]; }
      const [a,b]=bin(), [c,d]=bin(); prodState={a,b,c,d};
      $('#prodExp').textContent = `(${a}x ${b>=0?'+':'âˆ’'} ${Math.abs(b)})(${c}x ${d>=0?'+':'âˆ’'} ${Math.abs(d)})`;
      const A=a*c, B=a*d + b*c, C=b*d; const sol = [A, B, C];
      const txt = polyToString([A, B, C]);
      $('#prodSol').textContent = txt; $('#prodAns').value=''; $('#prodOk').textContent='';
    }
    function checkProd(){ const want=$('#prodSol').textContent; const got=parseAns($('#prodAns').value); $('#prodOk').textContent=(parseAns(want)===got)?'âœ”ï¸ Correcto':'âœ–ï¸'; $('#prodOk').className=(parseAns(want)===got)?'ok':'bad'; }

    // ===== Generadores Bach =====
    // Ruffini: p(x) contra (x - r)
    let ruffState=null;
    function genRuffini(){
      // degree 3 with integer coefficients and integer r in [-4,4]\{0}
      const r = [ -4,-3,-2,-1,1,2,3,4 ][Math.floor(Math.random()*8)];
      // build q(x) degree 2 random, then p=(x-r)q to ensure resto=0 sometimes; sometimes shift constant to change resto
      const q=[ Math.floor(Math.random()*5)+1, Math.floor(Math.random()*9)-4, Math.floor(Math.random()*9)-4 ]; // ax^2+bx+c
      // multiply: (x âˆ’ r)(axÂ² + bx + c) = axÂ³ + (bâˆ’ar)xÂ² + (câˆ’br)x âˆ’ cr
      const a=q[0], b=q[1], c=q[2];
      let p=[ a, b - a*r, c - b*r, -c*r ];
      // with 50% probability, tweak constant to make nonzero remainder
      let resto = 0;
      if(Math.random()<0.5){ const tweak = Math.floor(Math.random()*9)-4; p[3]+=tweak; resto = tweak; }
      else{ resto = 0; }
      ruffState={p,r,resto};
      $('#ruffExp').textContent = `Dividir p(x)=${polyToString(p)} entre (x âˆ’ ${r})`;
      $('#ruffSol').innerHTML = `Resto = p(${r}) = ${resto}.<br/>Coeficientes: ${p.join(', ')} â†’ Ruffini con ${r}.`;
      $('#ruffAns').value=''; $('#ruffOk').textContent='';
    }
    function checkRuffini(){ if(!ruffState) return; const want = String(ruffState.resto); const got = $('#ruffAns').value.trim(); const ok = (want===got); $('#ruffOk').textContent = ok? 'âœ”ï¸ Correcto' : `âœ–ï¸ Resto esperado: ${want}`; $('#ruffOk').className = ok? 'ok':'bad'; }

    // FactorizaciÃ³n guiada: genera polinomio con raÃ­ces pequeÃ±as
    function genFact(){
      const roots = [];
      const pool = [-3,-2,-1,0,1,2,3,4];
      const n = 2 + Math.floor(Math.random()*2); // 2 o 3 raÃ­ces (con repeticiones)
      for(let i=0;i<n;i++){ roots.push(pool[Math.floor(Math.random()*pool.length)]); }
      // construir polinomio desde raÃ­ces
      let coefs=[1]; // grado 0: 1
      roots.forEach(r=>{
        // multiply coefs by (x - r)
        const nc = new Array(coefs.length+1).fill(0);
        for(let i=0;i<coefs.length;i++){ nc[i] += coefs[i]; nc[i+1] += -r*coefs[i]; }
        coefs = nc;
      });
      // coefs now high->low
      $('#factExp').textContent = `Factoriza p(x)=${polyToString(coefs)}`;
      $('#factSol').textContent = 'Una factorizaciÃ³n: ' + roots.map(r=>`(x ${r>=0? 'âˆ’' : '+'} ${Math.abs(r)})`).join('');
    }

    // Quiz
    const QUIZ_BANK = [
      {q:'El resto de dividir p(x) entre (x âˆ’ a) esâ€¦', a:['p(a)','p\'(a)','a','el tÃ©rmino independiente'], c:0},
      {q:'(x + 5)(x âˆ’ 5) es igual aâ€¦', a:['xÂ² âˆ’ 25','xÂ² + 25','xÂ² âˆ’ 10x + 25','xÂ² + 10x âˆ’ 25'], c:0},
      {q:'Si 2 es raÃ­z doble, entoncesâ€¦', a:['(x âˆ’ 2)Â² divide p(x)','(x âˆ’ 2) divide p(x) pero una vez','p(2)â‰ 0','pâ€²(2)â‰ 0'], c:0},
      {q:'Grado de (xÂ² + 1)(x âˆ’ 3)', a:['3','2','1','4'], c:0},
      {q:'Candidatos a raÃ­ces racionales de 2xÂ³ âˆ’ 5xÂ² + x âˆ’ 2', a:['Â±1, Â±2, Â±1/2','Â±1, Â±2','Â±1/2, Â±1/4','Ninguno'], c:0},
      {q:'Signo de (x âˆ’ 1)Â² para x &lt; 1', a:['â‰¥0','â‰¤0','&lt;0','>0 y &lt;0 alternando'], c:0},
      {q:'Si p(0)=0, entoncesâ€¦', a:['x es factor de p(x)','(x âˆ’ 1) es factor','grado de p es 0','p tiene raÃ­z 1'], c:0},
    ];
    let quizSel=[];
    function startQuiz(){
      quizSel = [...QUIZ_BANK].sort(()=>Math.random()-0.5).slice(0,5);
      const ol = $('#quizList'); ol.innerHTML='';
      quizSel.forEach((it,idx)=>{
        const li = document.createElement('li');
        const q = document.createElement('div'); q.textContent = it.q; q.style.fontWeight='800'; li.appendChild(q);
        it.a.forEach((opt,i)=>{
          const id = `q${idx}_${i}`;
          const lab = document.createElement('label');
          lab.style.display='block';
          lab.innerHTML = `<input type="radio" name="q${idx}" value="${i}"> ${opt}`;
          li.appendChild(lab);
        });
        ol.appendChild(li);
      });
      const btn = document.createElement('button'); btn.className='btn small'; btn.textContent='Corregir'; btn.onclick=gradeQuiz; ol.appendChild(document.createElement('br')); ol.appendChild(btn);
      $('#quizScore').textContent='';
    }
    function gradeQuiz(){
      let score=0; quizSel.forEach((it,idx)=>{
        const checked = document.querySelector(`input[name="q${idx}"]:checked`);
        if(checked && Number(checked.value)===it.c) score++;
      });
      $('#quizScore').textContent = `PuntuaciÃ³n: ${score}/5`;
    }
  </script>
</body>
</html>

