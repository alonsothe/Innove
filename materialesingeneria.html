
<!DOCTYPE html>
<html lang="es" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Innove | Ingenier√≠a de Materiales UPC</title>
    
    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- TAILWIND -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              display: ['Space Grotesk', 'sans-serif'],
              mono: ['JetBrains Mono', 'monospace'],
            },
            colors: {
              brand: {
                50: '#eef2ff',
                100: '#e0e7ff',
                500: '#6366f1', // Indigo
                600: '#4f46e5',
                900: '#312e81',
              },
              dark: {
                bg: '#050505',
                card: '#111111',
                sidebar: '#0a0a0a',
                border: 'rgba(255, 255, 255, 0.08)',
              }
            }
          }
        }
      }
    </script>

    <!-- MATHJAX -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$']],
          processEscapes: true,
        },
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .animate-fadeInUp { animation: fadeInUp 0.6s ease-out backwards; }
        .animate-slideDown { animation: slideDown 0.6s ease-out; }
        .animate-slideInRight { animation: slideInRight 0.5s ease-out backwards; }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #334155;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>
<body class="bg-slate-50 text-slate-900 dark:bg-dark-bg dark:text-white transition-colors duration-300 overflow-hidden h-screen flex font-sans">

    <!-- SIDEBAR -->
    <aside class="w-20 lg:w-[280px] h-full bg-white dark:bg-dark-sidebar border-r border-slate-200 dark:border-dark-border flex flex-col p-4 z-10 transition-all duration-300 shrink-0">
        <!-- Brand -->
        <div class="flex items-center gap-3 mb-10 px-2 justify-center lg:justify-start">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-brand-500 to-brand-600 flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-brand-500/30">
                Œ£
            </div>
            <span class="hidden lg:block font-display text-xl font-bold tracking-tight">Innove</span>
        </div>

        <!-- Navigation -->
        <nav class="flex flex-col gap-2 flex-1" id="nav-container">
            <!-- Generated by JS -->
        </nav>

        <!-- Footer Stats -->
        <div class="hidden lg:block mt-auto pt-6 border-t border-slate-200 dark:border-dark-border">
            <div class="bg-slate-100 dark:bg-white/5 p-4 rounded-xl">
                <div class="flex justify-between mb-2 text-sm font-medium">
                    <span class="text-slate-500 dark:text-slate-400">Progreso</span>
                    <span class="text-brand-600 dark:text-brand-500" id="progress-text">0/0</span>
                </div>
                <div class="w-full h-1.5 bg-slate-200 dark:bg-white/10 rounded-full overflow-hidden">
                    <div class="h-full w-0 bg-brand-500 rounded-full transition-all duration-500" id="progress-bar"></div>
                </div>
            </div>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="flex-1 h-full overflow-y-auto p-5 md:p-10 relative scroll-smooth" id="main-scroll">
        
        <!-- Header -->
        <header class="flex justify-between items-end mb-10 animate-slideDown">
            <div>
                <h1 class="font-display text-3xl md:text-4xl font-bold mb-2 text-slate-900 dark:text-white">
                    Materiales de Ingenier√≠a
                </h1>
                <p class="text-slate-500 dark:text-slate-400 max-w-2xl leading-relaxed">
                    Banco de ejercicios nivel UPC. Propiedades, fallos y selecci√≥n de materiales para ingenier√≠a civil e industrial.
                </p>
            </div>
            
            <button 
                id="theme-toggle"
                class="w-12 h-12 rounded-xl border border-slate-200 dark:border-dark-border flex items-center justify-center text-xl hover:bg-slate-100 dark:hover:bg-white/5 transition-colors"
                aria-label="Toggle Theme"
            >
                ‚òÄÔ∏è
            </button>
        </header>

        <!-- Mobile Filters -->
        <div class="flex lg:hidden gap-3 mb-8 overflow-x-auto pb-2" id="mobile-filters">
             <!-- Generated by JS -->
        </div>

        <!-- Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 pb-20" id="exercise-grid">
             <!-- Generated by JS -->
        </div>
    </main>

    <!-- MODAL -->
    <div id="modal-backdrop" class="fixed inset-0 bg-slate-900/40 dark:bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 md:p-8 transition-all duration-300 opacity-0 invisible pointer-events-none">
        <div id="modal-content" class="w-full max-w-5xl h-[90vh] bg-white dark:bg-[#0f0f0f] rounded-3xl shadow-2xl flex flex-col overflow-hidden border border-slate-200 dark:border-dark-border transition-all duration-300 scale-95 translate-y-10">
            
            <!-- Modal Header -->
            <div class="px-8 py-6 border-b border-slate-200 dark:border-dark-border flex justify-between items-center bg-slate-50 dark:bg-dark-card shrink-0">
                <div>
                    <h2 id="modal-title" class="font-display text-2xl font-bold text-slate-900 dark:text-white mb-1">
                        <!-- Title -->
                    </h2>
                    <span id="modal-id" class="font-mono text-sm text-brand-600 dark:text-brand-400">
                        <!-- ID -->
                    </span>
                </div>
                <button 
                    onclick="closeModal()"
                    class="w-10 h-10 rounded-full bg-slate-200 dark:bg-white/10 text-slate-500 dark:text-slate-400 flex items-center justify-center hover:bg-rose-500 hover:text-white hover:rotate-90 transition-all duration-300"
                >
                    ‚úï
                </button>
            </div>

            <!-- Modal Body -->
            <div class="flex-1 overflow-y-auto p-6 md:p-10 grid grid-cols-1 lg:grid-cols-2 gap-10">
                
                <!-- Problem Section -->
                <div class="lg:border-r border-slate-200 dark:border-dark-border lg:pr-10">
                    <span class="text-xs font-mono font-bold text-brand-600 dark:text-brand-400 uppercase tracking-widest mb-4 block">
                        Enunciado
                    </span>
                    <div id="modal-problem" class="text-lg md:text-xl leading-relaxed text-slate-800 dark:text-slate-200 font-medium">
                        <!-- Problem Text -->
                    </div>
                    
                    <div class="mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900/30 rounded-xl">
                        <p class="text-sm text-blue-800 dark:text-blue-300 flex gap-2">
                            <span>üí°</span> 
                            <span>
                                <strong>Tip UPC:</strong> Recuerda verificar las unidades. En ingenier√≠a civil y materiales, a menudo trabajamos con MPa ($N/mm^2$) y GPa.
                            </span>
                        </p>
                    </div>
                </div>

                <!-- Solution Section -->
                <div>
                    <span class="text-xs font-mono font-bold text-brand-600 dark:text-brand-400 uppercase tracking-widest mb-6 block">
                        Soluci√≥n Paso a Paso
                    </span>
                    
                    <div id="modal-steps" class="flex flex-col gap-4">
                        <!-- Steps injected here -->
                    </div>

                    <div class="mt-8 p-6 bg-emerald-50 dark:bg-emerald-500/10 border border-emerald-200 dark:border-emerald-500/30 rounded-xl text-center">
                        <span class="text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-widest mb-2 block">
                            Resultado Final
                        </span>
                        <div id="modal-solution" class="text-2xl font-display font-bold text-emerald-700 dark:text-emerald-400">
                            <!-- Solution -->
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- LOGIC -->
    <script>
        // --- DATA ---
        const exercises = [
            // ==========================================
            // 1. ESTRUCTURA Y CRISTALOGRAF√çA (STR) - 15 Ejercicios
            // ==========================================
            {
                id: "STR-001", category: "structure", topic: "Densidad Te√≥rica (FCC)", difficulty: "Medium",
                problem: "El iridio tiene estructura FCC y un radio at√≥mico de $0.1357 \\text{ nm}$. Calcule su densidad volum√©trica te√≥rica en $\\text{g/cm}^3$. Datos: $A_{Ir} = 192.2 \\text{ g/mol}$, $N_A = 6.022 \\times 10^{23}$.",
                steps: ["En FCC, $n = 4$ √°tomos/celda.", "Relaci√≥n arista-radio: $a = 2R\\sqrt{2} = 2(0.1357)\\sqrt{2} \\approx 0.3838 \\text{ nm}$.", "Volumen celda $V_c = a^3 = (3.838 \\times 10^{-8} \\text{ cm})^3 \\approx 5.654 \\times 10^{-23} \\text{ cm}^3$.", "$\\rho = \\frac{nA}{V_c N_A} = \\frac{4(192.2)}{(5.654 \\times 10^{-23})(6.022 \\times 10^{23})}$.", "$\\rho = \\frac{768.8}{34.05} \\approx 22.58 \\text{ g/cm}^3$."],
                solution: "$$ 22.58 \\text{ g/cm}^3 $$"
            },
            {
                id: "STR-002", category: "structure", topic: "Densidad Planar (111)", difficulty: "Hard",
                problem: "Calcule la densidad planar at√≥mica (√°tomos/nm$^2$) del plano $(111)$ para el Aluminio (FCC, $R=0.143$ nm).",
                steps: ["El plano (111) FCC es el m√°s compacto.", "√Årea del tri√°ngulo base en el plano: $A = 4R^2\\sqrt{3}$.", "√Åtomos efectivos en ese tri√°ngulo: 2.", "$\\rho_p = \\frac{2}{4R^2\\sqrt{3}} = \\frac{1}{2R^2\\sqrt{3}}$.", "$\\rho_p = \\frac{1}{2(0.143)^2(1.732)} = \\frac{1}{0.0708}$."],
                solution: "$$ 14.12 \\text{ at/nm}^2 $$"
            },
            {
                id: "STR-003", category: "structure", topic: "Densidad Lineal [110] BCC", difficulty: "Hard",
                problem: "Calcule la densidad lineal en la direcci√≥n $[110]$ para el Hierro $\\alpha$ (BCC, $R=0.124$ nm).",
                steps: ["Longitud del vector en la celda: $L = a\\sqrt{2}$.", "$a = 4R/\\sqrt{3} = 0.2864$ nm.", "$L = 0.405$ nm.", "√Åtomos en el vector [110]: Solo los v√©rtices contribuyen radio. No hay √°tomo central. Longitud ocupada 2R? No, densidad lineal es 1 √°tomo equivalente en longitud $a\\sqrt{2}$.", "$\\rho_l = \\frac{1}{a\\sqrt{2}} = \\frac{1}{0.405} \\approx 2.47$."],
                solution: "$$ 2.47 \\text{ at/nm} $$"
            },
            {
                id: "STR-004", category: "structure", topic: "Difusi√≥n (2¬™ Ley Fick)", difficulty: "Hard",
                problem: "Cementaci√≥n de acero (0.1% C) a 927¬∞C ($D = 1.28 \\times 10^{-11} \\text{m}^2/\\text{s}$). Se desea 0.6% C a 0.75 mm. Superficie 1.15% C. ¬øTiempo?",
                steps: ["$\\frac{C_x - C_0}{C_s - C_0} = 1 - \\text{erf}(z)$.", "$\\frac{0.6 - 0.1}{1.15 - 0.1} = 0.4762$.", "$\\text{erf}(z) = 0.5238 \\Rightarrow z \\approx 0.504$.", "$z = \\frac{x}{2\\sqrt{Dt}}$. Despejar $t$.", "$t = \\frac{x^2}{4D(0.504)^2} \\approx 43200$ s."],
                solution: "$$ 12 \\text{ horas} $$"
            },
            {
                id: "STR-005", category: "structure", topic: "Difracci√≥n RX (Bragg)", difficulty: "Medium",
                problem: "Tungsteno (BCC), $\\lambda = 0.1542$ nm. Plano (110) difracta a $2\\theta = 40.3^{\\circ}$. Calcule $a$.",
                steps: ["$\\theta = 20.15^{\\circ}$. $d_{110} = \\frac{\\lambda}{2\\sin\\theta} = 0.2238$ nm.", "$a = d_{110}\\sqrt{1^2+1^2} = 0.2238\\sqrt{2}$."],
                solution: "$$ 0.3165 \\text{ nm} $$"
            },
            {
                id: "STR-006", category: "structure", topic: "Vacantes (Arrhenius)", difficulty: "Medium",
                problem: "Fracci√≥n de vacantes en Cu a 1000¬∞C. $Q_v = 0.9$ eV, $k = 8.62\\times 10^{-5}$ eV/K.",
                steps: ["$T=1273$ K.", "$N_v/N = \\exp(-0.9 / (k \\times 1273))$.", "$\\exp(-8.20)$."],
                solution: "$$ 2.73 \\times 10^{-4} $$"
            },
            {
                id: "STR-007", category: "structure", topic: "Tama√±o de Grano ASTM", difficulty: "Easy",
                problem: "25 granos/pulg$^2$ a 100x. Calcule $n$.",
                steps: ["$N = 2^{n-1}$.", "$25 = 2^{n-1}$.", "$n-1 = \\ln(25)/\\ln(2) = 4.64$.", "$n = 5.64$."],
                solution: "$$ 5.6 $$"
            },
            {
                id: "STR-008", category: "structure", topic: "Flujo de Difusi√≥n", difficulty: "Medium",
                problem: "Hidr√≥geno en Paladio (5mm espesor). $J = 3\\times 10^{-8}$. $D=10^{-9}$. Calcule gradiente $dC/dx$.",
                steps: ["$J = -D (dC/dx)$.", "$|dC/dx| = J/D = 30$."],
                solution: "$$ 30 \\text{ kg}/\\text{m}^4 $$"
            },
            {
                id: "STR-009", category: "structure", topic: "Factor Empaquetamiento I√≥nico", difficulty: "Medium",
                problem: "Estructura CsCl. $r_{Cs}=0.170, r_{Cl}=0.181$ nm. Calcule FEA.",
                steps: ["$a = 2(r_c+r_a)/\\sqrt{3} = 0.405$ nm.", "Vol esfera = $\\frac{4}{3}\\pi(r_c^3+r_a^3) = 0.0452$.", "Vol celda = $0.0664$.", "FEA = 0.68."],
                solution: "$$ 0.68 $$"
            },
            {
                id: "STR-010", category: "structure", topic: "Cambio Volum√©trico Alotr√≥pico", difficulty: "Hard",
                problem: "Hierro pasa de BCC a FCC a 912¬∞C. $R_{BCC}=0.1258, R_{FCC}=0.1292$. % Cambio Vol.",
                steps: ["$V_{at,BCC} = a_{bcc}^3/2 = 0.0122$.", "$V_{at,FCC} = a_{fcc}^3/4 = 0.0121$.", "Contracci√≥n."],
                solution: "$$ -0.8\\% $$"
            },
            {
                id: "STR-011", category: "structure", topic: "Conversi√≥n Peso a At√≥mico", difficulty: "Medium",
                problem: "Aleaci√≥n 97wt% Al, 3wt% Cu. %At√≥mico de Cu?",
                steps: ["Moles Al = 97/26.98 = 3.6.", "Moles Cu = 3/63.55 = 0.047.", "Total = 3.647.", "%Cu = (0.047/3.647)*100."],
                solution: "$$ 1.3 \\text{ at}\\% $$"
            },
            {
                id: "STR-012", category: "structure", topic: "Sistemas de Deslizamiento", difficulty: "Easy",
                problem: "¬øSistemas de deslizamiento en FCC?",
                steps: ["4 planos {111}.", "3 direcciones <110> por plano.", "Total 12."],
                solution: "$$ 12 $$"
            },
            {
                id: "STR-013", category: "structure", topic: "Vector de Burgers", difficulty: "Medium",
                problem: "Magnitud de b en Al ($a=0.405$ nm), direcci√≥n <110>.",
                steps: ["$b = a/2 \\sqrt{2}$.", "$0.405(0.707)$."],
                solution: "$$ 0.286 \\text{ nm} $$"
            },
            {
                id: "STR-014", category: "structure", topic: "Grado Polimerizaci√≥n", difficulty: "Easy",
                problem: "Polietileno ($C_2H_4$), peso molecular 140,000 g/mol. Calcule DP.",
                steps: ["Peso mero = 28 g/mol.", "DP = 140000/28."],
                solution: "$$ 5000 $$"
            },
            {
                id: "STR-015", category: "structure", topic: "Cristalinidad Pol√≠mero", difficulty: "Medium",
                problem: "$\\rho_s=1.2, \\rho_a=1.1, \\rho_c=1.3$. %Cristalinidad?",
                steps: ["%C = $\\frac{\\rho_c(\\rho_s-\\rho_a)}{\\rho_s(\\rho_c-\\rho_a)}$.", "$\\frac{1.3(0.1)}{1.2(0.2)}$."],
                solution: "$$ 54.2\\% $$"
            },

            // ==========================================
            // 2. PROPIEDADES MEC√ÅNICAS (MEC) - 15 Ejercicios
            // ==========================================
            {
                id: "MEC-001", category: "properties", topic: "Tensi√≥n Verdadera", difficulty: "Medium",
                problem: "Acero traccionado. Carga 100 kN, alargamiento 10% (sin estricci√≥n). $d_0=12$ mm. Calcule $\\sigma_T$.",
                steps: ["$A_0 = 113.1$ mm$^2$.", "$\\sigma_{ing} = 100000/113.1 = 884$ MPa.", "$\\sigma_T = \\sigma_{ing}(1+\\epsilon) = 884(1.1)$."],
                solution: "$$ 972 \\text{ MPa} $$"
            },
            {
                id: "MEC-002", category: "properties", topic: "Endurecimiento (Hollomon)", difficulty: "Hard",
                problem: "$\\sigma = K\\epsilon^n$. Puntos: (0.05, 150 MPa), (0.2, 250 MPa). Calcule $n$.",
                steps: ["$\\ln(250/150) = n \\ln(0.2/0.05)$.", "$0.51 = n(1.38)$."],
                solution: "$$ n = 0.37 $$"
            },
            {
                id: "MEC-003", category: "properties", topic: "Hall-Petch", difficulty: "Medium",
                problem: "Lat√≥n: $\\sigma_y=100$ (d=0.05), $\\sigma_y=130$ (d=0.02). Calcule para d=0.01.",
                steps: ["$100 = \\sigma_0 + k(4.47)$.", "$130 = \\sigma_0 + k(7.07)$.", "$k=11.5$. $\\sigma_0=48.4$.", "$\\sigma = 48.4 + 11.5(10)$."],
                solution: "$$ 164 \\text{ MPa} $$"
            },
            {
                id: "MEC-004", category: "properties", topic: "Resiliencia", difficulty: "Medium",
                problem: "Acero $E=207$ GPa, $\\sigma_y=350$ MPa. M√≥dulo de resiliencia $U_r$.",
                steps: ["$U_r = \\sigma_y^2 / 2E$.", "$350^2 / 414000$."],
                solution: "$$ 0.296 \\text{ MJ/m}^3 $$"
            },
            {
                id: "MEC-005", category: "properties", topic: "Palanca (Fase L√≠quida)", difficulty: "Medium",
                problem: "Cu-Ni 40% Ni a 1250¬∞C. L√≠quidus 32%, S√≥lidus 45%. %L√≠quido?",
                steps: ["$W_L = (45-40)/(45-32) = 5/13$."],
                solution: "$$ 38.5\\% $$"
            },
            {
                id: "MEC-006", category: "properties", topic: "Fracci√≥n Perlita", difficulty: "Hard",
                problem: "Acero 0.35% C enfriado. Fracci√≥n perlita bajo 727¬∞C.",
                steps: ["$W_{perl} = W_{\\gamma} = (0.35-0.022)/(0.76-0.022)$."],
                solution: "$$ 44.4\\% $$"
            },
            {
                id: "MEC-007", category: "properties", topic: "Flexi√≥n Cer√°mica (3 pt)", difficulty: "Easy",
                problem: "Barra $b=10, d=5, L=30$ mm. Rotura 500 N.",
                steps: ["$\\sigma = 3FL / 2bd^2$.", "$15000 / 2(10)(25) = 15000/500$."],
                solution: "$$ 30 \\text{ MPa} $$"
            },
            {
                id: "MEC-008", category: "properties", topic: "Tensi√≥n T√©rmica", difficulty: "Medium",
                problem: "Lat√≥n ($E=100$ GPa, $\\alpha=20\\mu$). $\\Delta T = +20^{\\circ}$C. Tensi√≥n fija.",
                steps: ["$\\sigma = E\\alpha\\Delta T$.", "$100000(20\\times 10^{-6})(20)$."],
                solution: "$$ 40 \\text{ MPa} $$"
            },
            {
                id: "MEC-009", category: "properties", topic: "Conductividad Aleaci√≥n", difficulty: "Medium",
                problem: "Cu puro $\\rho=1.7\\times 10^{-8}$. Impurezas Ni $+1.5\\times 10^{-8}$/at%. Aleaci√≥n 2% Ni.",
                steps: ["$\\rho_{tot} = 1.7 + 3.0 = 4.7$.", "$\\sigma = 1/4.7\\times 10^{-8}$."],
                solution: "$$ 2.13 \\times 10^7 \\text{ S/m} $$"
            },
            {
                id: "MEC-010", category: "properties", topic: "Viscoelasticidad", difficulty: "Hard",
                problem: "Pol√≠mero $\\tau=60$s. ¬øTiempo para relajar tensi√≥n al 50%?",
                steps: ["$0.5 = \\exp(-t/60)$.", "$t = -60 \\ln(0.5)$."],
                solution: "$$ 41.6 \\text{ s} $$"
            },
            {
                id: "MEC-011", category: "properties", topic: "Cementita Proeutectoide", difficulty: "Hard",
                problem: "Acero 1.2% C. Fracci√≥n $Fe_3C$ proeutectoide.",
                steps: ["$W = (1.2-0.76)/(6.7-0.76) = 0.44/5.94$."],
                solution: "$$ 7.4\\% $$"
            },
            {
                id: "MEC-012", category: "properties", topic: "Dureza Vickers", difficulty: "Easy",
                problem: "Carga 10kg, diagonal media 0.35 mm.",
                steps: ["$HV = 1.854 P/d^2$.", "$1.854(10)/0.1225$."],
                solution: "$$ 151 \\text{ HV} $$"
            },
            {
                id: "MEC-013", category: "properties", topic: "Recuperaci√≥n El√°stica", difficulty: "Medium",
                problem: "$\\sigma=400$ MPa, $E=200$ GPa, $\\epsilon_{tot}=0.005$. Deformaci√≥n pl√°stica?",
                steps: ["$\\epsilon_{elas} = 400/200000 = 0.002$.", "$\\epsilon_p = 0.005 - 0.002$."],
                solution: "$$ 0.003 $$"
            },
            {
                id: "MEC-014", category: "properties", topic: "Coeficiente Poisson", difficulty: "Easy",
                problem: "$\\\\epsilon_z = 0.004, \\epsilon_x = -0.0012$.",
                steps: ["$\\nu = -(-0.0012)/0.004$."],
                solution: "$$ 0.3 $$"
            },
            {
                id: "MEC-015", category: "properties", topic: "Energ√≠a Charpy", difficulty: "Easy",
                problem: "Masa 20kg. Cae 1m, sube 0.2m.",
                steps: ["$\\Delta E = mg(h_1-h_2) = 20(9.81)(0.8)$."],
                solution: "$$ 157 \\text{ J} $$"
            },

            // ==========================================
            // 3. CIVIL / CONCRETO (CIV) - 15 Ejercicios
            // ==========================================
            {
                id: "CIV-001", category: "concrete", topic: "Ley de Abrams", difficulty: "Medium",
                problem: "A $a/c=0.4$, $f=45$. A $a/c=0.6$, $f=25$. Estime $f$ para 0.5.",
                steps: ["Interpolaci√≥n logar√≠tmica.", "$f \\approx 33$ MPa."],
                solution: "$$ 33.3 \\text{ MPa} $$"
            },
            {
                id: "CIV-002", category: "concrete", topic: "Dise√±o Mezcla (Vol Absoluto)", difficulty: "Hard",
                problem: "1 $m^3$. 350kg Cem (3.15), 190kg Agua, 2% Aire. 60% Grava (2.7), 40% Arena (2.6). Peso Grava?",
                steps: ["Vol Pasta+Aire = 0.321.", "Vol √Åridos = 0.679.", "Vol Grava = 0.407.", "Peso = 0.407*2700."],
                solution: "$$ 1100 \\text{ kg} $$"
            },
            {
                id: "CIV-003", category: "concrete", topic: "Ajuste Humedad Arena", difficulty: "Medium",
                problem: "1000 kg arena seca req. Humedad 5%, Abs 1%. Peso h√∫medo y agua aporte?",
                steps: ["Peso = 1050 kg.", "Agua libre = 5-1=4%.", "Aporte = 40 kg."],
                solution: "$$ 1050 \\text{ kg, } +40 \\text{ L agua} $$"
            },
            {
                id: "CIV-004", category: "concrete", topic: "M√≥dulo Finura Comb", difficulty: "Medium",
                problem: "60% Arena A (2.4) + 40% Arena B (3.2).",
                steps: ["$MF = 0.6(2.4) + 0.4(3.2) = 1.44 + 1.28$."],
                solution: "$$ 2.72 $$"
            },
            {
                id: "CIV-005", category: "concrete", topic: "Porosidad Concreto", difficulty: "Hard",
                problem: "Msat=2400, Ms=2250, Msub=1350. Porosidad?",
                steps: ["Vol aparente = 2400-1350 = 1050.", "Vol poros = 150.", "% = 150/1050."],
                solution: "$$ 14.3\\% $$"
            },
            {
                id: "CIV-006", category: "concrete", topic: "M√≥dulo El√°stico ACI", difficulty: "Easy",
                problem: "$f'_c = 30$ MPa. Estime $E$.",
                steps: ["$E = 4700\\sqrt{30}$."],
                solution: "$$ 25.7 \\text{ GPa} $$"
            },
            {
                id: "CIV-007", category: "concrete", topic: "Ensayo Brasile√±o", difficulty: "Medium",
                problem: "Cilindro 150x300mm. Carga 150kN.",
                steps: ["$f_t = 2P / \\pi LD$.", "$300000 / (300\\times 150\\pi)$."],
                solution: "$$ 2.12 \\text{ MPa} $$"
            },
            {
                id: "CIV-008", category: "concrete", topic: "Vac√≠os Agregado", difficulty: "Medium",
                problem: "SG=2.65, Densidad granel 1600 kg/m3.",
                steps: ["%V = (2650-1600)/2650."],
                solution: "$$ 39.6\\% $$"
            },
            {
                id: "CIV-009", category: "concrete", topic: "Reducci√≥n Agua", difficulty: "Easy",
                problem: "Base 200 kg agua. Aditivo reduce 15%.",
                steps: ["200 * 0.85."],
                solution: "$$ 170 \\text{ kg} $$"
            },
            {
                id: "CIV-010", category: "concrete", topic: "Columna Compuesta", difficulty: "Hard",
                problem: "300x300. 4 barras 25mm ($A_s=1960$). $E_s/E_c=8$. P=1000kN. Carga acero?",
                steps: ["$P_s = P \\frac{nA_s}{A_c+nA_s}$.", "$1000 \\frac{15680}{88040+15680}$."],
                solution: "$$ 151 \\text{ kN} $$"
            },
            {
                id: "CIV-011", category: "concrete", topic: "Calor Hidrataci√≥n", difficulty: "Medium",
                problem: "350 J/g. 100 m3 concreto, 300 kg cem/m3.",
                steps: ["Masa = 30000 kg.", "E = 30000 * 350 kJ."],
                solution: "$$ 10.5 \\text{ GJ} $$"
            },
            {
                id: "CIV-012", category: "concrete", topic: "Carbonataci√≥n", difficulty: "Medium",
                problem: "10mm en 4 a√±os. ¬øEn 25 a√±os?",
                steps: ["$d = K\\sqrt{t}$. $K=5$.", "$5\\sqrt{25}$."],
                solution: "$$ 25 \\text{ mm} $$"
            },
            {
                id: "CIV-013", category: "concrete", topic: "Bulking Arena", difficulty: "Medium",
                problem: "5L seco -> 6.2L h√∫medo.",
                steps: ["(6.2-5)/5."],
                solution: "$$ 24\\% $$"
            },
            {
                id: "CIV-014", category: "concrete", topic: "Densidad Asfalto", difficulty: "Medium",
                problem: "5% huecos, 5% bet√∫n(1.0), 90% √°rido(2.7). Densidad real?",
                steps: ["Masa = 50 + 2430 = 2480. Vol=1."],
                solution: "$$ 2480 \\text{ kg/m}^3 $$"
            },
            {
                id: "CIV-015", category: "concrete", topic: "Granulometr√≠a", difficulty: "Easy",
                problem: "Retenido acum tamiz X: 30%. %Pasa?",
                steps: ["100-30."],
                solution: "$$ 70\\% $$"
            },

            // ==========================================
            // 4. FALLO Y CORROSI√ìN (FAI) - 15 Ejercicios
            // ==========================================
            {
                id: "FAI-001", category: "failure", topic: "Tenacidad K1c", difficulty: "Medium",
                problem: "$K_{Ic}=55$, grieta $a=3$mm, $Y=1.12$. Tensi√≥n rotura?",
                steps: ["$\\sigma = 55 / (1.12 \\sqrt{\\pi 0.003})$."],
                solution: "$$ 506 \\text{ MPa} $$"
            },
            {
                id: "FAI-002", category: "failure", topic: "Fatiga (Miner)", difficulty: "Hard",
                problem: "Vida 1: 10^5. Vida 2: 10^4. Consumido 50k ciclos en 1. Restante en 2?",
                steps: ["Da√±o 1 = 0.5.", "Restante = 0.5.", "Ciclos 2 = 0.5 * 10000."],
                solution: "$$ 5000 \\text{ ciclos} $$"
            },
            {
                id: "FAI-003", category: "failure", topic: "Ley Paris", difficulty: "Hard",
                problem: "$A=10^{-12}, m=3, \\Delta K=40$. da/dN?",
                steps: ["$10^{-12}(64000)$ m/ciclo."],
                solution: "$$ 6.4 \\times 10^{-5} \\text{ mm} $$"
            },
            {
                id: "FAI-004", category: "failure", topic: "Larson-Miller", difficulty: "Hard",
                problem: "1000h a 600¬∞C (873K). LMP?",
                steps: ["$873(20 + 3)$."],
                solution: "$$ 20,079 $$"
            },
            {
                id: "FAI-005", category: "failure", topic: "Velocidad Corrosi√≥n", difficulty: "Medium",
                problem: "Fe, $10 \\mu A/cm^2$. mm/a√±o?",
                steps: ["0.0116 * 10."],
                solution: "$$ 0.116 \\text{ mm/a√±o} $$"
            },
            {
                id: "FAI-006", category: "failure", topic: "L√≠mite Fatiga", difficulty: "Easy",
                problem: "$S_{ut} = 800$ MPa. Estime $S_e$.",
                steps: ["0.5 * 800."],
                solution: "$$ 400 \\text{ MPa} $$"
            },
            {
                id: "FAI-007", category: "failure", topic: "Griffith (Vidrio)", difficulty: "Medium",
                problem: "$\\gamma=0.3, E=70$ GPa, $a=1\\mu m$. $\\sigma_c$?",
                steps: ["$\\sqrt{2E\\gamma / \\pi a}$."],
                solution: "$$ 115 \\text{ MPa} $$"
            },
            {
                id: "FAI-008", category: "failure", topic: "Pilling-Bedworth", difficulty: "Medium",
                problem: "Mg -> MgO. PBR?",
                steps: ["$V_{ox}/V_{met} = 0.81$. No protector."],
                solution: "$$ 0.81 $$"
            },
            {
                id: "FAI-009", category: "failure", topic: "Vida Fatiga S-N", difficulty: "Medium",
                problem: "$\\sigma = 1600 N^{-0.12}$. A 400 MPa.",
                steps: ["$0.25 = N^{-0.12}$."],
                solution: "$$ 102,000 \\text{ ciclos} $$"
            },
            {
                id: "FAI-010", category: "failure", topic: "Pila Galv√°nica", difficulty: "Easy",
                problem: "Zn (-0.76V) vs Fe (-0.44V). Potencial?",
                steps: ["0.32 V. Zn se corroe."],
                solution: "$$ 0.32 \\text{ V} $$"
            },
            {
                id: "FAI-011", category: "failure", topic: "Weibull", difficulty: "Hard",
                problem: "10% fallo a 200, 50% a 300. Modulo m?",
                steps: ["Pendiente log-log."],
                solution: "$$ m \\approx 4.6 $$"
            },
            {
                id: "FAI-012", category: "failure", topic: "Choque T√©rmico", difficulty: "Easy",
                problem: "Al√∫mina vs S√≠lice. ¬øMejor?",
                steps: ["S√≠lice (menor expansi√≥n)."],
                solution: "$$ \\text{S√≠lice} $$"
            },
            {
                id: "FAI-013", category: "failure", topic: "Creep Activaci√≥n", difficulty: "Medium",
                problem: "Velocidad x10 al pasar 500K a 600K. Q?",
                steps: ["Arrhenius ratio."],
                solution: "$$ 57.4 \\text{ kJ/mol} $$"
            },
            {
                id: "FAI-014", category: "failure", topic: "Fragilizaci√≥n H", difficulty: "Easy",
                problem: "BCC vs FCC. ¬øPeor?",
                steps: ["BCC (difusi√≥n r√°pida)."],
                solution: "$$ \\text{BCC} $$"
            },
            {
                id: "FAI-015", category: "failure", topic: "Factor K (Geometr√≠a)", difficulty: "Medium",
                problem: "Grieta central placa inf. $2a=10$ cm, 100 MPa.",
                steps: ["$100\\sqrt{\\pi 0.05}$."],
                solution: "$$ 39.6 \\text{ MPa}\\sqrt{m} $$"
            }
        ];

        const filters = [
            { id: 'all', label: 'Todo', icon: 'üìö' },
            { id: 'structure', label: 'Estructura', icon: 'üíé' },
            { id: 'properties', label: 'Propiedades', icon: '‚öôÔ∏è' },
            { id: 'concrete', label: 'Civil/Concreto', icon: 'üèóÔ∏è' },
            { id: 'failure', label: 'Fallo', icon: 'üí•' },
        ];

        // --- STATE ---
        let currentFilter = 'all';
        let theme = 'light';

        // --- DOM ELEMENTS ---
        const navContainer = document.getElementById('nav-container');
        const mobileFilters = document.getElementById('mobile-filters');
        const gridContainer = document.getElementById('exercise-grid');
        const themeBtn = document.getElementById('theme-toggle');
        const modalBackdrop = document.getElementById('modal-backdrop');
        const modalContent = document.getElementById('modal-content');

        // --- INITIALIZATION ---
        function init() {
            renderNavigation();
            renderGrid();
            updateProgress();
            
            // Check local storage for theme preference
            if (localStorage.getItem('theme') === 'dark') {
                toggleTheme();
            }
        }

        // --- RENDER FUNCTIONS ---
        function renderNavigation() {
            // Desktop Sidebar
            navContainer.innerHTML = filters.map(f => `
                <button 
                    onclick="setFilter('${f.id}')"
                    class="flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 group w-full text-left
                    ${currentFilter === f.id 
                        ? 'bg-brand-50 text-brand-600 dark:bg-brand-500/10 dark:text-brand-500' 
                        : 'text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-white/5 hover:text-slate-900 dark:hover:text-white'}"
                >
                    <span class="text-lg opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-transform">${f.icon}</span>
                    <span class="hidden lg:block">${f.label}</span>
                </button>
            `).join('');

            // Mobile Filters
            mobileFilters.innerHTML = filters.map(f => `
                <button
                    onclick="setFilter('${f.id}')"
                    class="px-4 py-2 rounded-full border text-sm font-medium whitespace-nowrap transition-all
                    ${currentFilter === f.id
                        ? 'bg-brand-600 border-brand-600 text-white shadow-lg shadow-brand-500/20'
                        : 'bg-white dark:bg-dark-card border-slate-200 dark:border-dark-border text-slate-500 dark:text-slate-400'}"
                >
                    ${f.label}
                </button>
            `).join('');
        }

        function renderGrid() {
            const filtered = currentFilter === 'all' 
                ? exercises 
                : exercises.filter(ex => ex.category === currentFilter);

            gridContainer.innerHTML = filtered.map((ex, idx) => {
                const diffColor = getDifficultyColor(ex.difficulty);
                return `
                <article 
                    onclick="openModal('${ex.id}')"
                    class="group bg-white dark:bg-dark-card border border-slate-200 dark:border-dark-border rounded-2xl p-6 flex flex-col cursor-pointer hover:-translate-y-1 hover:shadow-xl hover:border-slate-300 dark:hover:border-white/20 transition-all duration-300 animate-fadeInUp"
                    style="animation-delay: ${idx * 0.02}s"
                >
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex gap-2 flex-wrap">
                            <span class="px-2.5 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider ${diffColor}">
                                ${ex.difficulty}
                            </span>
                            <span class="px-2.5 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider bg-slate-100 text-slate-500 dark:bg-white/5 dark:text-slate-400 border border-slate-200 dark:border-white/10">
                                ${ex.category.toUpperCase().slice(0,4)}
                            </span>
                        </div>
                        <span class="font-mono text-xs text-slate-400">${ex.id}</span>
                    </div>

                    <div class="flex-1 mb-6">
                        <h3 class="font-display font-bold text-lg mb-2 text-slate-800 dark:text-slate-100">${ex.topic}</h3>
                        <div class="text-sm text-slate-600 dark:text-slate-400 line-clamp-3 leading-relaxed">
                            ${ex.problem}
                        </div>
                    </div>

                    <div class="pt-4 border-t border-slate-100 dark:border-white/5 flex justify-between items-center text-brand-600 dark:text-brand-400 font-semibold text-sm">
                        <span>Ver Soluci√≥n</span>
                        <span class="group-hover:translate-x-1 transition-transform">‚Üí</span>
                    </div>
                </article>
                `;
            }).join('');

            refreshMath();
        }

        function getDifficultyColor(diff) {
            switch (diff) {
                case 'Easy': return 'bg-emerald-100 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-400';
                case 'Medium': return 'bg-amber-100 text-amber-700 dark:bg-amber-500/10 dark:text-amber-400';
                case 'Hard': return 'bg-rose-100 text-rose-700 dark:bg-rose-500/10 dark:text-rose-400';
                default: return 'bg-gray-100 text-gray-700';
            }
        }

        function updateProgress() {
            document.getElementById('progress-text').innerText = `0/${exercises.length}`;
            // Placeholder logic for progress bar
        }

        // --- INTERACTION ---
        function setFilter(id) {
            currentFilter = id;
            renderNavigation();
            renderGrid();
        }

        // --- MODAL ---
        function openModal(id) {
            const ex = exercises.find(e => e.id === id);
            if(!ex) return;

            document.getElementById('modal-title').innerText = ex.topic;
            document.getElementById('modal-id').innerText = `ID: ${ex.id}`;
            document.getElementById('modal-problem').innerHTML = ex.problem;
            document.getElementById('modal-solution').innerHTML = ex.solution;

            const stepsContainer = document.getElementById('modal-steps');
            stepsContainer.innerHTML = ex.steps.map((step, i) => `
                <div class="p-5 bg-slate-50 dark:bg-white/5 rounded-xl border-l-4 border-brand-500 animate-slideInRight" style="animation-delay: ${i * 0.1}s">
                    <span class="text-xs font-mono text-slate-400 dark:text-slate-500 mb-2 block">PASO ${i + 1}</span>
                    <div class="text-slate-700 dark:text-slate-300">
                        ${step}
                    </div>
                </div>
            `).join('');

            modalBackdrop.classList.remove('opacity-0', 'invisible', 'pointer-events-none');
            modalContent.classList.remove('scale-95', 'translate-y-10');
            modalContent.classList.add('scale-100', 'translate-y-0');

            refreshMath();
        }

        function closeModal() {
            modalBackdrop.classList.add('opacity-0', 'invisible', 'pointer-events-none');
            modalContent.classList.remove('scale-100', 'translate-y-0');
            modalContent.classList.add('scale-95', 'translate-y-10');
        }

        // Close modal on backdrop click
        modalBackdrop.addEventListener('click', (e) => {
            if(e.target === modalBackdrop) closeModal();
        });

        // --- THEME ---
        themeBtn.addEventListener('click', toggleTheme);

        function toggleTheme() {
            const html = document.documentElement;
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                localStorage.setItem('theme', 'light');
                themeBtn.innerText = '‚òÄÔ∏è';
            } else {
                html.classList.add('dark');
                localStorage.setItem('theme', 'dark');
                themeBtn.innerText = 'üåô';
            }
        }

        // --- MATHJAX ---
        function refreshMath() {
            if (window.MathJax && window.MathJax.typesetPromise) {
                setTimeout(() => {
                     window.MathJax.typesetPromise();
                }, 10);
            }
        }

        // Run
        init();

    </script>
</body>


